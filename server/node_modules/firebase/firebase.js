!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,function(){"use strict";!function(t){if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var h=[301,302,303,307,308];E.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=w,t.Response=E,t.fetch=function(n,i){return new Promise(function(r,t){var e=new w(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new E(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&s&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n,r=v(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=y(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(t,e){var n,r,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function E(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t){return t&&t.Math==Math&&t}function y(t){try{return!!t()}catch(t){return!0}}function g(t){return"object"==typeof t?null!==t:"function"==typeof t}function r(t){return l?u.createElement(t):{}}function d(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t}function o(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function w(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function h(e,n){try{_(m,e,n)}catch(t){m[e]=n}return n}function c(t,e){return S.call(t,e)}function a(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++C+N).toString(36)}function i(t){return c(O,t)||(A&&c(R,t)?O[t]=R[t]:O[t]=P("Symbol."+t)),O[t]}var m=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),s=!1,f=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),u=m.document,l=g(u)&&g(u.createElement),p=!f&&!y(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}),v=Object.defineProperty,b={f:f?v:function(t,e,n){if(d(t),e=o(e,!0),d(n),p)try{return v(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},_=f?function(t,e,n){return b.f(t,e,w(1,n))}:function(t,e,n){return t[e]=n,t},E="__core-js_shared__",I=m[E]||h(E,{}),T=e(function(t){(t.exports=function(t,e){return I[t]||(I[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),S={}.hasOwnProperty,C=0,N=Math.random(),A=!!Object.getOwnPropertySymbols&&!y(function(){return!String(Symbol())}),k=A&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,O=T("wks"),R=m.Symbol,P=k?R:R&&R.withoutSetter||a,D={};D[i("toStringTag")]="z";var x="[object z]"===String(D),L=Function.toString;"function"!=typeof I.inspectSource&&(I.inspectSource=function(t){return L.call(t)});function M(t){return W[t]||(W[t]=a(t))}var F,U,j,V=I.inspectSource,q=m.WeakMap,B="function"==typeof q&&/native code/.test(V(q)),W=T("keys"),H={},G=m.WeakMap;if(B){var Q=new G,K=Q.get,z=Q.has,Y=Q.set;F=function(t,e){return Y.call(Q,t,e),e},U=function(t){return K.call(Q,t)||{}},j=function(t){return z.call(Q,t)}}else{var X=M("state");H[X]=!0,F=function(t,e){return _(t,X,e),e},U=function(t){return c(t,X)?t[X]:{}},j=function(t){return c(t,X)}}function J(t){return tt.call(t).slice(8,-1)}var $={set:F,get:U,has:j,enforce:function(t){return j(t)?U(t):F(t,{})},getterFor:function(n){return function(t){var e;if(!g(t)||(e=U(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Z=e(function(t){var e=$.get,a=$.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||_(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==m?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:_(t,e,n)):o?t[e]=n:h(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||V(this)})}),tt={}.toString,et=i("toStringTag"),nt="Arguments"==J(function(){return arguments}()),rt=x?J:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),et))?n:nt?J(e):"Object"==(r=J(e))&&"function"==typeof e.callee?"Arguments":r},it=x?{}.toString:function(){return"[object "+rt(this)+"]"};x||Z(Object.prototype,"toString",it,{unsafe:!0});function ot(t){return isNaN(t=+t)?0:(0<t?Et:_t)(t)}function st(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(a){return function(t,e){var n,r,i=String(st(t)),o=ot(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}function ut(t){return At(st(t))}function ct(t){return"function"==typeof t?t:void 0}function ht(t,e){return arguments.length<2?ct(Rt[t])||ct(m[t]):Rt[t]&&Rt[t][e]||m[t]&&m[t][e]}function lt(t){return 0<t?Pt(ot(t),9007199254740991):0}function ft(c){return function(t,e,n){var r,i,o,s=ut(t),a=lt(s.length),u=(r=a,(i=ot(n))<0?Dt(i+r,0):xt(i,r));if(c&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((c||u in s)&&s[u]===e)return c||u||0;return!c&&-1}}function pt(t,e){var n,r=ut(t),i=0,o=[];for(n in r)!c(H,n)&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~Lt(o,n)||o.push(n));return o}function dt(t,e){for(var n=Vt(e),r=b.f,i=Ot.f,o=0;o<n.length;o++){var s=n[o];c(t,s)||r(t,s,i(e,s))}}function vt(t,e){var n=Wt[Bt(t)];return n==Gt||n!=Ht&&("function"==typeof e?y(e):!!e)}function yt(t,e){var n,r,i,o,s,a=t.target,u=t.global,c=t.stat;if(n=u?m:c?m[a]||h(a,{}):(m[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=Kt(n,r))&&s.value:n[r],!Qt(u?r:a+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;dt(o,i)}(t.sham||i&&i.sham)&&_(o,"sham",!0),Z(n,r,o,t)}}function gt(t){return Object(st(t))}var mt,bt,wt,_t=Math.ceil,Et=Math.floor,It={codeAt:at(!1),charAt:at(!0)},Tt={}.propertyIsEnumerable,St=Object.getOwnPropertyDescriptor,Ct={f:St&&!Tt.call({1:2},1)?function(t){var e=St(this,t);return!!e&&e.enumerable}:Tt},Nt="".split,At=y(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==J(t)?Nt.call(t,""):Object(t)}:Object,kt=Object.getOwnPropertyDescriptor,Ot={f:f?kt:function(t,e){if(t=ut(t),e=o(e,!0),p)try{return kt(t,e)}catch(t){}if(c(t,e))return w(!Ct.f.call(t,e),t[e])}},Rt=m,Pt=Math.min,Dt=Math.max,xt=Math.min,Lt={includes:ft(!0),indexOf:ft(!1)}.indexOf,Mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ft=Mt.concat("length","prototype"),Ut={f:Object.getOwnPropertyNames||function(t){return pt(t,Ft)}},jt={f:Object.getOwnPropertySymbols},Vt=ht("Reflect","ownKeys")||function(t){var e=Ut.f(d(t)),n=jt.f;return n?e.concat(n(t)):e},qt=/#|\.prototype\./,Bt=vt.normalize=function(t){return String(t).replace(qt,".").toLowerCase()},Wt=vt.data={},Ht=vt.NATIVE="N",Gt=vt.POLYFILL="P",Qt=vt,Kt=Ot.f,zt=!y(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Yt=M("IE_PROTO"),Xt=Object.prototype,Jt=zt?Object.getPrototypeOf:function(t){return t=gt(t),c(t,Yt)?t[Yt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Xt:null},$t=i("iterator"),Zt=!1;[].keys&&("next"in(wt=[].keys())?(bt=Jt(Jt(wt)))!==Object.prototype&&(mt=bt):Zt=!0),null==mt&&(mt={}),c(mt,$t)||_(mt,$t,function(){return this});function te(){}function ee(t){return"<script>"+t+"</"+ue+">"}var ne,re={IteratorPrototype:mt,BUGGY_SAFARI_ITERATORS:Zt},ie=Object.keys||function(t){return pt(t,Mt)},oe=f?Object.defineProperties:function(t,e){d(t);for(var n,r=ie(e),i=r.length,o=0;o<i;)b.f(t,n=r[o++],e[n]);return t},se=ht("document","documentElement"),ae="prototype",ue="script",ce=M("IE_PROTO"),he=function(){try{ne=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;he=ne?function(t){t.write(ee("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ne):((e=r("iframe")).style.display="none",se.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ee("document.F=Object")),t.close(),t.F);for(var n=Mt.length;n--;)delete he[ae][Mt[n]];return he()};H[ce]=!0;function le(t,e,n){t&&!c(t=n?t:t.prototype,ge)&&ye(t,ge,{configurable:!0,value:e})}function fe(){return this}function pe(){return this}function de(t,e,n,r,i,o,s){var a,u,c;function h(t){if(t===i&&m)return m;if(!Ee&&t in y)return y[t];switch(t){case"keys":case Te:case Se:return function(){return new n(this,t)}}return function(){return new n(this)}}u=r,c=e+" Iterator",(a=n).prototype=ve(be,{next:w(1,u)}),le(a,c,!1),me[c]=fe;var l,f,p,d=e+" Iterator",v=!1,y=t.prototype,g=y[Ie]||y["@@iterator"]||i&&y[i],m=!Ee&&g||h(i),b="Array"==e&&y.entries||g;if(b&&(l=Jt(b.call(new t)),_e!==Object.prototype&&l.next&&(Jt(l)!==_e&&(we?we(l,_e):"function"!=typeof l[Ie]&&_(l,Ie,pe)),le(l,d,!0))),i==Te&&g&&g.name!==Te&&(v=!0,m=function(){return g.call(this)}),y[Ie]!==m&&_(y,Ie,m),me[e]=m,i)if(f={values:h(Te),keys:o?m:h("keys"),entries:h(Se)},s)for(p in f)!Ee&&!v&&p in y||Z(y,p,f[p]);else yt({target:e,proto:!0,forced:Ee||v},f);return f}var ve=Object.create||function(t,e){var n;return null!==t?(te[ae]=d(t),n=new te,te[ae]=null,n[ce]=t):n=he(),void 0===e?n:oe(n,e)},ye=b.f,ge=i("toStringTag"),me={},be=re.IteratorPrototype,we=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return d(t),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),_e=re.IteratorPrototype,Ee=re.BUGGY_SAFARI_ITERATORS,Ie=i("iterator"),Te="values",Se="entries",Ce=It.charAt,Ne="String Iterator",Ae=$.set,ke=$.getterFor(Ne);de(String,"String",function(t){Ae(this,{type:Ne,string:String(t),index:0})},function(){var t,e=ke(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ce(n,r),e.index+=t.length,{value:t,done:!1})});var Oe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Re=i("unscopables"),Pe=Array.prototype;null==Pe[Re]&&b.f(Pe,Re,{configurable:!0,value:ve(null)});function De(t){Pe[Re][t]=!0}var xe="Array Iterator",Le=$.set,Me=$.getterFor(xe),Fe=de(Array,"Array",function(t,e){Le(this,{type:xe,target:ut(t),index:0,kind:e})},function(){var t=Me(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");me.Arguments=me.Array,De("keys"),De("values"),De("entries");var Ue=i("iterator"),je=i("toStringTag"),Ve=Fe.values;for(var qe in Oe){var Be=m[qe],We=Be&&Be.prototype;if(We){if(We[Ue]!==Ve)try{_(We,Ue,Ve)}catch(au){We[Ue]=Ve}if(We[je]||_(We,je,qe),Oe[qe])for(var He in Fe)if(We[He]!==Fe[He])try{_(We,He,Fe[He])}catch(au){We[He]=Fe[He]}}}function Ge(t,e,n){for(var r in e)Z(t,r,e[r],n);return t}function Qe(t){var e=ht(t),n=b.f;f&&e&&!e[tn]&&n(e,tn,{configurable:!0,get:function(){return this}})}function Ke(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function ze(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function Ye(t){return void 0!==t&&(me.Array===t||nn[en]===t)}function Xe(r,i,t){if(Ke(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function Je(t){if(null!=t)return t[rn]||t["@@iterator"]||me[rt(t)]}function $e(e,t,n,r){try{return r?t(d(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&d(i.call(e)),t}}var Ze=m.Promise,tn=i("species"),en=i("iterator"),nn=Array.prototype,rn=i("iterator"),on=e(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l,f=Xe(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(s=Je(t)))throw TypeError("Target is not iterable");if(Ye(s)){for(a=0,u=lt(t.length);a<u;a++)if((c=r?f(d(l=t[a])[0],l[1]):f(t[a]))&&c instanceof p)return c;return new p(!1)}o=s.call(t)}for(h=o.next;!(l=h.call(o)).done;)if("object"==typeof(c=$e(o,f,l.value,r))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),sn=i("iterator"),an=!1;try{var un=0,cn={next:function(){return{done:!!un++}},return:function(){an=!0}};cn[sn]=function(){return this},Array.from(cn,function(){throw 2})}catch(au){}function hn(t,e){if(!e&&!an)return!1;var n=!1;try{var r={};r[sn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function ln(t,e){var n,r=d(t).constructor;return void 0===r||null==(n=d(r)[bn])?e:Ke(n)}function fn(t){if(kn.hasOwnProperty(t)){var e=kn[t];delete kn[t],e()}}function pn(t){return function(){fn(t)}}function dn(t){fn(t.data)}function vn(t){m.postMessage(t+"",En.protocol+"//"+En.host)}var yn,gn,mn,bn=i("species"),wn=ht("navigator","userAgent")||"",_n=/(iphone|ipod|ipad).*applewebkit/i.test(wn),En=m.location,In=m.setImmediate,Tn=m.clearImmediate,Sn=m.process,Cn=m.MessageChannel,Nn=m.Dispatch,An=0,kn={},On="onreadystatechange";In&&Tn||(In=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return kn[++An]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},yn(An),An},Tn=function(t){delete kn[t]},"process"==J(Sn)?yn=function(t){Sn.nextTick(pn(t))}:Nn&&Nn.now?yn=function(t){Nn.now(pn(t))}:Cn&&!_n?(mn=(gn=new Cn).port2,gn.port1.onmessage=dn,yn=Xe(mn.postMessage,mn,1)):!m.addEventListener||"function"!=typeof postMessage||m.importScripts||y(vn)||"file:"===En.protocol?yn=On in r("script")?function(t){se.appendChild(r("script"))[On]=function(){se.removeChild(this),fn(t)}}:function(t){setTimeout(pn(t),0)}:(yn=vn,m.addEventListener("message",dn,!1)));var Rn,Pn,Dn,xn,Ln,Mn,Fn,Un,jn={set:In,clear:Tn},Vn=Ot.f,qn=jn.set,Bn=m.MutationObserver||m.WebKitMutationObserver,Wn=m.process,Hn=m.Promise,Gn="process"==J(Wn),Qn=Vn(m,"queueMicrotask"),Kn=Qn&&Qn.value;Kn||(Rn=function(){var t,e;for(Gn&&(t=Wn.domain)&&t.exit();Pn;){e=Pn.fn,Pn=Pn.next;try{e()}catch(t){throw Pn?xn():Dn=void 0,t}}Dn=void 0,t&&t.enter()},xn=Gn?function(){Wn.nextTick(Rn)}:Bn&&!_n?(Ln=!0,Mn=document.createTextNode(""),new Bn(Rn).observe(Mn,{characterData:!0}),function(){Mn.data=Ln=!Ln}):Hn&&Hn.resolve?(Fn=Hn.resolve(void 0),Un=Fn.then,function(){Un.call(Fn,Rn)}):function(){qn.call(m,Rn)});function zn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Ke(n),this.reject=Ke(r)}function Yn(t,e){if(d(t),g(e)&&e.constructor===t)return e;var n=tr.f(t);return(0,n.resolve)(e),n.promise}function Xn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Jn,$n,Zn=Kn||function(t){var e={fn:t,next:void 0};Dn&&(Dn.next=e),Pn||(Pn=e,xn()),Dn=e},tr={f:function(t){return new zn(t)}},er=m.process,nr=er&&er.versions,rr=nr&&nr.v8;rr?$n=(Jn=rr.split("."))[0]+Jn[1]:wn&&(!(Jn=wn.match(/Edge\/(\d+)/))||74<=Jn[1])&&(Jn=wn.match(/Chrome\/(\d+)/))&&($n=Jn[1]);function ir(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e}function or(l,f,p){if(!f.notified){f.notified=!0;var d=f.reactions;Zn(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&xr(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(_r("Promise-chain cycle")):(i=ir(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&Pr(l,f)})}}function sr(t,e,n){var r,i;Ar?((r=Er.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),m.dispatchEvent(r)):r={promise:e,reason:n},(i=m["on"+t])?i(r):t===kr&&function(t,e){var n=m.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function ar(e,n,r,i){return function(t){e(n,r,t,i)}}function ur(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,or(t,e,!0))}var cr,hr,lr,fr,pr=$n&&+$n,dr=jn.set,vr=i("species"),yr="Promise",gr=$.get,mr=$.set,br=$.getterFor(yr),wr=Ze,_r=m.TypeError,Er=m.document,Ir=m.process,Tr=ht("fetch"),Sr=tr.f,Cr=Sr,Nr="process"==J(Ir),Ar=!!(Er&&Er.createEvent&&m.dispatchEvent),kr="unhandledrejection",Or=Qt(yr,function(){if(!(V(wr)!==String(wr))){if(66===pr)return!0;if(!Nr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=pr&&/native code/.test(wr))return!1;function t(t){t(function(){},function(){})}var e=wr.resolve(1);return(e.constructor={})[vr]=t,!(e.then(function(){})instanceof t)}),Rr=Or||!hn(function(t){wr.all(t).catch(function(){})}),Pr=function(n,r){dr.call(m,function(){var t,e=r.value;if(Dr(r)&&(t=Xn(function(){Nr?Ir.emit("unhandledRejection",e,n):sr(kr,n,e)}),r.rejection=Nr||Dr(r)?2:1,t.error))throw t.value})},Dr=function(t){return 1!==t.rejection&&!t.parent},xr=function(t,e){dr.call(m,function(){Nr?Ir.emit("rejectionHandled",t):sr("rejectionhandled",t,e.value)})},Lr=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw _r("Promise can't be resolved itself");var i=ir(t);i?Zn(function(){var e={done:!1};try{i.call(t,ar(Lr,n,e,r),ar(ur,n,e,r))}catch(t){ur(n,e,t,r)}}):(r.value=t,r.state=1,or(n,r,!1))}catch(t){ur(n,{done:!1},t,r)}}};Or&&(wr=function(t){ze(this,wr,yr),Ke(t),cr.call(this);var e=gr(this);try{t(ar(Lr,this,e),ar(ur,this,e))}catch(t){ur(this,e,t)}},(cr=function(){mr(this,{type:yr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ge(wr.prototype,{then:function(t,e){var n=br(this),r=Sr(ln(this,wr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Nr?Ir.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&or(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),hr=function(){var t=new cr,e=gr(t);this.promise=t,this.resolve=ar(Lr,t,e),this.reject=ar(ur,t,e)},tr.f=Sr=function(t){return t===wr||t===lr?new hr:Cr(t)},"function"==typeof Ze&&(fr=Ze.prototype.then,Z(Ze.prototype,"then",function(t,e){var n=this;return new wr(function(t,e){fr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Tr&&yt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Yn(wr,Tr.apply(m,arguments))}}))),yt({global:!0,wrap:!0,forced:Or},{Promise:wr}),le(wr,yr,!1),Qe(yr),lr=ht(yr),yt({target:yr,stat:!0,forced:Or},{reject:function(t){var e=Sr(this);return e.reject.call(void 0,t),e.promise}}),yt({target:yr,stat:!0,forced:Or},{resolve:function(t){return Yn(this,t)}}),yt({target:yr,stat:!0,forced:Rr},{all:function(t){var a=this,e=Sr(a),u=e.resolve,c=e.reject,n=Xn(function(){var r=Ke(a.resolve),i=[],o=0,s=1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Sr(n),i=r.reject,e=Xn(function(){var e=Ke(n.resolve);on(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),yt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=tr.f(a),u=e.resolve,n=e.reject,r=Xn(function(){var r=Ke(a.resolve),i=[],o=0,s=1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var Mr=!!Ze&&y(function(){Ze.prototype.finally.call({then:function(){}},function(){})});yt({target:"Promise",proto:!0,real:!0,forced:Mr},{finally:function(e){var n=ln(this,ht("Promise")),t="function"==typeof e;return this.then(t?function(t){return Yn(n,e()).then(function(){return t})}:e,t?function(t){return Yn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof Ze||Ze.prototype.finally||Z(Ze.prototype,"finally",ht("Promise").prototype.finally);Rt.Promise;var Fr=$.set,Ur=$.getterFor("AggregateError"),jr=function(t,e){var n=this;if(!(n instanceof jr))return new jr(t,e);we&&(n=we(new Error(e),Jt(n)));var r=[];return on(t,r.push,r),f?Fr(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&_(n,"message",String(e)),n};jr.prototype=ve(Error.prototype,{constructor:w(5,jr),message:w(5,""),name:w(5,"AggregateError")}),f&&b.f(jr.prototype,"errors",{get:function(){return Ur(this).errors},configurable:!0}),yt({global:!0},{AggregateError:jr}),yt({target:"Promise",stat:!0},{try:function(t){var e=tr.f(this),n=Xn(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var Vr="No one promise resolved";yt({target:"Promise",stat:!0},{any:function(t){var u=this,e=tr.f(u),c=e.resolve,h=e.reject,n=Xn(function(){var r=Ke(u.resolve),i=[],o=0,s=1,a=!1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(ht("AggregateError"))(i,Vr)))})}),--s||h(new(ht("AggregateError"))(i,Vr))});return n.error&&h(n.value),e.promise}});function qr(t,e){var n;return Gr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||Gr(n.prototype))||g(n)&&null===(n=n[Qr]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Br(p){var d=1==p,v=2==p,y=3==p,g=4==p,m=6==p,b=5==p||m;return function(t,e,n,r){for(var i,o,s=gt(t),a=At(s),u=Xe(e,n,3),c=lt(a.length),h=0,l=r||qr,f=d?l(t,c):v?l(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),p))if(d)f[h]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return h;case 2:Kr.call(f,i)}else if(g)return!1;return m?-1:y||g?g:f}}function Wr(t){throw t}function Hr(t,e){if(c(Xr,t))return Xr[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=c(e,0)?e[0]:Wr,o=c(e,1)?e[1]:void 0;return Xr[t]=!!n&&!y(function(){if(r&&!f)return 1;var t={length:-1};r?Yr(t,1,{enumerable:!0,get:Wr}):t[1]=1,n.call(t,i,o)})}var Gr=Array.isArray||function(t){return"Array"==J(t)},Qr=i("species"),Kr=[].push,zr={forEach:Br(0),map:Br(1),filter:Br(2),some:Br(3),every:Br(4),find:Br(5),findIndex:Br(6)},Yr=Object.defineProperty,Xr={},Jr=zr.find,$r="find",Zr=!0,ti=Hr($r);$r in[]&&Array(1)[$r](function(){Zr=!1}),yt({target:"Array",proto:!0,forced:Zr||!ti},{find:function(t,e){return Jr(this,t,1<arguments.length?e:void 0)}}),De($r);function ei(t,e,n){return Xe(ni,m[t].prototype[e],n)}var ni=Function.call,ri=(ei("Array","find"),zr.findIndex),ii="findIndex",oi=!0,si=Hr(ii);ii in[]&&Array(1)[ii](function(){oi=!1}),yt({target:"Array",proto:!0,forced:oi||!si},{findIndex:function(t,e){return ri(this,t,1<arguments.length?e:void 0)}}),De(ii);function ai(t,e,n){var r=o(e);r in t?b.f(t,r,w(0,n)):t[r]=n}ei("Array","findIndex");var ui=!hn(function(t){Array.from(t)});yt({target:"Array",stat:!0,forced:ui},{from:function(t,e,n){var r,i,o,s,a,u,c=gt(t),h="function"==typeof this?this:Array,l=arguments.length,f=1<l?e:void 0,p=void 0!==f,d=Je(c),v=0;if(p&&(f=Xe(f,2<l?n:void 0,2)),null==d||h==Array&&Ye(d))for(i=new h(r=lt(c.length));v<r;v++)u=p?f(c[v],v):c[v],ai(i,v,u);else for(a=(s=d.call(c)).next,i=new h;!(o=a.call(s)).done;v++)u=p?$e(s,f,[o.value,v],!0):o.value,ai(i,v,u);return i.length=v,i}});Rt.Array.from;var ci,hi,li=zr.some,fi=!!(hi=[]["some"])&&y(function(){hi.call(null,ci||function(){throw 1},1)}),pi=Hr("some");yt({target:"Array",proto:!0,forced:!fi||!pi},{some:function(t,e){return li(this,t,1<arguments.length?e:void 0)}});ei("Array","some");function di(t){return g(t)&&c(Ai,rt(t))}var vi,yi="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,gi=b.f,mi=m.Int8Array,bi=mi&&mi.prototype,wi=m.Uint8ClampedArray,_i=wi&&wi.prototype,Ei=mi&&Jt(mi),Ii=bi&&Jt(bi),Ti=Object.prototype,Si=(Ti.isPrototypeOf,i("toStringTag")),Ci=a("TYPED_ARRAY_TAG"),Ni=yi&&!!we&&"Opera"!==rt(m.opera),Ai={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(vi in Ai)m[vi]||(Ni=!1);if((!Ni||"function"!=typeof Ei||Ei===Function.prototype)&&(Ei=function(){throw TypeError("Incorrect invocation")},Ni))for(vi in Ai)m[vi]&&we(m[vi],Ei);if((!Ni||!Ii||Ii===Ti)&&(Ii=Ei.prototype,Ni))for(vi in Ai)m[vi]&&we(m[vi].prototype,Ii);if(Ni&&Jt(_i)!==Ii&&we(_i,Ii),f&&!c(Ii,Si))for(vi in gi(Ii,Si,{get:function(){return g(this)?this[Ci]:void 0}}),Ai)m[vi]&&_(m[vi],Ci,vi);function ki(){return xi.call(Fi(this))}var Oi=function(t){if(di(t))return t;throw TypeError("Target is not a typed array")},Ri=function(t,e,n){if(f){if(n)for(var r in Ai){var i=m[r];i&&c(i.prototype,t)&&delete i.prototype[t]}Ii[t]&&!n||Z(Ii,t,!n&&Ni&&bi[t]||e)}},Pi=i("iterator"),Di=m.Uint8Array,xi=Fe.values,Li=Fe.keys,Mi=Fe.entries,Fi=Oi,Ui=Ri,ji=Di&&Di.prototype[Pi],Vi=!!ji&&("values"==ji.name||null==ji.name);Ui("entries",function(){return Mi.call(Fi(this))}),Ui("keys",function(){return Li.call(Fi(this))}),Ui("values",ki,!Vi),Ui(Pi,ki,!Vi);var qi=Object.assign,Bi=Object.defineProperty,Wi=!qi||y(function(){if(f&&1!==qi({b:1},qi(Bi({},"a",{enumerable:!0,get:function(){Bi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=qi({},t)[n]||ie(qi({},e)).join("")!=r})?function(t,e){for(var n=gt(t),r=arguments.length,i=1,o=jt.f,s=Ct.f;i<r;)for(var a,u=At(arguments[i++]),c=o?ie(u).concat(o(u)):ie(u),h=c.length,l=0;l<h;)a=c[l++],f&&!s.call(u,a)||(n[a]=u[a]);return n}:qi;yt({target:"Object",stat:!0,forced:Object.assign!==Wi},{assign:Wi});Rt.Object.assign;function Hi(a){return function(t){for(var e,n=ut(t),r=ie(n),i=r.length,o=0,s=[];o<i;)e=r[o++],f&&!Gi.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}var Gi=Ct.f,Qi={entries:Hi(!0),values:Hi(!1)},Ki=Qi.entries;yt({target:"Object",stat:!0},{entries:function(t){return Ki(t)}});Rt.Object.entries;var zi=Qi.values;yt({target:"Object",stat:!0},{values:function(t){return zi(t)}});Rt.Object.values;function Yi(t){if(g(e=t)&&(void 0!==(n=e[Ji])?n:"RegExp"==J(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}function Xi(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[$i]=!1,"/./"[e](n)}catch(t){}}return!1}var Ji=i("match"),$i=i("match");yt({target:"String",proto:!0,forced:!Xi("includes")},{includes:function(t,e){return!!~String(st(this)).indexOf(Yi(t),1<arguments.length?e:void 0)}});ei("String","includes");var Zi,to=Ot.f,eo="".startsWith,no=Math.min,ro=Xi("startsWith"),io=!(ro||(!(Zi=to(String.prototype,"startsWith"))||Zi.writable));yt({target:"String",proto:!0,forced:!io&&!ro},{startsWith:function(t,e){var n=String(st(this));Yi(t);var r=lt(no(1<arguments.length?e:void 0,n.length)),i=String(t);return eo?eo.call(n,i,r):n.slice(r,r+i.length)===i}});ei("String","startsWith");yt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(st(this)),n="",r=ot(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});ei("String","repeat");function oo(t){if(g(t)){var e=t[uo];return void 0!==e?!!e:Gr(t)}}var so,ao=i("species"),uo=i("isConcatSpreadable"),co=9007199254740991,ho="Maximum allowed index exceeded",lo=51<=pr||!y(function(){var t=[];return t[uo]=!1,t.concat()[0]!==t}),fo=(so="concat",51<=pr||!y(function(){var t=[];return(t.constructor={})[ao]=function(){return{foo:1}},1!==t[so](Boolean).foo}));yt({target:"Array",proto:!0,forced:!lo||!fo},{concat:function(t){var e,n,r,i,o,s=gt(this),a=qr(s,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(oo(o=-1===e?s:arguments[e])){if(i=lt(o.length),co<u+i)throw TypeError(ho);for(n=0;n<i;n++,u++)n in o&&ai(a,u,o[n])}else{if(co<=u)throw TypeError(ho);ai(a,u++,o)}return a.length=u,a}});function po(t){var e=Rt.Symbol||(Rt.Symbol={});c(e,t)||To(e,t,{value:Io.f(t)})}function vo(t,e){var n=jo[t]=ve(Do[Ao]);return Oo(n,{type:No,tag:t,description:e}),f||(n.description=e),n}function yo(e,t){d(e);var n=ut(t),r=ie(n).concat(Xo(n));return So(r,function(t){f&&!Yo.call(n,t)||zo(e,t,n[t])}),e}function go(t,e){var n=ut(t),r=o(e,!0);if(n!==Po||!c(jo,r)||c(Vo,r)){var i=Lo(n,r);return!i||!c(jo,r)||c(n,Co)&&n[Co][r]||(i.enumerable=!0),i}}function mo(t){var e=Fo(ut(t)),n=[];return So(e,function(t){c(jo,t)||c(H,t)||n.push(t)}),n}var bo=Ut.f,wo={}.toString,_o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Eo={f:function(t){return _o&&"[object Window]"==wo.call(t)?function(t){try{return bo(t)}catch(t){return _o.slice()}}(t):bo(ut(t))}},Io={f:i},To=b.f,So=zr.forEach,Co=M("hidden"),No="Symbol",Ao="prototype",ko=i("toPrimitive"),Oo=$.set,Ro=$.getterFor(No),Po=Object[Ao],Do=m.Symbol,xo=ht("JSON","stringify"),Lo=Ot.f,Mo=b.f,Fo=Eo.f,Uo=Ct.f,jo=T("symbols"),Vo=T("op-symbols"),qo=T("string-to-symbol-registry"),Bo=T("symbol-to-string-registry"),Wo=T("wks"),Ho=m.QObject,Go=!Ho||!Ho[Ao]||!Ho[Ao].findChild,Qo=f&&y(function(){return 7!=ve(Mo({},"a",{get:function(){return Mo(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Lo(Po,e);r&&delete Po[e],Mo(t,e,n),r&&t!==Po&&Mo(Po,e,r)}:Mo,Ko=k?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Do},zo=function(t,e,n){t===Po&&zo(Vo,e,n),d(t);var r=o(e,!0);return d(n),c(jo,r)?(n.enumerable?(c(t,Co)&&t[Co][r]&&(t[Co][r]=!1),n=ve(n,{enumerable:w(0,!1)})):(c(t,Co)||Mo(t,Co,w(1,{})),t[Co][r]=!0),Qo(t,r,n)):Mo(t,r,n)},Yo=function(t){var e=o(t,!0),n=Uo.call(this,e);return!(this===Po&&c(jo,e)&&!c(Vo,e))&&(!(n||!c(this,e)||!c(jo,e)||c(this,Co)&&this[Co][e])||n)},Xo=function(t){var e=t===Po,n=Fo(e?Vo:ut(t)),r=[];return So(n,function(t){!c(jo,t)||e&&!c(Po,t)||r.push(jo[t])}),r};if(A||(Z((Do=function(t){if(this instanceof Do)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=a(e),r=function(t){this===Po&&r.call(Vo,t),c(this,Co)&&c(this[Co],n)&&(this[Co][n]=!1),Qo(this,n,w(1,t))};return f&&Go&&Qo(Po,n,{configurable:!0,set:r}),vo(n,e)})[Ao],"toString",function(){return Ro(this).tag}),Z(Do,"withoutSetter",function(t){return vo(a(t),t)}),Ct.f=Yo,b.f=zo,Ot.f=go,Ut.f=Eo.f=mo,jt.f=Xo,Io.f=function(t){return vo(i(t),t)},f&&(Mo(Do[Ao],"description",{configurable:!0,get:function(){return Ro(this).description}}),Z(Po,"propertyIsEnumerable",Yo,{unsafe:!0}))),yt({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Do}),So(ie(Wo),function(t){po(t)}),yt({target:No,stat:!0,forced:!A},{for:function(t){var e=String(t);if(c(qo,e))return qo[e];var n=Do(e);return qo[e]=n,Bo[n]=e,n},keyFor:function(t){if(!Ko(t))throw TypeError(t+" is not a symbol");if(c(Bo,t))return Bo[t]},useSetter:function(){Go=!0},useSimple:function(){Go=!1}}),yt({target:"Object",stat:!0,forced:!A,sham:!f},{create:function(t,e){return void 0===e?ve(t):yo(ve(t),e)},defineProperty:zo,defineProperties:yo,getOwnPropertyDescriptor:go}),yt({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:mo,getOwnPropertySymbols:Xo}),yt({target:"Object",stat:!0,forced:y(function(){jt.f(1)})},{getOwnPropertySymbols:function(t){return jt.f(gt(t))}}),xo){var Jo=!A||y(function(){var t=Do();return"[null]"!=xo([t])||"{}"!=xo({a:t})||"{}"!=xo(Object(t))});yt({target:"JSON",stat:!0,forced:Jo},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((g(r=e)||void 0!==t)&&!Ko(t))return Gr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ko(e))return e}),i[1]=e,xo.apply(null,i)}})}Do[Ao][ko]||_(Do[Ao],ko,Do[Ao].valueOf),le(Do,No),H[Co]=!0,po("asyncIterator");var $o=b.f,Zo=m.Symbol;if(!(!f||"function"!=typeof Zo||"description"in Zo.prototype&&void 0===Zo().description)){var ts={},es=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof es?new Zo(e):void 0===e?Zo():Zo(e);return""===e&&(ts[n]=!0),n};dt(es,Zo);var ns=es.prototype=Zo.prototype;ns.constructor=es;var rs=ns.toString,is="Symbol(test)"==String(Zo("test")),os=/^Symbol\((.*)\)[^)]+$/;$o(ns,"description",{configurable:!0,get:function(){var t=g(this)?this.valueOf():this,e=rs.call(t);if(c(ts,t))return"";var n=is?e.slice(7,-1):e.replace(os,"$1");return""===n?void 0:n}}),yt({global:!0,forced:!0},{Symbol:es})}po("hasInstance"),po("isConcatSpreadable"),po("iterator"),po("match"),po("matchAll"),po("replace"),po("search"),po("species"),po("split"),po("toPrimitive"),po("toStringTag"),po("unscopables"),le(Math,"Math",!0),le(m.JSON,"JSON",!0);Rt.Symbol;po("asyncDispose"),po("dispose"),po("observable"),po("patternMatch"),po("replaceAll");Io.f("iterator");function ss(u,t,e){function n(t){var n=i[t];Z(i,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(r&&!g(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!g(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!g(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var c=-1!==u.indexOf("Map"),r=-1!==u.indexOf("Weak"),h=c?"set":"add",l=m[u],i=l&&l.prototype,f=l,o={};if(Qt(u,"function"!=typeof l||!(r||i.forEach&&!y(function(){(new l).entries().next()}))))f=e.getConstructor(t,u,c,h),cs.REQUIRED=!0;else if(Qt(u,!0)){var s=new f,a=s[h](r?{}:-0,1)!=s,p=y(function(){s.has(1)}),d=hn(function(t){new l(t)}),v=!r&&y(function(){for(var t=new l,e=5;e--;)t[h](e,e);return!t.has(-0)});d||(((f=t(function(t,e){ze(t,f,u);var n,r,i,o,s,a=(n=new l,r=t,i=f,we&&"function"==typeof(o=r.constructor)&&o!==i&&g(s=o.prototype)&&s!==i.prototype&&we(n,s),n);return null!=e&&on(e,a[h],a,c),a})).prototype=i).constructor=f),(p||v)&&(n("delete"),n("has"),c&&n("get")),(v||a)&&n(h),r&&i.clear&&delete i.clear}return o[u]=f,yt({global:!0,forced:f!=l},o),le(f,u),r||e.setStrong(f,u,c),f}function as(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return Ke(this),(r=void 0!==u)&&Ke(u),null==t?new this:(i=[],r?(o=0,s=Xe(u,2<a?n:void 0,2),on(t,function(t){i.push(s(t,o++))})):on(t,i.push,i),new this(i))}var us=!y(function(){return Object.isExtensible(Object.preventExtensions({}))}),cs=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=b.f,r=a("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!c(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return us&&s.REQUIRED&&o(t)&&!c(t,r)&&n(t),t}};H[r]=!0}),hs=(cs.REQUIRED,cs.fastKey,cs.getWeakData,cs.onFreeze,b.f),ls=cs.fastKey,fs=$.set,ps=$.getterFor,ds={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i,o=a(t),s=u(t,e);return s?s.value=n:(o.last=s={index:i=ls(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),f?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}var s=t(function(t,e){ze(t,s,n),fs(t,{type:n,index:ve(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&on(e,t[i],t,r)}),a=ps(n),u=function(t,e){var n,r=a(t),i=ls(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Ge(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=a(this),n=u(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),f?e.size--:this.size--}return!!n},forEach:function(t,e){for(var n,r=a(this),i=Xe(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),Ge(s.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&hs(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=ps(e),o=ps(r);de(t,e,function(t,e){fs(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),Qe(e)}};ss("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},ds),Rt.Map;yt({target:"Map",stat:!0},{from:as});function vs(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}yt({target:"Map",stat:!0},{of:vs});function ys(){for(var t,e=d(this),n=Ke(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}yt({target:"Map",proto:!0,real:!0,forced:s},{deleteAll:function(){return ys.apply(this,arguments)}});function gs(t){return Map.prototype.entries.call(t)}yt({target:"Map",proto:!0,real:!0,forced:s},{every:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return!on(r,function(t,e){if(!i(e,t,n))return on.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",proto:!0,real:!0,forced:s},{filter:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=Ke(o.set);return on(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{find:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop(e)},void 0,!0,!0).result}}),yt({target:"Map",proto:!0,real:!0,forced:s},{findKey:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop(t)},void 0,!0,!0).result}}),yt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Ke(n);var i=Ke(r.has),o=Ke(r.get),s=Ke(r.set);return on(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});yt({target:"Map",proto:!0,real:!0,forced:s},{includes:function(i){return on(gs(d(this)),function(t,e){if((n=e)===(r=i)||n!=n&&r!=r)return on.stop();var n,r},void 0,!0,!0).stopped}}),yt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Ke(e);var r=Ke(n.set);return on(t,function(t){r.call(n,e(t),t)}),n}}),yt({target:"Map",proto:!0,real:!0,forced:s},{keyOf:function(n){return on(gs(d(this)),function(t,e){if(e===n)return on.stop(t)},void 0,!0,!0).result}}),yt({target:"Map",proto:!0,real:!0,forced:s},{mapKeys:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=Ke(o.set);return on(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{mapValues:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=Ke(o.set);return on(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{merge:function(t){for(var e=d(this),n=Ke(e.set),r=0;r<arguments.length;)on(arguments[r++],n,e,!0);return e}}),yt({target:"Map",proto:!0,real:!0,forced:s},{reduce:function(n,t){var r=d(this),e=gs(r),i=arguments.length<2,o=i?void 0:t;if(Ke(n),on(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{some:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",proto:!0,real:!0,forced:s},{update:function(t,e,n){var r=d(this),i=arguments.length;Ke(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):Ke(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}});function ms(t,e,n){var r,i=d(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}yt({target:"Map",proto:!0,real:!0,forced:s},{upsert:ms}),yt({target:"Map",proto:!0,real:!0,forced:s},{updateOrInsert:ms});ss("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},ds),Rt.Set;yt({target:"Set",stat:!0},{from:as}),yt({target:"Set",stat:!0},{of:vs});yt({target:"Set",proto:!0,real:!0,forced:s},{addAll:function(){return function(){for(var t=d(this),e=Ke(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{deleteAll:function(){return ys.apply(this,arguments)}});function bs(t){return Set.prototype.values.call(t)}yt({target:"Set",proto:!0,real:!0,forced:s},{every:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3);return!on(r,function(t){if(!i(t,t,n))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{difference:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e),r=Ke(n.delete);return on(t,function(t){r.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{filter:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Set"))),s=Ke(o.add);return on(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{find:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t){if(i(t,t,n))return on.stop(t)},void 0,!1,!0).result}}),yt({target:"Set",proto:!0,real:!0,forced:s},{intersection:function(t){var e=d(this),n=new(ln(e,ht("Set"))),r=Ke(e.has),i=Ke(n.add);return on(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isDisjointFrom:function(t){var e=d(this),n=Ke(e.has);return!on(t,function(t){if(!0===n.call(e,t))return on.stop()}).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isSubsetOf:function(t){var e=function(t){var e=Je(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return d(e.call(t))}(this),n=d(t),r=n.has;return"function"!=typeof r&&(n=new(ht("Set"))(t),r=Ke(n.has)),!on(e,function(t){if(!1===r.call(n,t))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isSupersetOf:function(t){var e=d(this),n=Ke(e.has);return!on(t,function(t){if(!1===n.call(e,t))return on.stop()}).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{join:function(t){var e=d(this),n=bs(e),r=void 0===t?",":String(t),i=[];return on(n,i.push,i,!1,!0),i.join(r)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{map:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Set"))),s=Ke(o.add);return on(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{reduce:function(e,t){var n=d(this),r=bs(n),i=arguments.length<2,o=i?void 0:t;if(Ke(e),on(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{some:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t){if(i(t,t,n))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e),r=Ke(n.delete),i=Ke(n.add);return on(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{union:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e);return on(t,Ke(n.add),n),n}});var ws=Math.floor;yt({target:"Number",stat:!0},{isInteger:function(t){return!g(t)&&isFinite(t)&&ws(t)===t}});Rt.Number.isInteger;var _s=function(t,e){return(_s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Es(t,e){function n(){this.constructor=t}_s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Is=function(){return(Is=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ts(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Ss(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Cs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ns(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function As(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ns(arguments[e]));return t}function ks(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Os(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Rs(t){try{return Ls.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Ps={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ds=function(t,e){if(!t)throw xs(e)},xs=function(t){return new Error("Firebase Database ("+Ps.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Ls={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Os(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Ms(t){return Fs(void 0,t)}function Fs(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Fs(t[n],e[n]));return t}var Us=(js.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},js);function js(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Vs(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qs(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vs())}function Bs(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ws(){return!0===Ps.NODE_ADMIN}var Hs,Gs=(Es(Qs,Hs=Error),Qs);function Qs(t,e){var n=Hs.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,Ks.prototype.create),n}var Ks=(zs.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(Ys,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new Gs(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},zs);function zs(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ys=/\{\$([^}]+)}/g;function Xs(t){return JSON.parse(t)}function Js(t){return JSON.stringify(t)}function $s(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Xs(Rs(o[0])||""),n=Xs(Rs(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Zs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ta(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function ea(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function na(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var ra=(ia.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ia.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},ia.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},ia.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},ia);function ia(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function oa(t,e){var n=new sa(t,e);return n.subscribe.bind(n)}var sa=(aa.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},aa.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},aa.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},aa.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"==typeof t&&null!==t)for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=ua),void 0===r.error&&(r.error=ua),void 0===r.complete&&(r.complete=ua);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},aa.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},aa.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},aa.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},aa.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},aa);function aa(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function ua(){}function ca(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function ha(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function la(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ha(t,e,r)+"must be a valid function.")}function fa(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ha(t,e,r)+"must be a valid context object.")}function pa(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var da=(va.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},va.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},va.prototype.setServiceProps=function(t){return this.serviceProps=t,this},va);function va(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ya="[DEFAULT]",ga=(ma.prototype.get=function(t){void 0===t&&(t=ya);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Us;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},ma.prototype.getImmediate=function(t){var e=Is({identifier:ya,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},ma.prototype.getComponent=function(){return this.component},ma.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(ya)}catch(t){}try{for(var r=Cs(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Ns(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},ma.prototype.clearInstance=function(t){void 0===t&&(t=ya),this.instancesDeferred.delete(t),this.instances.delete(t)},ma.prototype.delete=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},ma.prototype.isComponentSet=function(){return null!=this.component},ma.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===ya?void 0:e),this.instances.set(t,n)),n||null},ma.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ya},ma);function ma(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var ba,wa=(_a.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},_a.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},_a.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ga(t,this);return this.providers.set(t,e),e},_a.prototype.getProviders=function(){return Array.from(this.providers.values())},_a);function _a(t){this.name=t,this.providers=new Map}function Ea(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Ia,Ta,Sa=[];(Ta=Ia=Ia||{})[Ta.DEBUG=0]="DEBUG",Ta[Ta.VERBOSE=1]="VERBOSE",Ta[Ta.INFO=2]="INFO",Ta[Ta.WARN=3]="WARN",Ta[Ta.ERROR=4]="ERROR",Ta[Ta.SILENT=5]="SILENT";function Ca(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Oa[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Ea(["["+i+"]  "+t.name+":"],n))}}var Na,Aa={debug:Ia.DEBUG,verbose:Ia.VERBOSE,info:Ia.INFO,warn:Ia.WARN,error:Ia.ERROR,silent:Ia.SILENT},ka=Ia.INFO,Oa=((ba={})[Ia.DEBUG]="log",ba[Ia.VERBOSE]="log",ba[Ia.INFO]="info",ba[Ia.WARN]="warn",ba[Ia.ERROR]="error",ba),Ra=(Object.defineProperty(Pa.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ia))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!0,configurable:!0}),Pa.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Aa[t]:t},Object.defineProperty(Pa.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(Pa.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),Pa.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ia.DEBUG],t)),this._logHandler.apply(this,Ea([this,Ia.DEBUG],t))},Pa.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ia.VERBOSE],t)),this._logHandler.apply(this,Ea([this,Ia.VERBOSE],t))},Pa.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ia.INFO],t)),this._logHandler.apply(this,Ea([this,Ia.INFO],t))},Pa.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ia.WARN],t)),this._logHandler.apply(this,Ea([this,Ia.WARN],t))},Pa.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ia.ERROR],t)),this._logHandler.apply(this,Ea([this,Ia.ERROR],t))},Pa);function Pa(t){this.name=t,this._logLevel=ka,this._logHandler=Ca,this._userLogHandler=null,Sa.push(this)}function Da(e){Sa.forEach(function(t){t.setLogLevel(e)})}var xa,La=((Na={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Na["bad-app-name"]="Illegal App name: '{$appName}",Na["duplicate-app"]="Firebase App named '{$appName}' already exists",Na["app-deleted"]="Firebase App named '{$appName}' already deleted",Na["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Na["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Na),Ma=new Ks("app","Firebase",La),Fa="@firebase/app",Ua="[DEFAULT]",ja=((xa={})[Fa]="fire-core",xa["@firebase/analytics"]="fire-analytics",xa["@firebase/auth"]="fire-auth",xa["@firebase/database"]="fire-rtdb",xa["@firebase/functions"]="fire-fn",xa["@firebase/installations"]="fire-iid",xa["@firebase/messaging"]="fire-fcm",xa["@firebase/performance"]="fire-perf",xa["@firebase/remote-config"]="fire-rc",xa["@firebase/storage"]="fire-gcs",xa["@firebase/firestore"]="fire-fst",xa["fire-js"]="fire-js",xa["firebase-wrapper"]="fire-js-all",xa),Va=new Ra("@firebase/app"),qa=(Object.defineProperty(Ba.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ba.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Ba.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),Ba.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Ba.prototype._getService=function(t,e){return void 0===e&&(e=Ua),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Ba.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Ua),this.container.getProvider(t).clearInstance(e)},Ba.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Va.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Ba.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Ba.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ma.create("app-deleted",{appName:this.name_})},Ba);function Ba(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ms(t),this.container=new wa(e.name),this._addComponent(new da("app",function(){return o},"PUBLIC"));try{for(var s=Cs(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}qa.prototype.name&&qa.prototype.options||qa.prototype.delete||console.log("dc");var Wa="7.15.5";function Ha(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});if("object"!=typeof e||null===e){e={name:e}}var n=e;void 0===n.name&&(n.name=Ua);var r=n.name;if("string"!=typeof r||!r)throw Ma.create("bad-app-name",{appName:String(r)});if(Zs(c,r))throw Ma.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=ja[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Va.warn(a.join(" "))}p(new da(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:Da,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ma.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=function(t){var o=null;e&&e.level&&(o=Aa[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:Ia[e].toLowerCase(),message:i,args:n,type:t.name})}},n=0,r=Sa;n<r.length;n++){t(r[n])}}(t,e)},apps:null,SDK_VERSION:Wa,INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function f(t){if(!Zs(c,t=t||Ua))throw Ma.create("no-app",{appName:t});return c[t]}function p(n){var e,t,r=n.name;if(h.has(r))return Va.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?l[r]:null;if(h.set(r,n),"PUBLIC"===n.type){var i=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[r])throw Ma.create("invalid-app-argument",{appName:r});return t[r]()};void 0!==n.serviceProps&&Fs(i,n.serviceProps),l[r]=i,u.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])}}try{for(var o=Cs(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[r]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var Ga=function t(){var e=Ha(qa);return e.INTERNAL=Is(Is({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Fs(e,t)},createSubscribe:oa,ErrorFactory:Ks,deepExtend:Fs}),e}(),Qa=(Ka.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},Ka);function Ka(t){this.container=t}if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Va.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var za=self.firebase.SDK_VERSION;za&&0<=za.indexOf("LITE")&&Va.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ya=Ga.initializeApp;Ga.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Va.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Ya.apply(void 0,t)};var Xa,Ja,Kl=Ga;(Xa=Kl).INTERNAL.registerComponent(new da("platform-logger",function(t){return new Qa(t)},"PRIVATE")),Xa.registerVersion(Fa,"0.6.7",Ja),Xa.registerVersion("fire-js","");Kl.registerVersion("firebase","7.15.5","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var s=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=s;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function u(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var n=s.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},a.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return a.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},a.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new a(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},a.resolve=u,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(i){return new a(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())u(r.value).Oa(t,e)})},a.all=function(t){var o=c(t),s=o.next();return s.done?u([]):new a(function(n,t){function e(e){return function(t){r[e]=t,0==--i&&n(r)}}for(var r=[],i=0;r.push(void 0),i++,u(s.value).Oa(e(r.length-1),t),!(s=o.next()).done;);})},a});var u=u||{},l=this||self,f=/^[\w+/_-]+[=]{0,2}$/,p=null;function a(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==n(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r="closure_uid_"+(1e9*Math.random()>>>0),i=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function e(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function _(t,e,n){this.code=T+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new _(e.substring(T.length),t.message,t.serverResponse):null}e(_,Error),_.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},_.prototype.toJSON=function(){return this.v()};var I,T="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function R(t,e){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,e(k,Error),k.prototype.name="CustomError",e(O,k),O.prototype.name="AssertionError",P.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var L=new P(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function G(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var K,z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Y=/&/g,X=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){var ot=it.userAgent;if(ot){K=ot;break t}}K=""}function st(t){return nt(K,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ra=!0,pt.prototype.qa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={},gt=new pt(yt,"");function mt(t,e){this.a=t===Tt&&e||"",this.b=It}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===It?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function wt(t,n){var r=dt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(_t,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new mt(Tt,t)}mt.prototype.ra=!0,mt.prototype.qa=function(){return this.a.toString()},mt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _t=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={},Tt={};function St(t,e){this.a=t===Ot&&e||"",this.b=kt}function Ct(t){return t instanceof St&&t.constructor===St&&t.b===kt?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}St.prototype.ra=!0,St.prototype.qa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof St?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new St(Ot,t))}var kt={},Ot={};function Rt(){this.a="",this.b=Dt}function Pt(t){return t instanceof Rt&&t.constructor===Rt&&t.b===Dt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function xt(t){var e=new Rt;return e.a=t,e}xt("<!DOCTYPE html>");var Lt=xt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Y,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(X,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}xt("<br>"),Ut[" "]=a;var jt,Vt,qt=st("Opera"),Bt=st("Trident")||st("MSIE"),Wt=st("Edge"),Ht=Wt||Bt,Gt=st("Gecko")&&!(nt(K.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Qt=nt(K.toLowerCase(),"webkit")&&!st("Edge");function Kt(){var t=l.document;return t?t.documentMode:void 0}t:{var zt="",Yt=(Vt=K,Gt?/rv:([^\);]+)(\)|;)/.exec(Vt):Wt?/Edge\/([\d\.]+)/.exec(Vt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Qt?/WebKit\/(\S+)/.exec(Vt):qt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Yt&&(zt=Yt?Yt[1]:""),Bt){var Xt=Kt();if(null!=Xt&&Xt>parseFloat(zt)){jt=String(Xt);break t}}jt=zt}var Jt,$t={};function Zt(a){return t=a,e=function(){for(var t=0,e=z(String(jt)).split("."),n=z(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=$t,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}Jt=l.document&&Bt?Kt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Bt||9<=Number(Jt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!te&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ft(s.name),'"'),s.type){o.push(' type="',Ft(s.type),'"');var a={};lt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ae(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ne(o,s)),2<r.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!h(o)||v(o)&&0<o.nodeType?r(o):U(ue(o)?Q(o):o,r)}}(i,o,r),o}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}}function ce(t){l.setTimeout(function(){throw t},0)}function he(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")&&(t=function(){var t,e,n=ae(document,"IFRAME");n.style.display="none",t=n,e=new mt(Tt,dt(gt)),ft(t,"HTMLIFrameElement"),t.src=bt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Pt(Lt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=m(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}function le(t,e){ie||function(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);ie=function(){t.then(de)}}else ie=function(){var t=de;!d(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||he())(t):l.setImmediate(t)}}(),fe||(ie(),fe=!0),pe.add(t,e)}var fe=!1,pe=new x;function de(){for(var t;n=e=void 0,n=null,(e=pe).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ce(t)}D(L,t)}var e,n;fe=!1}function ve(t,e){if(this.a=ye,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Ae(n,ge,t)},function(t){if(!(t instanceof Le))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ae(n,me,t)})}catch(t){Ae(this,me,t)}}var ye=0,ge=2,me=3;function be(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}be.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var we=new P(function(){return new be},function(t){t.reset()});function _e(t,e,n){var r=we.get();return r.g=t,r.b=e,r.f=n,r}function Ee(t){if(t instanceof ve)return t;var e=new ve(a);return Ae(e,ge,t),e}function Ie(n){return new ve(function(t,e){e(n)})}function Te(t,e,n){ke(t,e,n,null)||le(b(e,t))}function Se(n){return new ve(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Te(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Ce(t,e){t.b||t.a!=ge&&t.a!=me||Oe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,i,o,s){var e=_e(null,null,null);return e.a=new ve(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Le?r(t):n(e)}catch(t){r(t)}}:r}),Ce(e.a.c=t,e),e.a}function Ae(t,e,n){var r,i;t.a==ye&&(t===n&&(e=me,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ke(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Oe(t),e!=me||n instanceof Le||(i=n,(r=t).g=!0,le(function(){r.g&&xe.call(null,i)}))))}function ke(t,e,n,r){if(t instanceof ve)return Ce(t,_e(e||a,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Oe(t){t.h||(t.h=!0,le(t.ec,t))}function Re(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Pe(t,e,n,r){if(n==me&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,De(e,n,r);else try{e.c?e.g.call(e.f):De(e,n,r)}catch(t){xe.call(null,t)}D(we,e)}function De(t,e,n){e==ge?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ve.prototype.then=function(t,e,n){return Ne(this,d(t)?t:null,d(e)?e:null,n)},ve.prototype.$goog_Thenable=!0,(t=ve.prototype).ma=function(t,e){return(t=_e(t,t,e)).c=!0,Ce(this,t),this},t.o=function(t,e){return Ne(this,null,t,e)},t.cancel=function(t){if(this.a==ye){var e=new Le(t);le(function(){!function t(e,n){if(e.a==ye)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ye&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Re(r),Pe(r,o,me,n)))}e.c=null}else Ae(e,me,n)}(this,e)},this)}},t.Yc=function(t){this.a=ye,Ae(this,ge,t)},t.Zc=function(t){this.a=ye,Ae(this,me,t)},t.ec=function(){for(var t;t=Re(this);)Pe(this,t,this.a,this.i);this.h=!1};var xe=ce;function Le(t){k.call(this,t)}function Me(){this.wa=this.wa,this.na=this.na}e(Le,k);var Fe=0;function Ue(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=Fe))e=t,Object.prototype.hasOwnProperty.call(e,r)&&e[r]||(e[r]=++i);var e}Me.prototype.wa=!(Le.prototype.name="cancel"),Me.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var je=Object.freeze||function(t){return t},Ve=!Bt||9<=Number(Jt),qe=Bt&&!Zt("9"),Be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",a,e),l.removeEventListener("test",a,e)}catch(t){}return t}();function We(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function He(t,e){if(We.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ge[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}We.prototype.preventDefault=function(){this.defaultPrevented=!0},e(He,We);var Ge=je({2:"touch",3:"pen",4:"mouse"});He.prototype.preventDefault=function(){He.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,qe)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},He.prototype.f=function(){return this.a};var Qe="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ke,this.ua=this.Na=!1}function Ye(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Xe(t){this.src=t,this.a={},this.b=0}function Je(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ye(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function $e(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Xe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$e(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new ze(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var Ze="closure_lm_"+(1e6*Math.random()|0),tn={};function en(t,e,n,r,i){if(r&&r.once)rn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=pn(n),t&&t[Qe]?vn(t,e,n,v(r)?!!r.capture:!!r,i):nn(t,e,n,!1,r,i)}function nn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=v(i)?!!i.capture:!!i,c=ln(t);if(c||(t[Ze]=c=new Xe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=hn,r=a=Ve?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Be||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(an(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function rn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rn(t,e[o],n,r,i);else n=pn(n),t&&t[Qe]?yn(t,e,n,v(r)?!!r.capture:!!r,i):nn(t,e,n,!0,r,i)}function on(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=pn(n),t&&t[Qe]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=$e(o=t.a[e],n,r,i))&&(Ye(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&ln(t))&&(e=t.a[e.toString()],t=-1,e&&(t=$e(e,n,r,i)),(n=-1<t?e[t]:null)&&sn(n))}function sn(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Qe])Je(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(an(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ln(e))?(Je(n,t),0==n.b&&(n.src=null,e[Ze]=null)):Ye(t)}}}function an(t){return t in tn?tn[t]:tn[t]="on"+t}function un(t,e,n,r){var i=!0;if((t=ln(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=cn(o,r),i=i&&!1!==o)}return i}function cn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&sn(t),n.call(r,e)}function hn(t,e){if(t.ua)return!0;if(Ve)return cn(t,new He(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new He(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=un(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=un(r[i],t,!1,e),n=n&&o}return n}function ln(t){return(t=t[Ze])instanceof Xe?t:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(e){return d(e)?e:(e[fn]||(e[fn]=function(t){return e.handleEvent(t)}),e[fn])}function dn(){Me.call(this),this.u=new Xe(this),(this.Yb=this).eb=null}function vn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function yn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function gn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&Je(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function mn(t,e,n){if(d(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function bn(n){var r=null;return new ve(function(t,e){-1==(r=mn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function wn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function _n(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(h(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function En(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof En)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function In(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Tn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Tn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Tn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(dn,Me),dn.prototype[Qe]=!0,dn.prototype.addEventListener=function(t,e,n,r){en(this,t,e,n,r)},dn.prototype.removeEventListener=function(t,e,n,r){on(this,t,e,n,r)},dn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new We(t,n);else if(t instanceof We)t.target=t.target||n;else{var i=t;lt(t=new We(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=gn(s,r,!0,t)&&i}if(i=gn(s=t.b=n,r,!0,t)&&i,i=gn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=gn(s=t.b=e[o],r,!1,t)&&i;return i},dn.prototype.Ba=function(){if(dn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ye(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=En.prototype).V=function(){In(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return In(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Tn(this.b,t)?this.b[t]:e},t.set=function(t,e){Tn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Sn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Cn?(this.h=void 0!==e?e:t.h,Nn(this,t.f),this.i=t.i,this.b=t.b,An(this,t.l),this.c=t.c,kn(this,zn(t.a)),this.g=t.g):t&&(n=String(t).match(Sn))?(this.h=!!e,Nn(this,n[1]||"",!0),this.i=xn(n[2]||""),this.b=xn(n[3]||"",!0),An(this,n[4]),this.c=xn(n[5]||"",!0),kn(this,n[6]||"",!0),this.g=xn(n[7]||"")):(this.h=!!e,this.a=new Bn(null,this.h))}function Nn(t,e,n){t.f=n?xn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function An(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function kn(t,e,n){var r,i;e instanceof Bn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Wn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Gn(this,e),Kn(this,n,t))},r)),r.f=i):(n||(e=Ln(e,Vn)),t.a=new Bn(e,t.h))}function On(t,e,n){t.a.set(e,n)}function Rn(t,e){return t.a.get(e)}function Pn(t){return t instanceof Cn?new Cn(t):new Cn(t,void 0)}function Dn(t,e){var n=new Cn(null,void 0);return Nn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function xn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Mn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Mn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ln(e,Fn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Ln(e,Fn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ln(n,"/"==n.charAt(0)?jn:Un,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Ln(n,qn)),t.join("")},Cn.prototype.resolve=function(t){var e=new Cn(this),n=!!t.f;n?Nn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)An(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(nt(i,"./")||nt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?kn(e,zn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Fn=/[#\/\?@]/g,Un=/[#\?:]/g,jn=/[#\?]/g,Vn=/[#\?@]/g,qn=/#/g;function Bn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Wn(n){n.a||(n.a=new En,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Hn(t){var e=_n(t);if(void 0===e)throw Error("Keys are undefined");var n=new Bn(null,void 0);t=wn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Kn(n,i,o):n.add(i,o)}return n}function Gn(t,e){Wn(t),e=Yn(t,e),Tn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Tn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&In(t)))}function Qn(t,e){return Wn(t),e=Yn(t,e),Tn(t.a.b,e)}function Kn(t,e,n){Gn(t,e),0<n.length&&(t.c=null,t.a.set(Yn(t,e),Q(n)),t.b+=n.length)}function zn(t){var e=new Bn;return e.c=t.c,t.a&&(e.a=new En(t.a),e.b=t.b),e}function Yn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Xn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),tr(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":tr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Jn,t,e),e.join("")}function Jn(){}(t=Bn.prototype).add=function(t,e){Wn(this),this.c=null,t=Yn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Wn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Wn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Wn(this);var e=[];if("string"==typeof t)Qn(this,t)&&(e=G(e,this.a.get(Yn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Wn(this),this.c=null,Qn(this,t=Yn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var $n={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Zn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function tr(t,e){e.push('"',t.replace(Zn,function(t){var e=$n[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),$n[t]=e),e}),'"')}function er(){var t=wr();return Bt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function nr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function rr(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(At(t))),e.location.href=n}function ir(t){return!!((t=(t||wr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function or(t){t=t||l.window;try{t.close()}catch(t){}}function sr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=wr().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),gr(wr())==vr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=ae(document,"A"),"HTMLAnchorElement"),e instanceof St||e instanceof St||(e="object"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e="about:invalid#zClosurez"),e=new St(Ot,e)),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Ct(e),s&&(Ht&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),r=s.document)&&(r.write(Pt(t)),r.close())):(s=r.open(Ct(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ur=/^[^@]+@[^@]+$/;function cr(){var e=null;return new ve(function(t){"complete"==l.document.readyState?t():(e=function(){t()},rn(window,"load",e))}).o(function(t){throw on(window,"load",e),t})}function hr(t){return t=t||wr(),!("file:"!==Sr()&&"ionic:"!==Sr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function fr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function pr(){return Kl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Kl.INTERNAL.hasOwnProperty("node")?"Node":fr()?"Worker":"Browser"}function dr(){var t=pr();return"ReactNative"===t||"Node"===t}var vr="Firefox",yr="Chrome";function gr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?vr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":yr:"Safari"}var mr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function br(t,e){e=e||[];var n,r=[],i={};for(n in mr)i[mr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=pr())?r=gr(i=wr()):"Worker"===r&&(r=gr(i=wr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function wr(){return l.navigator&&l.navigator.userAgent||""}function _r(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Er(){try{var t=l.localStorage,e=Or();if(t)return t.setItem(e,"1"),t.removeItem(e),!er()||!!l.indexedDB}catch(t){return fr()&&!!l.indexedDB}return!1}function Ir(){return(Tr()||"chrome-extension:"===Sr()||hr())&&!dr()&&Er()&&!fr()}function Tr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){return l.location&&l.location.protocol||null}function Cr(t){return!ir(t=t||wr())&&gr(t)!=vr}function Nr(t){return void 0===t?null:Xn(t)}function Ar(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function kr(t){if(null!==t)return JSON.parse(t)}function Or(t){return t||Math.floor(1e9*Math.random()).toString()}function Rr(t){return"Safari"!=gr(t=t||wr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Pr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Dr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=wr(),e=pr(),this.b=ir(t)||"ReactNative"===e}function xr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Lr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Mr(){return _r("fireauth.oauthhelper",l)||_r("fireauth.iframe",l)}Dr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Tr()&&"chrome-extension:"!==Sr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Fr,Ur={};function jr(t){Ur[t]||(Ur[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Vr={};Object.defineProperty(Vr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Vr,"abcd",{configurable:!0,enumerable:!0,value:2}),Fr=2==Vr.abcd}catch(t){Fr=!1}function qr(t,e,n){Fr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Br(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&qr(t,n,e[n])}function Wr(t){var e={};return Br(e,t),e}function Hr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)qr(e,n,Hr(t[n]));return e}function Gr(t){var e=t&&(t[Xr]?"phone":null);if(!(e&&t&&t[Yr]))throw new _("internal-error","Internal assert: invalid MultiFactorInfo object");qr(this,"uid",t[Yr]),qr(this,"displayName",t[Kr]||null);var n=null;t[zr]&&(n=new Date(t[zr]).toUTCString()),qr(this,"enrollmentTime",n),qr(this,"factorId",e)}function Qr(t){try{var e=new Jr(t)}catch(t){e=null}return e}Gr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Kr="displayName",zr="enrolledAt",Yr="mfaEnrollmentId",Xr="phoneInfo";function Jr(t){Gr.call(this,t),qr(this,"phoneNumber",t[Xr])}function $r(t){var e={},n=t[ni],r=t[ii],i=t[oi];if(t=Qr(t[ri]),!i||i!=ti&&i!=ei&&!n||i==ei&&!r||i==Zr&&!t)throw Error("Invalid checkActionCode response!");i==ei?(e[ai]=n||null,e[ci]=n||null,e[si]=r):(e[ai]=r||null,e[ci]=r||null,e[si]=n||null),e[ui]=t||null,qr(this,li,i),qr(this,hi,Hr(e))}e(Jr,Gr),Jr.prototype.v=function(){var t=Jr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Zr="REVERT_SECOND_FACTOR_ADDITION",ti="EMAIL_SIGNIN",ei="VERIFY_AND_CHANGE_EMAIL",ni="email",ri="mfaInfo",ii="newEmail",oi="requestType",si="email",ai="fromEmail",ui="multiFactorInfo",ci="previousEmail",hi="data",li="operation";function fi(t){var e=Rn(t=Pn(t),pi)||null,n=Rn(t,di)||null,r=Rn(t,gi)||null;if(r=r&&bi[r]||null,!e||!n||!r)throw new _("argument-error",pi+", "+di+"and "+gi+" are required in a valid action code URL.");Br(this,{apiKey:e,operation:r,code:n,continueUrl:Rn(t,vi)||null,languageCode:Rn(t,yi)||null,tenantId:Rn(t,mi)||null})}var pi="apiKey",di="oobCode",vi="continueUrl",yi="languageCode",gi="mode",mi="tenantId",bi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Zr,signIn:ti,verifyAndChangeEmail:ei,verifyEmail:"VERIFY_EMAIL"};function wi(t){try{return new fi(t)}catch(t){return null}}function _i(t){var e=t[Ci];if(void 0===e)throw new _("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new _("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ei];if(n&&"object"==typeof n){e=n[ki];var r=n[Ni];if(n=n[Ai],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new _("argument-error",Ni+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new _("argument-error",Ai+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new _("argument-error",ki+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new _("missing-android-pkg-name")}}else if(void 0!==n)throw new _("argument-error",Ei+" property must be a non null object when specified.");if(this.f=null,(e=t[Si])&&"object"==typeof e){if("string"==typeof(e=e[Oi])&&e.length)this.f=e;else if(void 0!==e)throw new _("argument-error",Oi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new _("argument-error",Si+" property must be a non null object when specified.");if(void 0!==(e=t[Ti])&&"boolean"!=typeof e)throw new _("argument-error",Ti+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ii])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new _("argument-error",Ii+" property must be a non empty string when specified.");this.i=t||null}var Ei="android",Ii="dynamicLinkDomain",Ti="handleCodeInApp",Si="iOS",Ci="url",Ni="installApp",Ai="minimumVersion",ki="packageName",Oi="bundleId";function Ri(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Pi=null;function Di(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Pi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Pi){Pi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Pi[o]&&(Pi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function xi(t){var e=Mi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Li(t){try{return new xi(t)}catch(t){return null}}function Mi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Di(t))}catch(t){}return null}xi.prototype.S=function(){return this.f},xi.prototype.i=function(){return this.b},xi.prototype.toString=function(){return this.g};var Fi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ui=["client_id","response_type","scope","redirect_uri","state"],ji={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Ui},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Ui},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Ui},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Fi},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function Vi(t){for(var e in ji)if(ji[e].ea==t)return ji[e];return null}function qi(t){var e={};e["facebook.com"]=Qi,e["google.com"]=zi,e["github.com"]=Ki,e["twitter.com"]=Yi;var n=t&&t[Wi];try{if(n)return e[n]?new e[n](t):new Gi(t);if(void 0!==t[Bi])return new Hi(t)}catch(t){}return null}var Bi="idToken",Wi="providerId";function Hi(t){var e=t[Wi];if(!e&&t[Bi]){var n=Li(t[Bi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),qr(this,"providerId",e),qr(this,"isNewUser",n)}function Gi(t){Hi.call(this,t),qr(this,"profile",Hr((t=kr(t.rawUserInfo||"{}"))||{}))}function Qi(t){if(Gi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Gi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",this.profile&&this.profile.login||null)}function zi(t){if(Gi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(t){if(Gi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",t.screenName||null)}function Xi(t){var e=Pn(t),n=Rn(e,"link"),r=Rn(Pn(n),"link");return e=Rn(e,"deep_link_id"),Rn(Pn(e),"link")||e||r||n||t}function Ji(t,e){if(!t&&!e)throw new _("internal-error","Internal assert: no raw session string available");if(t&&e)throw new _("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?$i:Zi}e(Gi,Hi),e(Qi,Gi),e(Ki,Gi),e(zi,Gi),e(Yi,Gi);var $i="enroll",Zi="signin";function to(){}function eo(t,n){return t.then(function(t){if(t[Hs]){var e=Li(t[Hs]);if(!e||n!=e.h)throw new _("user-mismatch");return t}throw new _("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==T+"user-not-found"?new _("user-mismatch"):t})}function no(t,e){if(!e)throw new _("internal-error","failed to construct a credential");this.a=e,qr(this,"providerId",t),qr(this,"signInMethod",t)}function ro(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function io(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new no(t.providerId,t.pendingToken)}catch(t){}return null}function oo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&qr(this,"idToken",e.idToken),e.accessToken&&qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new _("internal-error","failed to construct a credential");qr(this,"accessToken",e.oauthToken),qr(this,"secret",e.oauthTokenSecret)}qr(this,"providerId",t),qr(this,"signInMethod",n)}function so(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Hn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function ao(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new oo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function uo(t,e){this.Oc=e||[],Br(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Vi(t)||{}).Ha||null,this.kb=null}function co(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new _("argument-error",'SAML provider IDs must be prefixed with "saml."');uo.call(this,t,[])}function ho(t){uo.call(this,t,Ui),this.a=[]}function lo(){ho.call(this,"facebook.com")}function fo(t){if(!t)throw new _("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new lo).credential({accessToken:e})}function po(){ho.call(this,"github.com")}function vo(t){if(!t)throw new _("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new po).credential({accessToken:e})}function yo(){ho.call(this,"google.com"),this.Aa("profile")}function go(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new yo).credential({idToken:n,accessToken:e})}function mo(){uo.call(this,"twitter.com",Fi)}function bo(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new _("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new oo("twitter.com",n,"twitter.com")}function wo(t,e,n){this.a=t,this.f=e,qr(this,"providerId","password"),qr(this,"signInMethod",n===Eo.EMAIL_LINK_SIGN_IN_METHOD?Eo.EMAIL_LINK_SIGN_IN_METHOD:Eo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new wo(t.email,t.password,t.signInMethod):null}function Eo(){Br(this,{providerId:"password",isOAuthProvider:!1})}function Io(t,e){if(!(e=To(e)))throw new _("argument-error","Invalid email link!");return new wo(t,e.code,Eo.EMAIL_LINK_SIGN_IN_METHOD)}function To(t){return(t=wi(t=Xi(t)))&&t.operation===ti?t:null}function So(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new _("internal-error");this.a=t,qr(this,"providerId","phone"),this.ea="phone",qr(this,"signInMethod","phone")}function Co(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new So(n)}return null}function No(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Ao(t){try{this.a=t||Kl.auth()}catch(t){throw new _("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Br(this,{providerId:"phone",isOAuthProvider:!1})}function ko(t,e){if(!t)throw new _("missing-verification-id");if(!e)throw new _("missing-verification-code");return new So({bb:t,ab:e})}function Oo(t){if(t.temporaryProof&&t.phoneNumber)return new So({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return go(o,n);case"facebook.com":return fo(n);case"github.com":return vo(n);case"twitter.com":return bo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new no(e,s):new oo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ho(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ro(t){if(!t.isOAuthProvider)throw new _("invalid-oauth-provider")}function Po(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new _("invalid-auth-event");if(this.g&&this.a)throw new _("invalid-auth-event");if(this.g&&!this.f)throw new _("invalid-auth-event")}function Do(t){return(t=t||{}).type?new Po(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function xo(){this.b=null,this.a=[]}Ji.prototype.Fa=function(){return this.a?Ee(this.a):Ee(this.b)},Ji.prototype.v=function(){return this.type==$i?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},to.prototype.ia=function(){},to.prototype.b=function(){},to.prototype.c=function(){},to.prototype.v=function(){},no.prototype.ia=function(t){return ha(t,ro(this))},no.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,la(t,n)},no.prototype.c=function(t,e){return eo(fa(t,ro(this)),e)},no.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},oo.prototype.ia=function(t){return ha(t,so(this))},oo.prototype.b=function(t,e){var n=so(this);return n.idToken=e,la(t,n)},oo.prototype.c=function(t,e){return eo(fa(t,so(this)),e)},oo.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},uo.prototype.Ia=function(t){return this.Fb=ct(t),this},e(co,uo),e(ho,uo),ho.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},ho.prototype.Nb=function(){return Q(this.a)},ho.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new _("argument-error","credential failed: must provide the ID token and/or the access token.");return new oo(this.providerId,n,this.providerId)},e(lo,ho),qr(lo,"PROVIDER_ID","facebook.com"),qr(lo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(po,ho),qr(po,"PROVIDER_ID","github.com"),qr(po,"GITHUB_SIGN_IN_METHOD","github.com"),e(yo,ho),qr(yo,"PROVIDER_ID","google.com"),qr(yo,"GOOGLE_SIGN_IN_METHOD","google.com"),e(mo,uo),qr(mo,"PROVIDER_ID","twitter.com"),qr(mo,"TWITTER_SIGN_IN_METHOD","twitter.com"),wo.prototype.ia=function(t){return this.signInMethod==Eo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,wa,{email:this.a,oobCode:this.f}):Ka(t,Ba,{email:this.a,password:this.f})},wo.prototype.b=function(t,e){return this.signInMethod==Eo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,_a,{idToken:e,email:this.a,oobCode:this.f}):Ka(t,xa,{idToken:e,email:this.a,password:this.f})},wo.prototype.c=function(t,e){return eo(this.ia(t),e)},wo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Br(Eo,{PROVIDER_ID:"password"}),Br(Eo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Br(Eo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),So.prototype.ia=function(t){return t.cb(No(this))},So.prototype.b=function(t,e){var n=No(this);return n.idToken=e,Ka(t,Ha,n)},So.prototype.c=function(t,e){var n=No(this);return n.operation="REAUTH",eo(t=Ka(t,Ga,n),e)},So.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Ao.prototype.cb=function(i,n){var o=this.a.b;return Ee(n.verify()).then(function(r){if("string"!=typeof r)throw new _("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":var t=v(i)?i.session:null,e=v(i)?i.phoneNumber:i;return(t&&t.type==$i?t.Fa().then(function(t){return Ka(o,Ma,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Zi?t.Fa().then(function(t){return e=o,n={mfaPendingCredential:t,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},Ka(e,Fa,n).then(function(t){return t.phoneResponseInfo.sessionInfo});var e,n}):Ka(o,Pa,{phoneNumber:e,recaptchaToken:r})).then(function(t){return"function"==typeof n.reset&&n.reset(),t},function(t){throw"function"==typeof n.reset&&n.reset(),t});default:throw new _("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Br(Ao,{PROVIDER_ID:"phone"}),Br(Ao,{PHONE_SIGN_IN_METHOD:"phone"}),Po.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Po.prototype.S=function(){return this.h},Po.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Lo,Mo=null;function Fo(t){var e="unauthorized-domain",n=void 0,r=Pn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",_.call(this,e,n)}function Uo(t,e,n){_.call(this,t,n),(t=e||{}).Gb&&qr(this,"email",t.Gb),t.da&&qr(this,"phoneNumber",t.da),t.credential&&qr(this,"credential",t.credential),t.Wb&&qr(this,"tenantId",t.Wb)}function jo(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:Oo(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new _(e,t.message||void 0);return new Uo(e,n,t.message)}return null}function Vo(){}function qo(t){return t.c||(t.c=t.b())}function Bo(){}function Wo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Ho(){}function Go(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ko(t,e,n){this.reset(t,e,n,void 0,void 0)}function zo(t){this.f=t,this.b=this.c=this.a=null}function Yo(t,e){this.name=t,this.value=e}e(Fo,_),e(Uo,_),Uo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&lt(t,e),t},Uo.prototype.toJSON=function(){return this.v()},Vo.prototype.c=null,e(Bo,Vo),Bo.prototype.a=function(){var t=Wo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Bo.prototype.b=function(){var t={};return Wo(this)&&(t[0]=!0,t[1]=!0),t},Lo=new Bo,e(Ho,Vo),Ho.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Go;throw Error("Unsupported browser")},Ho.prototype.b=function(){return{}},(t=Go.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Qo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Qo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Qo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ko.prototype.a=null,Ko.prototype.reset=function(t,e,n,r,i){delete this.a},Yo.prototype.toString=function(){return this.name};var Xo=new Yo("SEVERE",1e3),Jo=new Yo("WARNING",900),$o=new Yo("CONFIG",700),Zo=new Yo("FINE",500);zo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Ko(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ts,es={},ns=null;function rs(t){var e;if(ns||(ns=new zo(""),(es[""]=ns).c=$o),!(e=es[t])){e=new zo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=rs(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,es[t]=e}return e}function is(t,e){t&&t.log(Zo,e,void 0)}function os(t){this.f=t}function ss(t){dn.call(this),this.s=t,this.readyState=as,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=rs("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}e(os,Vo),os.prototype.a=function(){return new ss(this.f)},os.prototype.b=(ts={},function(){return ts}),e(ss,dn);var as=0;function us(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function cs(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,hs(t)}function hs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ls(t){dn.call(this),this.headers=new En,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=fs,this.w=this.R=!1}(t=ss.prototype).open=function(t,e){if(this.readyState!=as)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,hs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,cs(this,!1)),this.readyState=as},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,hs(this)),this.a&&(this.readyState=3,hs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,us(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?cs(this,!0):hs(this),3==this.readyState&&us(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,cs(this,!0))},t.qc=function(t){this.a&&(this.response=t,cs(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Jo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&cs(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Jo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Jo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(ls,dn);var fs="";ls.prototype.b=rs("goog.net.XhrIo");var ps=/^https?$/i,ds=["POST","PUT"];function vs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():Lo.a(),e.B=e.D?qo(e.D):qo(Lo),e.a.onreadystatechange=m(e.Sb,e);try{is(e.b,Ts(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return is(e.b,Ts(e,"Error opening Xhr: "+t.message)),void gs(e,t)}t=r||"";var o,s=new En(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)U(t,e,void 0);else for(var n=_n(t),r=wn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ys,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=l.FormData&&t instanceof l.FormData,!B(ds,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{_s(e),0<e.g&&(e.w=(o=e.a,Bt&&Zt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),is(e.b,Ts(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ka,e)):e.s=mn(e.Ka,e.g,e)),is(e.b,Ts(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){is(e.b,Ts(e,"Send error: "+t.message)),gs(e,t)}}function ys(t){return"content-type"==t.toLowerCase()}function gs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ms(t),ws(t)}function ms(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function bs(e){if(e.c&&void 0!==u)if(e.B[1]&&4==Es(e)&&2==Is(e))is(e.b,Ts(e,"Local request error detected and ignored"));else if(e.i&&4==Es(e))mn(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==Es(e)){is(e.b,Ts(e,"Request complete")),e.c=!1;try{var t,n=Is(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Sn)[1]||null;if(!o&&l.self&&l.self.location){var s=l.self.location.protocol;o=s.substr(0,s.length-1)}i=!ps.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<Es(e)?e.a.statusText:""}catch(t){is(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Is(e)+"]",ms(e)}}finally{ws(e)}}}function ws(e,t){if(e.a){_s(e);var n=e.a,r=e.B[0]?a:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Xo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function _s(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function Es(t){return t.a?t.a.readyState:0}function Is(t){try{return 2<Es(t)?t.a.status:-1}catch(t){return-1}}function Ts(t,e){return e+" ["+t.P+" "+t.l+" "+Is(t)+"]"}function Ss(t){var e=Ms;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Cs(t,e,n){t.a=!0,t.c=n,t.f=!e,Os(t)}function Ns(t){if(t.a){if(!t.u)throw new Rs;t.u=!1}}function As(t,e,n,r){t.g.push([e,n,r]),t.a&&Os(t)}function ks(t){return q(t.g,function(t){return d(t[1])})}function Os(e){if(e.h&&e.a&&ks(e)){var n=e.h,r=xs[n];r&&(l.clearTimeout(r.a),delete xs[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var a=o.call(i||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,ks(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Ss?(As(n,a,t),n.B=!0):n.then(a,t)),r&&(n=new Ds(n),xs[n.a]=n,e.h=n.a)}function Rs(){k.call(this)}function Ps(){k.call(this)}function Ds(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=ls.prototype).Ka=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",is(this.b,Ts(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(is(this.b,Ts(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ws(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ws(this,!0)),ls.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?bs(this):this.Hc())},t.Hc=function(){bs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case fs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Xo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return is(this.b,"Can not get response: "+t.message),null}},Ss.prototype.cancel=function(t){if(this.a)this.c instanceof Ss&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ps,Ns(this),Cs(this,!1,t))}},Ss.prototype.m=function(t,e){this.i=!1,Cs(this,t,e)},Ss.prototype.then=function(t,e,n){var r,i,o=new ve(function(t,e){r=t,i=e});return As(this,r,function(t){t instanceof Ps?o.cancel():i(t)}),o.then(t,e,n)},Ss.prototype.$goog_Thenable=!0,e(Rs,k),Rs.prototype.message="Deferred has already fired",Rs.prototype.name="AlreadyCalledError",e(Ps,k),Ps.prototype.message="Deferred was canceled",Ps.prototype.name="CanceledError",Ds.prototype.c=function(){throw delete xs[this.a],this.b};var xs={};function Ls(t){var e,n,r,i,o,s=document,a=bt(t).toString(),u=ae(document,"SCRIPT"),c={Tb:u,Ka:void 0},h=new Ss(c);return e=window.setTimeout(function(){Fs(u,!0);var t=new Vs(js,"Timeout reached for loading script "+a);Ns(h),Cs(h,!1,t)},5e3),c.Ka=e,u.onload=u.onreadystatechange=function(){u.readyState&&"loaded"!=u.readyState&&"complete"!=u.readyState||(Fs(u,!1,e),Ns(h),Cs(h,!0,null))},u.onerror=function(){Fs(u,!0,e);var t=new Vs(Us,"Error while loading script "+a);Ns(h),Cs(h,!1,t)},lt(c={},{type:"text/javascript",charset:"UTF-8"}),ne(u,c),r=t,ft(n=u,"HTMLScriptElement"),n.src=bt(r),null===p&&(p=(r=(r=l.document).querySelector&&r.querySelector("script[nonce]"))&&(r=r.nonce||r.getAttribute("nonce"))&&f.test(r)?r:""),(r=p)&&n.setAttribute("nonce",r),((o=((i=s)||document).getElementsByTagName("HEAD"))&&0!=o.length?o[0]:i.documentElement).appendChild(u),h}function Ms(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Fs(t,!0,this.Ka)}}function Fs(t,e,n){null!=n&&l.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Us=0,js=1;function Vs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function qs(t){this.f=t}function Bs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Gs,this.g=ct(t.secureTokenHeaders||Qs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Ks,this.a=ct(t.firebaseHeaders||zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==pr(),!(n=l.XMLHttpRequest||n&&Kl.INTERNAL.node&&Kl.INTERNAL.node.XMLHttpRequest)&&!fr())throw new _("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,fr()?this.f=new os(self):dr()?this.f=new qs(n):this.f=new Ho,this.b=null}e(Vs,k),e(qs,Vo),qs.prototype.a=function(){return new this.f},qs.prototype.b=function(){return{}};var Ws,Hs="idToken",Gs=new Dr(3e4,6e4),Qs={"Content-Type":"application/x-www-form-urlencoded"},Ks=new Dr(3e4,6e4),zs={"Content-Type":"application/json"};function Ys(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Js(t,e,n,r,i,o,s){var a;(t=!((a=gr(a=wr())==yr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&Jt&&!(9<Jt))||fr()?m(t.w,t):(Ws=Ws||new ve(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{l[Zs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){As(t,null,e,void 0)}(Ls(wt($s,{onload:Zs})),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)}),m(t.s,t)))(e,n,r,i,o,s)}Bs.prototype.S=function(){return this.b},Bs.prototype.w=function(t,n,e,r,i,o){if(fr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new _("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ls(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout(function(){s.dispatchEvent("timeout")},o)}vn(s,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return is(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),yn(s,"ready",function(){a&&clearTimeout(a),Ue(this)}),yn(s,"timeout",function(){a&&clearTimeout(a),Ue(this),n&&n(null)}),vs(s,t,e,r,i)};var $s=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Zs="__fcb"+Math.floor(1e6*Math.random()).toString();function ta(t,e,n,r,i,o,s){var a=Pn(e+n);On(a,"key",t.c),s&&On(a,"cb",w().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&On(a,c,i[c]);return new ve(function(e,n){Js(t,a.toString(),function(t){t?t.error?n(Ya(t,o||{})):e(t):n(new _("network-request-failed"))},r,u?void 0:Xn(Ar(i)),t.a,t.i.get())})}function ea(t){if("string"!=typeof(t=t.email)||!ur.test(t))throw new _("invalid-email")}function na(t){"email"in t&&ea(t)}function ra(t){if(!t[Hs]){if(t.mfaPendingCredential)throw new _("multi-factor-auth-required",null,ct(t));throw new _("internal-error")}}function ia(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new _("internal-error")}else{if(!t.sessionInfo)throw new _("missing-verification-id");if(!t.code)throw new _("missing-verification-code")}}Bs.prototype.s=function(t,n,r,i,o){var s=this;Ws.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Bs.prototype.vb=function(){return Ka(this,La,{})},Bs.prototype.xb=function(t,e){return Ka(this,Da,{idToken:t,email:e})},Bs.prototype.yb=function(t,e){return Ka(this,xa,{idToken:t,password:e})};var oa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function sa(t){if(!t.phoneVerificationInfo)throw new _("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new _("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new _("missing-verification-code")}function aa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new _("internal-error")}function ua(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Qn(t=new Bn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=jo(t)):t.errorMessage&&(e=za(t.errorMessage)),e)throw e;ra(t)}function ha(t,e){return e.returnIdpCredential=!0,Ka(t,Ua,e)}function la(t,e){return e.returnIdpCredential=!0,Ka(t,Va,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ka(t,ja,e)}function pa(t){if(!t.oobCode)throw new _("invalid-action-code")}(t=Bs.prototype).zb=function(t,r){var i={idToken:t},o=[];return at(oa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ka(this,Da,i)},t.rb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Ka(this,Aa,t)},t.sb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ka(this,Sa,t)},t.qb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ka(this,Ca,t)},t.Ab=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ka(this,Na,t)},t.cb=function(t){return Ka(this,Wa,t)},t.jb=function(t,e){return Ka(this,Ra,{oobCode:t,newPassword:e})},t.Pa=function(t){return Ka(this,va,{oobCode:t})},t.fb=function(t){return Ka(this,da,{oobCode:t})};var da={endpoint:"setAccountInfo",A:pa,Y:"email",C:!0},va={endpoint:"resetPassword",A:pa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new _("internal-error")},C:!0},ya={endpoint:"signupNewUser",A:function(t){if(ea(t),!t.password)throw new _("weak-password")},G:ra,U:!0,C:!0},ga={endpoint:"createAuthUri",C:!0},ma={endpoint:"deleteAccount",M:["idToken"]},ba={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new _("internal-error")}},wa={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ea,G:ra,U:!0,C:!0},_a={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ea,G:ra,U:!0},Ea={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:sa,G:ra,C:!0,La:!0},Ia={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:sa,G:ra,C:!0,La:!0},Ta={endpoint:"getAccountInfo"},Sa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new _("internal-error");ea(t)},Y:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new _("internal-error")},Y:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new _("internal-error")},Y:"email",C:!0},Aa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new _("internal-error");ea(t)},Y:"email",C:!0},ka={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Oa={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new _("internal-error")}},Ra={endpoint:"resetPassword",A:pa,Y:"email",C:!0},Pa={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Da={endpoint:"setAccountInfo",M:["idToken"],A:na,U:!0},xa={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(na(t),!t.password)throw new _("weak-password")},G:ra,U:!0},La={endpoint:"signupNewUser",G:ra,U:!0,C:!0},Ma={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new _("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new _("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new _("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new _("internal-error")},C:!0,La:!0},Fa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new _("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new _("internal-error")},C:!0,La:!0},Ua={endpoint:"verifyAssertion",A:aa,Wa:ua,G:ca,U:!0,C:!0},ja={endpoint:"verifyAssertion",A:aa,Wa:ua,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new _("user-not-found");if(t.errorMessage)throw za(t.errorMessage);ra(t)},U:!0,C:!0},Va={endpoint:"verifyAssertion",A:function(t){if(aa(t),!t.idToken)throw new _("internal-error")},Wa:ua,G:ca,U:!0},qa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new _("invalid-custom-token")},G:ra,U:!0,C:!0},Ba={endpoint:"verifyPassword",A:function(t){if(ea(t),!t.password)throw new _("wrong-password")},G:ra,U:!0,C:!0},Wa={endpoint:"verifyPhoneNumber",A:ia,G:ra,C:!0},Ha={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new _("internal-error");ia(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",jo(t);ra(t)}},Ga={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ia,G:ra,C:!0},Qa={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Hs]^!!t.refreshToken)throw new _("internal-error")},C:!0,La:!0};function Ka(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return Ie(new _("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return Ee(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ta(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new _("internal-error");return r[e.Y]})}function za(t){return Ya({error:{errors:[{message:t}],code:400,message:t}})}function Ya(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new _(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new _(r[i],e);return!e&&t&&(e=Nr(t)),new _("internal-error",e)}function Xa(t){var o;this.b=t,this.a=null,this.nb=(o=this,(tu=tu||new ve(function(t,e){function n(){Pr(),_r("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Pr(),e(Error("Network Error"))},timeout:$a.get()})}if(_r("gapi.iframes.Iframe"))t();else if(_r("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){_r("gapi.load")?n():e(Error("Network Error"))},Ee(Ls(r=wt(Ja,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw tu=null,t})).then(function(){return new ve(function(r,i){_r("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Za.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ja=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),$a=new Dr(3e4,6e4),Za=new Dr(5e3,15e3),tu=null;function eu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Dn(this.i,"/__/auth/iframe"),On(this.a,"apiKey",this.g),On(this.a,"appName",this.h),this.b=null,this.c=[]}function nu(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ru(t){try{return Kl.app(t).auth().Ea()}catch(t){return[]}}function iu(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function ou(t){var a=nr();return Ka(t,ka,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{var e=Pn(a),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var i=t[r],o=e,s=n;if(o=0==i.indexOf("chrome-extension://")?Pn(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(ar.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Fo(nr())})}function su(i){return i.l||(i.l=cr().then(function(){if(!i.s){var t=i.c,e=i.h,n=ru(i.b),r=new eu(i.u,i.f,i.b);r.f=t,r.b=e,r.c=Q(n||[]),i.s=r.toString()}i.i=new Xa(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then(function(){t.a.register("authEvent",e,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Do(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",Ee(e)}return e.status="ERROR",Ee(e)})}(i)})),i.l}function au(t){return t.m||(t.w=t.c?br(t.c,ru(t.b)):null,t.m=new Bs(t.f,N(t.h),t.w)),t.m}function uu(t,e,n,r,i,o,s,a,u,c,h){return(t=new nu(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.ub(h).toString()}function cu(t){if(this.a=t||Kl.INTERNAL.reactNative&&Kl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new _("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function hu(t){this.b=t,this.a={},this.f=m(this.c,this)}eu.prototype.toString=function(){return this.f?On(this.a,"v",this.f):Gn(this.a.a,"v"),this.b?On(this.a,"eid",this.b):Gn(this.a.a,"eid"),this.c.length?On(this.a,"fw",this.c.join(",")):Gn(this.a.a,"fw"),this.a.toString()},nu.prototype.ub=function(t){return this.h=t,this},nu.prototype.toString=function(){var t=Dn(this.s,"/__/auth/handler");if(On(t,"apiKey",this.m),On(t,"appName",this.c),On(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Kl.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,On(t,"providerId",this.a.providerId),n=Ar((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ct(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ut(n)||On(t,"customParameters",Nr(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&On(t,"scopes",e.join(","))),this.l?On(t,"redirectUrl",this.l):Gn(t.a,"redirectUrl"),this.g?On(t,"eventId",this.g):Gn(t.a,"eventId"),this.i?On(t,"v",this.i):Gn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Rn(t,s)&&On(t,s,this.b[s]);return this.h?On(t,"tid",this.h):Gn(t.a,"tid"),this.f?On(t,"eid",this.f):Gn(t.a,"eid"),(s=ru(this.c)).length&&On(t,"fw",s.join(",")),t.toString()},(t=iu.prototype).Lb=function(e,n,t){var r=new _("popup-closed-by-user"),i=new _("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r;r={type:"webStorageSupport"},su(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new ve(function(t){e.a.send(n.type,n,t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&or(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new ve(function(e){return function t(){bn(2e3).then(function(){if(n&&!n.closed)return t();e()})}()});var n}).then(function(){if(!s)return bn(t).then(function(){n(r)})})},t.Ub=function(){var t=wr();return!Cr(t)&&!Rr(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return Ie(new _("popup-blocked"));if(s&&!Cr())return this.ka().o(function(t){or(e),i(t)}),r(),Ee();this.a||(this.a=ou(au(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw or(e),i(t),t});return r(),t}).then(function(){Ro(n),s||rr(uu(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=ou(au(this)));var i=this;return this.a.then(function(){Ro(e),rr(uu(i.u,i.f,i.b,t,e,nr(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return su(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new _("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){H(this.g,function(t){return t==e})},(t=cu.prototype).get=function(t){return Ee(this.a.getItem(t)).then(function(t){return t&&kr(t)})},t.set=function(t,e){return Ee(this.a.setItem(t,Nr(e)))},t.T=function(t){return Ee(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var lu,fu=[];function pu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function du(t){this.a=t}function vu(t){this.c=t,this.b=!1,this.a=[]}function yu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return Ie(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ve(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return gu(r,c),t}).o(function(t){throw gu(r,c),t})}function gu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e})}}function mu(){if(!_u())throw new _("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,r=this;fr()&&self?(this.l=function(){var e=fr()?self:null;if(U(fu,function(t){t.b==e&&(n=t)}),!n){var n=new hu(e);fu.push(n)}return n}(),pu(this.l,"keyChanged",function(t,n){return Cu(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),pu(this.l,"ping",function(){return Ee(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?Ee().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Ee(null)).then(function(t){(r.h=t)&&(r.g=new vu(new du(t)),yu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function bu(i){return new ve(function(e,n){var t=i.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new ve(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return bu(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function wu(t){return t.m||(t.m=bu(t)),t.m}function _u(){try{return l.indexedDB}catch(t){return}}function Eu(t){return t.objectStore("firebaseLocalStorage")}function Iu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Tu(t){return new ve(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Su(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?yu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Ee();var n}function Cu(r){return wu(r).then(function(t){var i=Eu(Iu(t,!1));return i.getAll?Tu(i.getAll()):new ve(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Nu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Au(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ee().then(function(){if(_u()){var e=Or(),n="__sak"+e;return lu=lu||new mu,(i=lu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function ku(){this.a={},this.type="inMemory"}function Ou(){if(!function(){var t="Node"==pr();if(!(t=Ru()||t&&Kl.INTERNAL.node&&Kl.INTERNAL.node.localStorage))return;try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==pr())throw new _("internal-error","The LocalStorage compatibility library was not found.");throw new _("web-storage-unsupported")}this.a=Ru()||Kl.INTERNAL.node.localStorage,this.type="localStorage"}function Ru(){try{var t=l.localStorage,e=Or();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Pu(){this.type="nullStorage"}function Du(){if(!function(){var t="Node"==pr();if(!(t=xu()||t&&Kl.INTERNAL.node&&Kl.INTERNAL.node.sessionStorage))return;try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==pr())throw new _("internal-error","The SessionStorage compatibility library was not found.");throw new _("web-storage-unsupported")}this.a=xu()||Kl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function xu(){try{var t=l.sessionStorage,e=Or();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Lu(){var t={};t.Browser=Uu,t.Node=ju,t.ReactNative=Vu,t.Worker=qu,this.a=t[pr()]}hu.prototype.c=function(n){var r=n.data.eventType,i=n.data.eventId,t=this.a[r];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var e=[];U(t,function(t){e.push(Ee().then(function(){return t(n.origin,n.data.data)}))}),Se(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})})}},du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vu.prototype.close=function(){for(;0<this.a.length;)gu(this,this.a[0]);this.b=!0},(t=mu.prototype).set=function(n,r){var i,o=!1,s=this;return wu(this).then(function(t){return Tu((t=Eu(Iu(i=t,!0))).get(n))}).then(function(t){var e=Eu(Iu(i,!0));return t?(t.value=r,Tu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Tu(e.add(t)))}).then(function(){return s.c[n]=r,Su(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return wu(this).then(function(t){return Tu(Eu(Iu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return wu(this).then(function(t){return n=!0,r.b++,Tu(Eu(Iu(t,!0)).delete(e))}).then(function(){return delete r.c[e],Su(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(Nu(n=this),function e(){n.f=setTimeout(function(){n.i=Cu(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&Nu(this)},(t=Au.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){H(this.a,function(t){return t==e})},(t=ku.prototype).get=function(t){return Ee(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ee()},t.T=function(t){return delete this.a[t],Ee()},t.ba=function(){},t.ha=function(){},(t=Ou.prototype).get=function(t){var e=this;return Ee().then(function(){return kr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Ee().then(function(){var t=Nr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ba=function(t){l.window&&en(l.window,"storage",t)},t.ha=function(t){l.window&&on(l.window,"storage",t)},(t=Pu.prototype).get=function(){return Ee(null)},t.set=function(){return Ee()},t.T=function(){return Ee()},t.ba=function(){},t.ha=function(){},(t=Du.prototype).get=function(t){var e=this;return Ee().then(function(){return kr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Ee().then(function(){var t=Nr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Mu,Fu,Uu={F:Ou,$a:Du},ju={F:Ou,$a:Du},Vu={F:cu,$a:Pu},qu={F:Ou,$a:Pu},Bu={od:"local",NONE:"none",qd:"session"};function Wu(){var t=!(Rr(wr())||!lr()),e=Cr(),n=Er();this.m=t,this.h=e,this.l=n,this.a={},t=Mu=Mu||new Lu;try{this.g=!er()&&Mr()||!l.indexedDB?new t.a.F:new Au(fr()?new ku:new t.a.F)}catch(t){this.g=new ku,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new ku}this.u=new ku,this.f=m(this.Vb,this),this.b={}}function Hu(){return Fu=Fu||new Wu}function Gu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ku(t,e,n){return n=Qu(e,n),"local"==e.F&&(t.b[n]=null),Gu(t,e.F).T(n)}function zu(t){t.c&&(clearInterval(t.c),t.c=null)}function Yu(t){this.a=t,this.b=Hu()}(t=Wu.prototype).get=function(t,e){return Gu(this,t.F).get(Qu(t,e))},t.set=function(e,t,n){var r=Qu(e,n),i=this,o=Gu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Qu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Gu(this,"local").ba(this.f),this.h||(er()||!Mr())&&l.indexedDB||!this.l||(zu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new He({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Qu(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Gu(this,"local").ha(this.f),zu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Gu(this,"local").ha(this.f):zu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.ib(e))},Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Xu,Ju={name:"authEvent",F:"local"};function $u(){this.a=Hu()}function Zu(t,e){this.b=tc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Xu&&(Xu=l.Int32Array?new Int32Array(ac):ac),this.reset()}e(Zu,function(){this.b=-1});for(var tc=64,ec=tc-1,nc=[],rc=0;rc<ec;rc++)nc[rc]=0;var ic=G(128,nc);function oc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Xu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function sc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(oc(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(oc(t),i=0)}}t.c=i,t.g+=n}Zu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Q(this.h)};var ac=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function uc(){Zu.call(this,8,cc)}e(uc,Zu);var cc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function hc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new $u,this.g=new Yu(this.h),this.f=null,this.b=[],this.a=this.c=null}function lc(t){return new _("invalid-cordova-configuration",t)}function fc(t){var e=new uc;sc(e,t),t=[];var n=8*e.g;e.c<56?sc(e,ic,56-e.c):sc(e,ic,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(oc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function pc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function dc(a){return a.f||(a.f=a.ka().then(function(){return new ve(function(n){function e(r){t=!0,s&&s.cancel(),vc(i).then(function(t){var e=o;if(t&&r&&r.url){var n=null;-1!=(e=Xi(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=kr(Rn(n=Pn(e),"firebaseError")||null))?E(n):null)?new Po(t.c,t.b,null,null,n,null,t.S()):new Po(t.c,t.b,e,t.f,null,null,t.S())),e=n||o}pc(i,e)})}var i,o,t,s,r;a.Ca(function t(e){return n(e),a.Qa(t),!1}),i=a,o=new Po("unknown",null,null,null,new _("no-auth-event")),t=!1,s=bn(500).then(function(){return vc(i).then(function(){t||pc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(_r("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Mo=Mo||new xo,function(t){var n=Mo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=_r("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function vc(e){var t,n=null;return(t=e.g).b.get(Ju,t.a).then(function(t){return Do(t)}).then(function(t){return n=t,Ku((t=e.g).b,Ju,t.a)}).then(function(){return n})}function yc(t){this.a=t,this.b=Hu()}(t=hc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(hr(void 0)?cr().then(function(){return new ve(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ie(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof _r("universalLinks.subscribe",l))throw lc("cordova-universal-links-plugin-fix is not installed");if(void 0===_r("BuildInfo.packageName",l))throw lc("cordova-plugin-buildinfo is not installed");if("function"!=typeof _r("cordova.plugins.browsertab.openUrl",l))throw lc("cordova-plugin-browsertab is not installed");if("function"!=typeof _r("cordova.InAppBrowser.open",l))throw lc("cordova-plugin-inappbrowser is not installed")},function(){throw new _("cordova-not-ready")})},t.Lb=function(t,e){return e(new _("operation-not-supported-in-this-environment")),Ee()},t.Jb=function(){return Ie(new _("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Ie(new _("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=Ee().then(function(){return Ro(e),dc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Po(t,r,null,o,new _("no-auth-event"),null,i),a=_r("BuildInfo.packageName",l);if("string"!=typeof a)throw new _("invalid-cordova-configuration");var u=_r("BuildInfo.displayName",l),c={};if(wr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!wr().toLowerCase().match(/android/))return Ie(new _("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=fc(o),c.sessionId=o;var h=uu(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Ju,s.v(),t)}).then(function(){var t=_r("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new _("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=_r("cordova.plugins.browsertab.openUrl",l)))throw new _("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=_r("cordova.InAppBrowser.open",l)))throw new _("invalid-cordova-configuration");t=wr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new ve(function(e,t){a=function(){var t=_r("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||bn(2e3).then(function(){t(new _("redirect-cancelled-by-user"))})},c=function(){xr()&&u()},o.addEventListener("resume",u,!1),wr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return vc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),dc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Po("unknown",null,null,null,new _("no-auth-event")),e(t))})},t.Qa=function(e){H(this.b,function(t){return t==e})};var gc={name:"pendingRedirect",F:"session"};function mc(t){return Ku(t.b,gc,t.a)}function bc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Dc,this.B=new Uc,this.g=new yc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=wc(this.D,this.u,this.m,I)}function wc(t,e,n,r){var i=Kl.SDK_VERSION||null;return new(hr()?hc:iu)(t,e,n,i,r)}function _c(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function Ec(n){n.a.Ub()&&_c(n).o(function(t){var e=new Po("unknown",null,null,null,new _("operation-not-supported-in-this-environment"));Ac(t)&&n.s(e)}),n.a.Qb()||xc(n.b)}function Ic(n,t){var e;B(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(gc,e.a).then(function(t){return"pending"==t}).then(function(t){t?mc(n.g).then(function(){_c(n).o(function(t){var e=new Po("unknown",null,null,null,new _("operation-not-supported-in-this-environment"));Ac(t)&&n.s(e)})}):Ec(n)}).o(function(){Ec(n)})}function Tc(t,e){H(t.h,function(t){return t==e})}bc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=wc(this.D,this.u,this.m),this.i={}},bc.prototype.s=function(t){if(!t)throw new _("invalid-auth-event");if(6e5<=w()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=w())),e=!0;break}}return xc(this.b),e};var Sc=new Dr(2e3,1e4),Cc=new Dr(3e4,6e4);function Nc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function Ac(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function kc(e,t,n,r,i){var o,s;return(s=e.g).b.set(gc,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(Ac(t))throw new _("operation-not-supported-in-this-environment");return o=t,mc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new ve(function(){}):mc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function Oc(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},Sc.get())}bc.prototype.pa=function(){return this.b.pa()};var Rc={};function Pc(t,e,n){var r=e+":"+n;return Rc[r]||(Rc[r]=new bc(t,e,n)),Rc[r]}function Dc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function xc(t){t.g||(t.g=!0,Fc(t,!1,null,null))}function Lc(t){t.g&&!t.i&&Fc(t,!1,null,null)}function Mc(t,e){if(t.b=function(){return Ee(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Fc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ie(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Mc(t,n):Mc(t,{user:null}),t.f=[],t.c=[]}function Uc(){}function jc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Vc(t,e){this.a=e,qr(this,"verificationId",t)}function qc(t,e,n,r){return new Ao(t).cb(e,n).then(function(t){return new Vc(t,r)})}function Bc(t){var e=Mi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new _("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Br(this,{token:t,expirationTime:Lr(1e3*e.exp),authTime:Lr(1e3*e.auth_time),issuedAtTime:Lr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Gc];if(!r)throw new _("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Ji(null,r),this.b=[];var i=this;U(e[Hc]||[],function(t){(t=Qr(t))&&i.b.push(t)}),qr(this,"auth",this.a),qr(this,"session",this.c),qr(this,"hints",this.b)}Dc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Dc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Fc(this,!0,null,t.a),Ee()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Fc(e,a,t,null)}).o(function(t){Fc(e,a,null,t)})}(this,t,e):Ie(new _("invalid-auth-event")):(Fc(this,!1,null,null),Ee())}else Ie(new _("invalid-auth-event"))},Dc.prototype.pa=function(){var i=this;return new ve(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new _("timeout"),n.a&&n.a.cancel(),n.a=bn(Cc.get()).then(function(){n.b||(n.g=!0,Fc(n,!0,null,r))}))})},Uc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),Ee()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):Ie(new _("invalid-auth-event"))}else Ie(new _("invalid-auth-event"));var i,o,s,a},Vc.prototype.confirm=function(t){return t=ko(this.verificationId,t),this.a(t)};var Hc="mfaInfo",Gc="mfaPendingCredential";function Qc(t,e,n,r){_.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),qr(this,"resolver",this.b)}function Kc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function zc(){}function Yc(t){qr(this,"factorId",t.ea),this.a=t}function Xc(t){if(Yc.call(this,t),this.a.ea!=Ao.PROVIDER_ID)throw new _("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Jc(t,e){for(var n in We.call(this,t),e)this[n]=e[n]}function $c(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),en(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Yr]=t.uid),t.displayName&&(n[Kr]=t.displayName),t.enrollmentTime&&(n[zr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Xr]=t.phoneNumber);try{e=new Jr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Zc(this,r)}function Zc(t,e){t.b=e,qr(t,"enrolledFactors",e)}function th(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function eh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function nh(t){this.c=t,this.b=this.a=null}function rh(t){return t.b&&1e3*t.b.c||0}function ih(t,e){var n=e.refreshToken;t.b=Li(e[Hs]||""),t.a=n}function oh(e,t){return r=e.c,i=t,new ve(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Js(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ya(t)):t.access_token&&t.refresh_token?e(t):n(new _("internal-error")):n(new _("network-request-failed"))},"POST",Hn(i).toString(),r.g,r.m.get()):n(new _("internal-error"))}).then(function(t){return e.b=Li(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function sh(t,e){this.a=t||null,this.b=e||null,Br(this,{lastSignInTime:Lr(e||null),creationTime:Lr(t||null)})}function ah(t,e,n,r,i,o){Br(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function uh(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Kl.SDK_VERSION?br(Kl.SDK_VERSION):null,this.a=new Bs(this.l,N(I),t),this.b=new nh(this.a),vh(this,e[Hs]),ih(this.b,e),qr(this,"refreshToken",this.b.a),mh(this,n||{}),dn.call(this),this.P=!1,this.s&&Ir()&&(this.i=Pc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new th(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=rh(r.b)-w()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){hh(i,t.c)},this.$=null,this.O=new $c(this,n),qr(this,"multiFactor",this.O)}function ch(t,e){t.aa&&on(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&en(e,"languageCodeChanged",t.za)}function hh(t,e){t.W=e,Xs(t.a,Kl.SDK_VERSION?br(Kl.SDK_VERSION,t.W):null)}function lh(t,e){t.$&&on(t.$,"frameworkChanged",t.ya),(t.$=e)&&en(e,"frameworkChanged",t.ya)}function fh(e){try{return Kl.app(e.m).auth()}catch(t){throw new _("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ph(t){t.D||t.B.b||(t.B.start(),on(t,"tokenChanged",t.Z),en(t,"tokenChanged",t.Z))}function dh(t){on(t,"tokenChanged",t.Z),t.B.stop()}function vh(t,e){t.xa=e,qr(t,"_lat",e)}function yh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Se(e).then(function(){return t})}function gh(t){t.i&&!t.P&&(t.P=!0,Ic(t.i,t))}function mh(t,e){Br(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new sh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function bh(){}function wh(t){return Ee().then(function(){if(t.D)throw new _("app-deleted")})}function _h(t){return V(t.providerData,function(t){return t.providerId})}function Eh(t,e){e&&(Ih(t,e.providerId),t.providerData.push(e))}function Ih(t,e){H(t.providerData,function(t){return t.providerId==e})}function Th(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&qr(t,e,n)}function Sh(e,t){var n,r,i;e!=t&&(Br(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?qr(e,"metadata",new sh((i=t.metadata).a,i.b)):qr(e,"metadata",new sh),U(t.providerData,function(t){Eh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,qr(e,"refreshToken",e.b.a),Zc(e.O,t.O.b))}function Ch(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Ka((e=i).a,Ta,{idToken:n}).then(m(e.Ic,e)).then(function(){return r||Th(i,"isAnonymous",!1),t})})}function Nh(t,e){e[Hs]&&t.xa!=e[Hs]&&(ih(t.b,e),t.dispatchEvent(new Jc("tokenChanged")),vh(t,e[Hs]),Th(t,"refreshToken",t.b.a))}function Ah(t,e){return Ch(t).then(function(){if(B(_h(t),e))return yh(t).then(function(){throw new _("provider-already-linked")})})}function kh(t,e,n){return Wr({user:t,credential:Oo(e),additionalUserInfo:e=qi(e),operationType:n})}function Oh(t,e){return Nh(t,e),t.reload().then(function(){return t})}function Rh(n,r,t,e,i){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));if(n.h&&!i)return Ie(n.h);var o=Vi(t.providerId),s=Or(n.uid+":::"),a=null;(!Cr()||lr())&&n.s&&t.isOAuthProvider&&(a=uu(n.s,n.l,n.m,r,t,null,s,Kl.SDK_VERSION||null,null,null,n.tenantId));var u=sr(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Dh(n),!i)return n.I().then(function(){})}).then(function(){return Nc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new ve(function(t,e){n.la(r,null,new _("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=Oc(n.i,n,r,u,s)})}).then(function(t){return u&&or(u),t?Wr(t):null}).o(function(t){throw u&&or(u),t}),xh(n,e,i)}function Ph(e,t,n,r,i){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ie(e.h);var o=null,s=Or(e.uid+":::");return r=r().then(function(){if(Dh(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,yh(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Fh,e.v(),t.a)),t}).then(function(){return kc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return Uh(e.ga);throw o}).then(function(){if(o)throw o}),xh(e,r,i)}function Dh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new _("internal-error");throw new _("auth-domain-config-required")}}function xh(n,t,e){var r,i,o,s=(i=t,o=e,(r=n).h&&!o?(i.cancel(),Ie(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Jc("userInvalidated")),r.h=t),t}));return n.N.push(s),s.ma(function(){W(n.N,s)}),s.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Kc(t.v(),fh(n),m(n.hc,n))),e||t})}function Lh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Hs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new uh(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&Eh(r,Wr(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Mh(t){this.a=t,this.b=Hu()}Wc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ct(n.f);return delete e[Hc],delete e[Gc],lt(e,t),n.g(e)})},e(Qc,_),zc.prototype.ob=function(t,e,n){return e.type==$i?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:No(o.a)}),Ka(s,Ea,t)})):(r=this,i=t,e.Fa().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:No(r.a)}),Ka(i,Ia,t)}));var r,i,o,s,a},e(Yc,zc),e(Xc,Yc),e(Jc,We),(t=$c.prototype).wc=function(t){var e,n;Zc(this,(e=t.ed,n=[],U(e.mfaInfo||[],function(t){(t=Qr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new Ji(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return Nh(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ka(e,Qa,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Zc(n,e),Nh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.v()})}}},th.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=bn(eh(n,t)).then(function(){return e=l.document,n=null,xr()||!e?Ee():new ve(function(t){n=function(){xr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},th.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:rh(this)}},nh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ie(new _("user-token-expired")):t||!this.b||w()>rh(this)-3e4?this.a?oh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ee(null):Ee({accessToken:this.b.toString(),refreshToken:this.a})},sh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(uh,dn),uh.prototype.va=function(t){this.oa=t,Ys(this.a,t)},uh.prototype.ja=function(){return this.oa},uh.prototype.Ea=function(){return Q(this.W)},uh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},qr(uh.prototype,"providerId","firebase"),(t=uh.prototype).reload=function(){var t=this;return xh(this,wh(this).then(function(){return Ch(t).then(function(){return yh(t)}).then(bh)}))},t.mc=function(t){return this.I(t).then(function(t){return new Bc(t)})},t.I=function(t){var e=this;return xh(this,wh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new _("internal-error");return t.accessToken!=e.xa&&(vh(e,t.accessToken),e.dispatchEvent(new Jc("tokenChanged"))),Th(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new _("internal-error");mh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=(r=(r=t).providerUserInfo)&&r.length?V(r,function(t){return new ah(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],n=0;n<e.length;n++)Eh(this,e[n]);var r;Th(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Jc("userReloaded",{ed:t}))},t.Jc=function(t){return jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return xh(this,t.c(this.a,this.uid).then(function(t){return Nh(e,t),n=kh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return xh(this,Ah(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=kh(n,t,"link"),Oh(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return xh(this,Ah(this,"phone").then(function(){return qc(fh(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return xh(this,Ee().then(function(){return qc(fh(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return xh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return Nh(n,t),n.reload()}))},t.cd=function(e){var n=this;return xh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Nh(n,t),n.reload()}))},t.yb=function(e){var n=this;return xh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return Nh(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return wh(this);var n=this;return xh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Nh(n,t),Th(n,"displayName",t.displayName||null),Th(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(qr(t,"displayName",n.displayName),qr(t,"photoURL",n.photoURL))}),yh(n)}).then(bh))},t.ad=function(e){var n=this;return xh(this,Ch(this).then(function(t){return B(_h(n),e)?Ka(n.a,ba,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(_h(n),function(t){e[t]||Ih(n,t)}),e[Ao.PROVIDER_ID]||qr(n,"phoneNumber",null),yh(n)}):yh(n).then(function(){throw new _("no-such-provider")})}))},t.delete=function(){var e=this;return xh(this,this.I().then(function(t){return Ka(e.a,ma,{idToken:t})}).then(function(){e.dispatchEvent(new Jc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");ch(e,null),lh(e,null),e.N=[],e.D=!0,dh(e),qr(e,"refreshToken",null),e.i&&Tc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return Rh(this,"linkViaPopup",t,function(){return Ah(e,t.providerId).then(function(){return yh(e)})},!1)},t.Lc=function(t){return Rh(this,"reauthViaPopup",t,function(){return Ee()},!0)},t.Dc=function(t){var e=this;return Ph(this,"linkViaRedirect",t,function(){return Ah(e,t.providerId)},!1)},t.Mc=function(t){return Ph(this,"reauthViaRedirect",t,function(){return Ee()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return la(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=kh(i,t,"link"),Oh(i,t)}).then(function(){return o}),xh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return xh(this,Ee().then(function(){return eo(fa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=kh(i,t,"reauthenticate"),Nh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return xh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Ri(new _i(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return xh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Ri(new _i(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return xh(this,t=eo(Ee(t),n.uid).then(function(t){return e=kh(n,t,"reauthenticate"),Nh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&lt(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.v()),e};var Fh={name:"redirectUser",F:"session"};function Uh(t){return Ku(t.b,Fh,t.a)}function jh(t){var e,n,r,i;this.a=t,this.b=Hu(),this.c=null,this.f=(n=Bh("local"),r=Bh("session"),i=Bh("none"),function(n,r,i){var o=Qu(r,i),s=Gu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=kr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(qh,e.a).then(function(t){return t?Bh(t):n})})})}).then(function(t){return e.c=t,Vh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Bh("local"),this.a,m(this.g,this))}function Vh(t,e){var n,a,r=[];for(n in Bu)Bu[n]!==e&&r.push(Ku(t.b,Bh(Bu[n]),t.a));return r.push(Ku(t.b,qh,t.a)),a=r,new ve(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Te(a[s],b(t,s),o);else n(i)})}jh.prototype.g=function(){var e=this,n=Bh("local");Qh(this,function(){return Ee().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Vh(e,"local").then(function(){e.c=n})})})};var qh={name:"persistence",F:"session"};function Bh(t){return{name:"authUser",F:t}}function Wh(t,e){return Qh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Hh(t){return Qh(t,function(){return Ku(t.b,t.c,t.a)})}function Gh(t,e){return Qh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lh(t||{})})})}function Qh(t,e){return t.f=t.f.then(e,e),t.f}function Kh(t){if(this.l=!1,qr(this,"settings",new jc),qr(this,"app",t),!el(this).options||!el(this).options.apiKey)throw new _("invalid-api-key");var n,e,r,i,o,s,a,u;t=Kl.SDK_VERSION?br(Kl.SDK_VERSION):null,this.b=new Bs(el(this).options&&el(this).options.apiKey,N(I),t),this.P=[],this.m=[],this.O=[],this.$b=Kl.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=Kl.INTERNAL.createSubscribe(m(this.yc,this)),Zh(this,null),this.i=new jh(el(this).options.apiKey+":"+el(this).name),this.B=new Mh(el(this).options.apiKey+":"+el(this).name),this.Z=ol(this,(e=el(n=this).options.authDomain,r=function(e){var t=function(t,e){return t.b.get(Fh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lh(t||{})})}(e.B,el(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ga=e.B),Uh(e.B)});return ol(e,t)}(n).then(function(){return Gh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Wh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Hh(n.i)})):null}).then(function(t){Zh(n,t||null)}),ol(n,r))),this.h=ol(this,(i=this).Z.then(function(){return Jh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){if(!i.l){i.aa=!0;var t=i.i;t.b.addListener(Bh("local"),t.a,i.oa)}})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=el(o=this).options.authDomain,a=el(o).options.apiKey,s&&Ir()&&(o.Zb=o.Z.then(function(){if(!o.l){if(o.a=Pc(s,a,el(o).name),Ic(o.a,o),nl(o)&&gh(nl(o)),o.D){gh(o.D);var t=o.D;t.va(o.ja()),ch(t,o),hh(t=o.D,o.N),lh(t,o),o.D=null}return o.a}})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,dn.call(this),u=this,Object.defineProperty(u,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),u.$=null,Object.defineProperty(u,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),u.R=null,this.N=[]}function zh(t){We.call(this,"languageCodeChanged"),this.g=t}function Yh(t){We.call(this,"frameworkChanged"),this.c=t}function Xh(t){return t.Zb||Ie(new _("auth-domain-config-required"))}function Jh(t){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));var e=Xh(t).then(function(){return t.a.pa()}).then(function(t){return t?Wr(t):null});return ol(t,e)}function $h(o,s){var a={};return a.apiKey=el(o).options.apiKey,a.authDomain=el(o).options.authDomain,a.appName=el(o).name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new uh(t,e),n&&(i.ga=n),r&&hh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return nl(o)&&t.uid==nl(o).uid?Sh(nl(o),t):(Zh(o,t),gh(t)),o.ca(t)}).then(function(){il(o)})}function Zh(t,e){var n,r;nl(t)&&(n=nl(t),r=t.Ma,H(n.R,function(t){return t==r}),on(nl(t),"tokenChanged",t.xa),on(nl(t),"userDeleted",t.ya),on(nl(t),"userInvalidated",t.za),dh(nl(t))),e&&(e.R.push(t.Ma),en(e,"tokenChanged",t.xa),en(e,"userDeleted",t.ya),en(e,"userInvalidated",t.za),0<t.s&&ph(e)),qr(t,"currentUser",e),e&&(e.va(t.ja()),ch(e,t),hh(e,t.N),lh(e,t))}function tl(n,t){var e=null,r=null;return ol(n,t.then(function(t){return e=Oo(t),r=qi(t),$h(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Kc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return Wr({user:nl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function el(t){return t.app}function nl(t){return t.currentUser}function rl(t){return nl(t)&&nl(t)._lat||null}function il(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](rl(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](rl(t))}}function ol(t,e){return t.P.push(e),e.ma(function(){W(t.P,e)}),e}function sl(){}function al(){this.a={},this.b=1e12}jh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new _("invalid-persistence-type"),n=new _("unsupported-persistence-type");t:{for(r in Bu)if(Bu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(pr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!_u()&&"none"!==t)throw n;break;default:if(!Er()&&"none"!==t)throw n}}(e),Qh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Vh(r,e)}).then(function(){if(r.c=Bh(e),n)return r.b.set(r.c,n,r.a)}):Ee()})},e(Kh,dn),e(zh,We),e(Yh,We),(t=Kh.prototype).tb=function(t){return t=this.i.tb(t),ol(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Ys(this.b,this.$),this.dispatchEvent(new zh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=l.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Xs(this.b,Kl.SDK_VERSION?br(Kl.SDK_VERSION,this.N):null),this.dispatchEvent(new Yh(this.N))},t.Ea=function(){return Q(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:el(this).options.apiKey,authDomain:el(this).options.authDomain,appName:el(this).name,currentUser:nl(this)&&nl(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return tl(i,ha(i.b,o))})},t.Vc=function(e){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));var n=this,t=Vi(e.providerId),r=Or(),i=null;(!Cr()||lr())&&el(this).options.authDomain&&e.isOAuthProvider&&(i=uu(el(this).options.authDomain,el(this).options.apiKey,el(this).name,"signInViaPopup",e,null,r,Kl.SDK_VERSION||null,null,null,this.S()));var o=sr(i,t&&t.ta,t&&t.sa);return ol(this,t=Xh(this).then(function(t){return Nc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new ve(function(t,e){n.la("signInViaPopup",null,new _("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=Oc(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&or(o),t?Wr(t):null}).o(function(t){throw o&&or(o),t}))},t.Wc=function(t){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));var e=this;return ol(this,Xh(this).then(function(){return Qh(t=e.i,function(){return t.b.set(qh,t.c.F,t.a)});var t}).then(function(){return kc(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return Jh(this).then(function(t){return e.a&&Lc(e.a.b),t}).o(function(t){throw e.a&&Lc(e.a.b),t})},t.bd=function(t){if(!t)return Ie(new _("null-user"));if(this.R!=t.tenantId)return Ie(new _("tenant-id-mismatch"));var e=this,n={};n.apiKey=el(this).options.apiKey,n.authDomain=el(this).options.authDomain,n.appName=el(this).name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[Hs]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new uh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&hh(i,s),Sh(i,r),i);return ol(this,this.h.then(function(){if(el(e).options.apiKey!=t.l)return c.reload()}).then(function(){return nl(e)&&t.uid==nl(e).uid?(Sh(nl(e),t),e.ca(t)):(Zh(e,c),gh(c),e.ca(c))}).then(function(){il(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Lc(t.a.b),nl(t)?(Zh(t,null),Hh(t.i).then(function(){il(t)})):Ee()});return ol(this,e)},t.Xc=function(){var r=this;return Gh(this.i,el(this).options.authDomain).then(function(t){if(!r.l){var e;if(e=nl(r)&&t){e=nl(r).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return Sh(nl(r),t),nl(r).I();(nl(r)||t)&&(Zh(r,t),t&&(gh(t),t.ga=r.B),r.a&&Ic(r.a,r),il(r))}})},t.ca=function(t){return Wh(this.i,t)},t.jc=function(){il(this),this.ca(nl(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return tl(e,Ee(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(nl(e))})},t.yc=function(t){var e,n,r=this;n=function(){t.next(nl(r))},(e=this).O.push(n),ol(e,e.h.then(function(){!e.l&&B(e.O,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(rl(e)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){d(t)?t(nl(r)):d(t.next)&&t.next(nl(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),d(t)?t(nl(r)):d(t.next)&&t.next(nl(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return nl(e)?nl(e).I(t).then(function(t){return{accessToken:t}}):null});return ol(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return tl(n,Ka(n.b,qa,{token:t}))}).then(function(t){var e=t.user;return Th(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return tl(n,Ka(n.b,Ba,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return tl(n,Ka(n.b,ya,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return tl(e,t.ia(e.b))})},t.Qc=function(t){return jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=nl(n);if(t&&t.isAnonymous){var e=Wr({providerId:null,isNewUser:!1});return Wr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return tl(n,n.b.vb()).then(function(t){var e=t.user;return Th(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return nl(this)&&nl(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&nl(this)&&ph(nl(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&nl(this)&&dh(nl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),ol(this,this.h.then(function(){e.l||B(e.m,t)&&t(rl(e))}))},t.removeAuthTokenListener=function(e){H(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Bh("local"),t.a,this.oa),this.a&&(Tc(this.a,this),Lc(this.a.b)),Promise.resolve()},t.fc=function(t){return ol(this,Ka(this.b,ga,{identifier:t,continueUri:Tr()?nr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!To(t)},t.sb=function(e,n){var r=this;return ol(this,Ee().then(function(){var t=new _i(n);if(!t.c)throw new _("argument-error",Ti+" must be true when sending sign in link to email");return Ri(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return ol(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return ol(this,this.b.Pa(t).then(function(t){return new $r(t)}))},t.fb=function(t){return ol(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return ol(this,Ee().then(function(){return void 0===t||ut(t)?{}:Ri(new _i(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return ol(this,qc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return ol(this,Ee().then(function(){var t=r||nr(),e=Io(n,t);if(!(t=To(t)))throw new _("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new _("tenant-id-mismatch");return i.Ya(e)}))},sl.prototype.render=function(){},sl.prototype.reset=function(){},sl.prototype.getResponse=function(){},sl.prototype.execute=function(){};var ul=null;function cl(t,e){return(e=hl(e))&&t.a[e]||null}function hl(t){return(t=void 0===t?1e12:t)?t.toString():null}function ll(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():en(this.f,"click",this.i)}function fl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function pl(){}function dl(){}al.prototype.render=function(t,e){return this.a[this.b.toString()]=new ll(t,e),this.b++},al.prototype.reset=function(t){var e=cl(this,t);t=hl(t),e&&t&&(e.delete(),delete this.a[t])},al.prototype.getResponse=function(t){return(t=cl(this,t))?t.getResponse():null},al.prototype.execute=function(t){(t=cl(this,t))&&t.execute()},ll.prototype.getResponse=function(){return fl(this),this.b},ll.prototype.execute=function(){fl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},ll.prototype.delete=function(){fl(this),this.g=!0,clearTimeout(this.a),this.a=null,on(this.f,"click",this.i)},qr(pl,"FACTOR_ID","phone"),dl.prototype.g=function(){return Ee(ul=ul||new al)},dl.prototype.c=function(){};var vl=null;function yl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var gl=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ml=new Dr(3e4,6e4);yl.prototype.g=function(i){var o=this;return new ve(function(t,e){var r=setTimeout(function(){e(new _("network-request-failed"))},ml.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){if(l.grecaptcha){o.f=i;var n=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)}else clearTimeout(r),e(new _("internal-error"));delete l[o.a]},Ee(Ls(wt(gl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new _("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},yl.prototype.c=function(){this.b--};var bl=null;function wl(t,e,n,r,i,o,s){if(qr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?vl=vl||new dl:bl=bl||new yl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Il])throw new _("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Tl],!l.document)throw new _("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new _("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Bs(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[_l];this.a[_l]=function(t){if(Sl(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=_r(u,l);"function"==typeof e&&e(t)}};var c=this.a[El];this.a[El]=function(){if(Sl(a,null),"function"==typeof c)c();else if("string"==typeof c){var t=_r(c,l);"function"==typeof t&&t()}}}var _l="callback",El="expired-callback",Il="sitekey",Tl="size";function Sl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Cl(t,e){return t.h.push(e),e.ma(function(){W(t.h,e)}),e}function Nl(t){if(t.D)throw new _("internal-error","RecaptchaVerifier instance has been destroyed.")}function Al(t,e,n){var r=!1;try{this.b=n||Kl.app()}catch(t){throw new _("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new _("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Kl.SDK_VERSION?br(Kl.SDK_VERSION,o):null,wl.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,N(I),r)}function kl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new _("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Ol.length)throw new _("internal-error","Argument validator received an unsupported number of arguments.");n=Ol[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new _("argument-error",t+" failed: "+r)}(t=wl.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=Cl(this,Ee().then(function(){if(Tr()&&!fr())return cr();throw new _("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,Ka(e.s,Oa,{})}).then(function(t){e.a[Il]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Nl(this);var n=this;return Cl(this,this.Ga().then(function(){if(null===n.c){var t=n.u;if(!n.i){var e=ee(t);t=se("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){Nl(this);var i=this;return Cl(this,this.render().then(function(e){return new ve(function(n){var t=i.g.getResponse(e);if(t)n(t);else{var r=function(t){var e;t&&(e=r,H(i.l,function(t){return t==e}),n(t))};i.l.push(r),i.i&&i.g.execute(i.c)}})}))},t.reset=function(){Nl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Nl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ee(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},e(Al,wl);var Ol="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Rl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Pl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Dl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function xl(t,e){return{name:t||"",J:"a function",optional:!!e,K:d}}function Ll(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Ml(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Fl(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Ul(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function jl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&d(t.Fa)}function Vl(t){return v(t)&&"string"==typeof t.uid}function ql(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!d(t.verify))}}}function Bl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Wl(t,e){for(var n in e){var r=e[n].name;t[r]=Ql(r,t[n],e[n].j)}}function Hl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){kl(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Gl(t,e,n,r){t[e]=Ql(e,n,r)}function Ql(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return kl(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Wl(Kh.prototype,{fb:{name:"applyActionCode",j:[Rl("code")]},Pa:{name:"checkActionCode",j:[Rl("code")]},jb:{name:"confirmPasswordReset",j:[Rl("code"),Rl("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Rl("email"),Rl("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Rl("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Rl("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Bl(Dl(),xl(),"nextOrObserver"),xl("opt_error",!0),xl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Bl(Dl(),xl(),"nextOrObserver"),xl("opt_error",!0),xl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Rl("email"),Bl(Dl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Rl("email"),Dl("actionCodeSettings")]},tb:{name:"setPersistence",j:[Rl("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Ml()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Ml()]},Rc:{name:"signInWithCustomToken",j:[Rl("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Rl("email"),Rl("password")]},Tc:{name:"signInWithEmailLink",j:[Rl("email"),Rl("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Rl("phoneNumber"),ql()]},Vc:{name:"signInWithPopup",j:[Ul()]},Wc:{name:"signInWithRedirect",j:[Ul()]},bd:{name:"updateCurrentUser",j:[Bl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof uh)}},Ll(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Rl(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Rl("code")]}}),Hl(Kh.prototype,{lc:{name:"languageCode",gb:Bl(Rl(),Ll(),"languageCode")},ti:{name:"tenantId",gb:Bl(Rl(),Ll(),"tenantId")}}),(Kh.Persistence=Bu).LOCAL="local",Kh.Persistence.SESSION="session",Kh.Persistence.NONE="none",Wl(uh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Pl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Pl("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Ml()]},mb:{name:"linkWithCredential",j:[Ml()]},Bc:{name:"linkWithPhoneNumber",j:[Rl("phoneNumber"),ql()]},Cc:{name:"linkWithPopup",j:[Ul()]},Dc:{name:"linkWithRedirect",j:[Ul()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ml()]},pb:{name:"reauthenticateWithCredential",j:[Ml()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Rl("phoneNumber"),ql()]},Lc:{name:"reauthenticateWithPopup",j:[Ul()]},Mc:{name:"reauthenticateWithRedirect",j:[Ul()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Bl(Dl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Rl(null,!0)]},ad:{name:"unlink",j:[Rl("provider")]},xb:{name:"updateEmail",j:[Rl("email")]},yb:{name:"updatePassword",j:[Rl("password")]},cd:{name:"updatePhoneNumber",j:[Ml("phone")]},zb:{name:"updateProfile",j:[Dl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Rl("email"),Bl(Dl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]}}),Wl(al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Wl(sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Wl(ve.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Hl(jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Pl("appVerificationDisabledForTesting")}}),Wl(Vc.prototype,{confirm:{name:"confirm",j:[Rl("verificationCode")]}}),Gl(to,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[ao,_o,Co,io],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Bl(Rl(),Dl(),"json")]),Gl(Eo,"credential",function(t,e){return new wo(t,e)},[Rl("email"),Rl("password")]),Wl(wo.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Wl(lo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Gl(lo,"credential",fo,[Bl(Rl(),Dl(),"token")]),Gl(Eo,"credentialWithLink",Io,[Rl("email"),Rl("emailLink")]),Wl(po.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Gl(po,"credential",vo,[Bl(Rl(),Dl(),"token")]),Wl(yo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Gl(yo,"credential",go,[Bl(Rl(),Bl(Dl(),Ll()),"idToken"),Bl(Rl(),Ll(),"accessToken",!0)]),Wl(mo.prototype,{Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Gl(mo,"credential",bo,[Bl(Rl(),Dl(),"token"),Rl("secret",!0)]),Wl(ho.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},credential:{name:"credential",j:[Bl(Rl(),Bl(Dl(),Ll()),"optionsOrIdToken"),Bl(Rl(),Ll(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Wl(oo.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Wl(no.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(Ao,"credential",ko,[Rl("verificationId"),Rl("verificationCode")]),Wl(Ao.prototype,{cb:{name:"verifyPhoneNumber",j:[Bl(Rl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?jl(t.session,$i)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?jl(t.session,Zi)&&Vl(t.multiFactorHint):t.session&&t.multiFactorUid?jl(t.session,Zi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),ql()]}}),Wl(So.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Wl(_.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Wl(Uo.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Wl(Fo.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Wl(Qc.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Wl(Wc.prototype,{Pc:{name:"resolveSignIn",j:[Fl()]}}),Wl($c.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Fl(),Rl("displayName",!0)]},$c:{name:"unenroll",j:[Bl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Vl},Rl(),"multiFactorInfoIdentifier")]}}),Wl(Al.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Gl(fi,"parseLink",wi,[Rl("link")]),Gl(pl,"assertion",function(t){return new Xc(t)},[Ml("phone")]),function(){if(void 0===Kl||!Kl.INTERNAL||!Kl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ti,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Zr,VERIFY_AND_CHANGE_EMAIL:ei,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Kh,AuthCredential:to,Error:_};Gl(t,"EmailAuthProvider",Eo,[]),Gl(t,"FacebookAuthProvider",lo,[]),Gl(t,"GithubAuthProvider",po,[]),Gl(t,"GoogleAuthProvider",yo,[]),Gl(t,"TwitterAuthProvider",mo,[]),Gl(t,"OAuthProvider",ho,[Rl("providerId")]),Gl(t,"SAMLAuthProvider",co,[Rl("providerId")]),Gl(t,"PhoneAuthProvider",Ao,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Kh)}}]),Gl(t,"RecaptchaVerifier",Al,[Bl(Rl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Dl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Kl.app.App)}}]),Gl(t,"ActionCodeURL",fi,[]),Gl(t,"PhoneMultiFactorGenerator",pl,[]),Kl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Kh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Kl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Kl.registerVersion("@firebase/auth","0.14.7"),Kl.INTERNAL.extendNamespace({User:uh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var $a=(Za.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Js(e))},Za.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Xs(e)},Za.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Za.prototype.prefixedName_=function(t){return this.prefix_+t},Za.prototype.toString=function(){return this.domStorage_.toString()},Za);function Za(t){this.domStorage_=t,this.prefix_="firebase:"}var tu=(eu.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},eu.prototype.get=function(t){return Zs(this.cache_,t)?this.cache_[t]:null},eu.prototype.remove=function(t){delete this.cache_[t]},eu);function eu(){this.cache_={},this.isInMemoryStorage=!0}function nu(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $a(e)}}catch(t){}return new tu}function ru(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;Ds(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}(t),n=new ra;n.update(e);var r=n.digest();return Ls.encodeByteArray(r)}function iu(t,e){Ds(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(gu.logLevel=Ia.VERBOSE,wu=gu.log.bind(gu),e&&yu.set("logging_enabled",!0)):"function"==typeof t?wu=t:(wu=null,yu.remove("logging_enabled"))}function ou(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_u&&(_u=!1,null===wu&&!0===yu.get("logging_enabled")&&iu(!0)),wu){var n=bu.apply(null,t);wu(n)}}function su(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ou.apply(void 0,As([n],t))}}function au(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+bu.apply(void 0,As(t));gu.error(n)}function uu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+bu.apply(void 0,As(t));throw gu.error(n),new Error(n)}function cu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+bu.apply(void 0,As(t));gu.warn(n)}function hu(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function lu(t,e){return t===e?0:t<e?-1:1}function fu(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Js(e))}function pu(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var du,vu=nu("localStorage"),yu=nu("sessionStorage"),gu=new Ra("@firebase/database"),mu=(du=1,function(){return du++}),bu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=bu.apply(null,i):n+="object"==typeof i?Js(i):i,n+=" "}return n},wu=null,_u=!0,Eu="[MIN_NAME]",Iu="[MAX_NAME]",Tu=function(t,e){if(t===e)return 0;if(t===Eu||e===Iu)return-1;if(e===Eu||t===Iu)return 1;var n=Ru(t),r=Ru(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Su=function(t){if("object"!=typeof t||null===t)return Js(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Js(e[i]),r+=":",r+=Su(t[e[i]]);return r+="}"};function Cu(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Nu(t){var e,n,r,i,o;Ds(!hu(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;--o)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Au(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw cu("Exception was thrown by user callback.",t),e},Math.floor(0))}}function ku(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var Ou=new RegExp("^-?(0*)\\d{1,10}$"),Ru=function(t){if(Ou.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},Pu=(Object.defineProperty(Du,"Empty",{get:function(){return new Du("")},enumerable:!0,configurable:!0}),Du.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Du.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Du.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Du(this.pieces_,t)},Du.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Du.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Du.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Du.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Du.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Du(t,0)},Du.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Du)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new Du(e,0)},Du.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Du.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Du.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Du.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Tu(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Du.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Du.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Du);function Du(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var xu=(Object.defineProperty(Lu,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(Lu,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),Lu.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=pa(t),this.checkValid_()},Lu.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=pa(t),0<this.parts_.length&&--this.byteLength_},Lu.prototype.checkValid_=function(){if(this.byteLength_>Lu.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Lu.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Lu.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Lu.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Lu.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Lu);function Lu(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=pa(this.parts_[n]);this.checkValid_()}var Mu="firebaseio.com",Fu="websocket",Uu="long_polling",ju=(Vu.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Vu.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Vu.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Vu.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Vu.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&vu.set("host:"+this.host,this.internalHost))},Vu.prototype.connectionURL=function(t,e){var n;if(Ds("string"==typeof t,"typeof type must == string"),Ds("object"==typeof e,"typeof params must == object"),t===Fu)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Uu)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Cu(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Vu.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Vu.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Vu);function Vu(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=vu.get("host:"+t)||this.host}function qu(t){var e=Zu(t),n=e.namespace;"firebase.com"===e.domain&&uu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||uu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&cu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new ju(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Pu(e.pathString)}}function Bu(t){return"string"==typeof t&&0!==t.length&&!tc.test(t)}function Wu(t){return"string"==typeof t&&0!==t.length&&!ec.test(t)}function Hu(t){return null===t||"string"==typeof t||"number"==typeof t&&!hu(t)||t&&"object"==typeof t&&Zs(t,".sv")}function Gu(t,e,n,r,i){i&&void 0===n||rc(ha(t,e,i),n,r)}function Qu(t,e,n,r,i){if(!i||void 0!==n){var o=ha(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Cu(n,function(t,e){var n=new Pu(t);if(rc(o,e,r.child(n)),".priority"===n.getBack()&&!Hu(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Bu(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Pu.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function Ku(t,e,n,r){if(!r||void 0!==n){if(hu(n))throw new Error(ha(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Hu(n))throw new Error(ha(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function zu(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ha(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Yu(t,e,n,r){if(!(r&&void 0===n||Bu(n)))throw new Error(ha(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Xu(t,e,n,r){if(!(r&&void 0===n||Wu(n)))throw new Error(ha(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Ju(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function $u(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Bu(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Wu(r)))throw new Error(ha(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Zu=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");0<=c&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Cs(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):cu("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));0<=(c=e.indexOf(":"))?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},tc=/[\[\].#$\/\u0000-\u001F\u007F]/,ec=/[\[\].#$\u0000-\u001F\u007F]/,nc=10485760,rc=function(n,t,e){var r=e instanceof Pu?new xu(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(hu(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>nc/3&&pa(t)>nc)throw new Error(n+"contains a string greater than "+nc+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Cu(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Bu(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),rc(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ic=(oc.prototype.cancel=function(t){ca("OnDisconnect.cancel",0,1,arguments.length),la("OnDisconnect.cancel",1,t,!0);var e=new Us;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},oc.prototype.remove=function(t){ca("OnDisconnect.remove",0,1,arguments.length),Ju("OnDisconnect.remove",this.path_),la("OnDisconnect.remove",1,t,!0);var e=new Us;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},oc.prototype.set=function(t,e){ca("OnDisconnect.set",1,2,arguments.length),Ju("OnDisconnect.set",this.path_),Gu("OnDisconnect.set",1,t,this.path_,!1),la("OnDisconnect.set",2,e,!0);var n=new Us;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},oc.prototype.setWithPriority=function(t,e,n){ca("OnDisconnect.setWithPriority",2,3,arguments.length),Ju("OnDisconnect.setWithPriority",this.path_),Gu("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ku("OnDisconnect.setWithPriority",2,e,!1),la("OnDisconnect.setWithPriority",3,n,!0);var r=new Us;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},oc.prototype.update=function(t,e){if(ca("OnDisconnect.update",1,2,arguments.length),Ju("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,cu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qu("OnDisconnect.update",1,t,this.path_,!1),la("OnDisconnect.update",2,e,!0);var i=new Us;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},oc);function oc(t,e){this.repo_=t,this.path_=e}var sc=(ac.prototype.toJSON=function(){return ca("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},ac);function ac(t,e){this.committed=t,this.snapshot=e}var uc,cc,hc,lc=(uc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cc=0,hc=[],function(t){var e,n=t===cc;cc=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=uc.charAt(t%64),t=Math.floor(t/64);Ds(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===hc[e];e--)hc[e]=0;hc[e]++}else for(e=0;e<12;e++)hc[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=uc.charAt(hc[e]);return Ds(20===i.length,"nextPushId: Length should be 20."),i}),fc=(pc.Wrap=function(t,e){return new pc(t,e)},pc);function pc(t,e){this.name=t,this.node=e}var dc,vc=(yc.prototype.getCompare=function(){return this.compare.bind(this)},yc.prototype.indexedValueChanged=function(t,e){var n=new fc(Eu,t),r=new fc(Eu,e);return 0!==this.compare(n,r)},yc.prototype.minPost=function(){return fc.MIN},yc);function yc(){}var gc,mc=(Es(bc,gc=vc),Object.defineProperty(bc,"__EMPTY_NODE",{get:function(){return dc},set:function(t){dc=t},enumerable:!0,configurable:!0}),bc.prototype.compare=function(t,e){return Tu(t.name,e.name)},bc.prototype.isDefinedOn=function(t){throw xs("KeyIndex.isDefinedOn not expected to be called.")},bc.prototype.indexedValueChanged=function(t,e){return!1},bc.prototype.minPost=function(){return fc.MIN},bc.prototype.maxPost=function(){return new fc(Iu,dc)},bc.prototype.makePost=function(t,e){return Ds("string"==typeof t,"KeyIndex indexValue must always be a string."),new fc(t,dc)},bc.prototype.toString=function(){return".key"},bc);function bc(){return null!==gc&&gc.apply(this,arguments)||this}var wc,_c=new mc;function Ec(t){return"number"==typeof t?"number:"+Nu(t):"string:"+t}function Ic(t){if(t.isLeafNode()){var e=t.val();Ds("string"==typeof e||"number"==typeof e||"object"==typeof e&&Zs(e,".sv"),"Priority must be a string or number.")}else Ds(t===wc||t.isEmpty(),"priority of unexpected type.");Ds(t===wc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var Tc,Sc,Cc,Nc,Ac=(Object.defineProperty(kc,"__childrenNodeConstructor",{get:function(){return Tc},set:function(t){Tc=t},enumerable:!0,configurable:!0}),kc.prototype.isLeafNode=function(){return!0},kc.prototype.getPriority=function(){return this.priorityNode_},kc.prototype.updatePriority=function(t){return new kc(this.value_,t)},kc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:kc.__childrenNodeConstructor.EMPTY_NODE},kc.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:kc.__childrenNodeConstructor.EMPTY_NODE},kc.prototype.hasChild=function(){return!1},kc.prototype.getPredecessorChildName=function(t,e){return null},kc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:kc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},kc.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Ds(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,kc.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},kc.prototype.isEmpty=function(){return!1},kc.prototype.numChildren=function(){return 0},kc.prototype.forEachChild=function(t,e){return!1},kc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},kc.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ec(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"==e?Nu(this.value_):this.value_,this.lazyHash_=ru(t)}return this.lazyHash_},kc.prototype.getValue=function(){return this.value_},kc.prototype.compareTo=function(t){return t===kc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof kc.__childrenNodeConstructor?-1:(Ds(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},kc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=kc.VALUE_TYPE_ORDER.indexOf(e),i=kc.VALUE_TYPE_ORDER.indexOf(n);return Ds(0<=r,"Unknown leaf type: "+e),Ds(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},kc.prototype.withIndex=function(){return this},kc.prototype.isIndexed=function(){return!0},kc.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},kc.VALUE_TYPE_ORDER=["object","boolean","number","string"],kc);function kc(t,e){void 0===e&&(e=kc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Ds(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ic(this.priorityNode_)}function Oc(){return null!==Nc&&Nc.apply(this,arguments)||this}var Rc=new(Es(Oc,Nc=vc),Oc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Tu(t.name,e.name):i},Oc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Oc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Oc.prototype.minPost=function(){return fc.MIN},Oc.prototype.maxPost=function(){return new fc(Iu,new Ac("[PRIORITY-POST]",Cc))},Oc.prototype.makePost=function(t,e){var n=Sc(t);return new fc(e,new Ac("[PRIORITY-POST]",n))},Oc.prototype.toString=function(){return".priority"},Oc),Pc=(Dc.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},Dc.prototype.hasNext=function(){return 0<this.nodeStack_.length},Dc.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Dc);function Dc(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var xc=(Lc.prototype.copy=function(t,e,n,r,i){return new Lc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Lc.prototype.count=function(){return this.left.count()+1+this.right.count()},Lc.prototype.isEmpty=function(){return!1},Lc.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Lc.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Lc.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Lc.prototype.minKey=function(){return this.min_().key},Lc.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Lc.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Lc.prototype.removeMin_=function(){if(this.left.isEmpty())return Uc.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Lc.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Uc.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},Lc.prototype.isRed_=function(){return this.color},Lc.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Lc.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Lc.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Lc.prototype.rotateLeft_=function(){var t=this.copy(null,null,Lc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Lc.prototype.rotateRight_=function(){var t=this.copy(null,null,Lc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Lc.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Lc.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Lc.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Lc.RED=!0,Lc.BLACK=!1,Lc);function Lc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Lc.RED,this.left=null!=r?r:Uc.EMPTY_NODE,this.right=null!=i?i:Uc.EMPTY_NODE}var Mc=(Fc.prototype.copy=function(t,e,n,r,i){return this},Fc.prototype.insert=function(t,e,n){return new xc(t,e,null)},Fc.prototype.remove=function(t,e){return this},Fc.prototype.count=function(){return 0},Fc.prototype.isEmpty=function(){return!0},Fc.prototype.inorderTraversal=function(t){return!1},Fc.prototype.reverseTraversal=function(t){return!1},Fc.prototype.minKey=function(){return null},Fc.prototype.maxKey=function(){return null},Fc.prototype.check_=function(){return 0},Fc.prototype.isRed_=function(){return!1},Fc);function Fc(){}var Uc=(jc.prototype.insert=function(t,e){return new jc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,xc.BLACK,null,null))},jc.prototype.remove=function(t){return new jc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,xc.BLACK,null,null))},jc.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},jc.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},jc.prototype.isEmpty=function(){return this.root_.isEmpty()},jc.prototype.count=function(){return this.root_.count()},jc.prototype.minKey=function(){return this.root_.minKey()},jc.prototype.maxKey=function(){return this.root_.maxKey()},jc.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},jc.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},jc.prototype.getIterator=function(t){return new Pc(this.root_,null,this.comparator_,!1,t)},jc.prototype.getIteratorFrom=function(t,e){return new Pc(this.root_,t,this.comparator_,!1,e)},jc.prototype.getReverseIteratorFrom=function(t,e){return new Pc(this.root_,t,this.comparator_,!0,e)},jc.prototype.getReverseIterator=function(t){return new Pc(this.root_,null,this.comparator_,!0,t)},jc.EMPTY_NODE=new Mc,jc);function jc(t,e){void 0===e&&(e=jc.EMPTY_NODE),this.comparator_=t,this.root_=e}var Vc=Math.log(2),qc=(Bc.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Bc);function Bc(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Vc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Wc,Hc,Gc=function(c,t,h,e){c.sort(t);var l=function(t,e){var n,r,i=e-t;if(0==i)return null;if(1==i)return n=c[t],r=h?h(n):n,new xc(r,n.node,xc.BLACK,null,null);var o=parseInt(i/2,10)+t,s=l(t,o),a=l(o+1,e);return n=c[o],r=h?h(n):n,new xc(r,n.node,xc.BLACK,s,a)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new xc(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,xc.BLACK):(r(s,xc.BLACK),r(s,xc.RED))}return n}(new qc(c.length));return new Uc(e||t,n)},Qc={},Kc=(Object.defineProperty(zc,"Default",{get:function(){return Ds(Rc,"ChildrenNode.ts has not been loaded"),Wc=Wc||new zc({".priority":Qc},{".priority":Rc})},enumerable:!0,configurable:!0}),zc.prototype.get=function(t){var e=ta(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Uc?e:null},zc.prototype.hasIndex=function(t){return Zs(this.indexSet_,t.toString())},zc.prototype.addIndex=function(t,e){Ds(t!==_c,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(fc.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Gc(r,t.getCompare()):Qc;var a=t.toString(),u=Is({},this.indexSet_);u[a]=t;var c=Is({},this.indexes_);return c[a]=n,new zc(c,u)},zc.prototype.addToIndexes=function(u,c){var h=this;return new zc(na(this.indexes_,function(t,e){var n=ta(h.indexSet_,e);if(Ds(n,"Missing index implementation for "+e),t===Qc){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(fc.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),Gc(r,n.getCompare())}return Qc}var s=c.get(u.name),a=t;return s&&(a=a.remove(new fc(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},zc.prototype.removeFromIndexes=function(n,r){return new zc(na(this.indexes_,function(t){if(t===Qc)return t;var e=r.get(n.name);return e?t.remove(new fc(n.name,e)):t}),this.indexSet_)},zc);function zc(t,e){this.indexes_=t,this.indexSet_=e}function Yc(t,e){return Tu(t.name,e.name)}function Xc(t,e){return Tu(t,e)}var Jc,$c=(Object.defineProperty(Zc,"EMPTY_NODE",{get:function(){return Hc=Hc||new Zc(new Uc(Xc),null,Kc.Default)},enumerable:!0,configurable:!0}),Zc.prototype.isLeafNode=function(){return!1},Zc.prototype.getPriority=function(){return this.priorityNode_||Hc},Zc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Zc(this.children_,t,this.indexMap_)},Zc.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Hc:e},Zc.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Zc.prototype.hasChild=function(t){return null!==this.children_.get(t)},Zc.prototype.updateImmediateChild=function(t,e){if(Ds(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new fc(t,e),r=void 0,i=void 0;i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_));var o=r.isEmpty()?Hc:this.priorityNode_;return new Zc(r,o,i)},Zc.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Ds(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},Zc.prototype.isEmpty=function(){return this.children_.isEmpty()},Zc.prototype.numChildren=function(){return this.children_.count()},Zc.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Rc,function(t,e){r[t]=e.val(n),i++,s&&Zc.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Zc.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+Ec(this.getPriority().val())+":"),this.forEachChild(Rc,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":ru(r)}return this.lazyHash_},Zc.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new fc(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},Zc.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},Zc.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new fc(e,this.children_.get(e)):null},Zc.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},Zc.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new fc(e,this.children_.get(e)):null},Zc.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Zc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Zc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,fc.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Zc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Zc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,fc.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Zc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===eh?-1:0},Zc.prototype.withIndex=function(t){if(t===_c||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new Zc(this.children_,this.priorityNode_,e)},Zc.prototype.isIndexed=function(t){return t===_c||this.indexMap_.hasIndex(t)},Zc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(Rc),r=e.getIterator(Rc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Zc.prototype.resolveIndex_=function(t){return t===_c?null:this.indexMap_.get(t.toString())},Zc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Zc);function Zc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ic(this.priorityNode_),this.children_.isEmpty()&&Ds(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function th(){return Jc.call(this,new Uc(Xc),$c.EMPTY_NODE,Kc.Default)||this}var eh=new(Es(th,Jc=$c),th.prototype.compareTo=function(t){return t===this?0:1},th.prototype.equals=function(t){return t===this},th.prototype.getPriority=function(){return this},th.prototype.getImmediateChild=function(t){return $c.EMPTY_NODE},th.prototype.isEmpty=function(){return!1},th);Object.defineProperties(fc,{MIN:{value:new fc(Eu,$c.EMPTY_NODE)},MAX:{value:new fc(Iu,eh)}}),mc.__EMPTY_NODE=$c.EMPTY_NODE,Ac.__childrenNodeConstructor=$c,wc=eh,Cc=eh;var nh,rh=!0;function ih(r,t){if(void 0===t&&(t=null),null===r)return $c.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),Ds(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Ac(r,ih(t));if(r instanceof Array||!rh){var i=$c.EMPTY_NODE;return Cu(r,function(t,e){if(Zs(r,t)&&"."!==t.substring(0,1)){var n=ih(e);!n.isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n))}}),i.updatePriority(ih(t))}var o=[],s=!1;if(Cu(r,function(t,e){if("."!==t.substring(0,1)){var n=ih(e);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new fc(t,n)))}}),0===o.length)return $c.EMPTY_NODE;var e=Gc(o,Yc,function(t){return t.name},Xc);if(s){var n=Gc(o,Rc.getCompare());return new $c(e,ih(t),new Kc({".priority":n},{".priority":Rc}))}return new $c(e,ih(t),Kc.Default)}function oh(){return null!==nh&&nh.apply(this,arguments)||this}Sc=ih;var sh,ah=new(Es(oh,nh=vc),oh.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Tu(t.name,e.name):n},oh.prototype.isDefinedOn=function(t){return!0},oh.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},oh.prototype.minPost=function(){return fc.MIN},oh.prototype.maxPost=function(){return fc.MAX},oh.prototype.makePost=function(t,e){var n=ih(t);return new fc(e,n)},oh.prototype.toString=function(){return".value"},oh),uh=(Es(ch,sh=vc),ch.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ch.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ch.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Tu(t.name,e.name):i},ch.prototype.makePost=function(t,e){var n=ih(t),r=$c.EMPTY_NODE.updateChild(this.indexPath_,n);return new fc(e,r)},ch.prototype.maxPost=function(){var t=$c.EMPTY_NODE.updateChild(this.indexPath_,eh);return new fc(Iu,t)},ch.prototype.toString=function(){return this.indexPath_.slice().join("/")},ch);function ch(t){var e=sh.call(this)||this;return e.indexPath_=t,Ds(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var hh=(lh.prototype.val=function(){return ca("DataSnapshot.val",0,0,arguments.length),this.node_.val()},lh.prototype.exportVal=function(){return ca("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},lh.prototype.toJSON=function(){return ca("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},lh.prototype.exists=function(){return ca("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},lh.prototype.child=function(t){ca("DataSnapshot.child",0,1,arguments.length),t=String(t),Xu("DataSnapshot.child",1,t,!1);var e=new Pu(t),n=this.ref_.child(e);return new lh(this.node_.getChild(e),n,Rc)},lh.prototype.hasChild=function(t){ca("DataSnapshot.hasChild",1,1,arguments.length),Xu("DataSnapshot.hasChild",1,t,!1);var e=new Pu(t);return!this.node_.getChild(e).isEmpty()},lh.prototype.getPriority=function(){return ca("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},lh.prototype.forEach=function(n){var r=this;return ca("DataSnapshot.forEach",1,1,arguments.length),la("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new lh(e,r.ref_.child(t),Rc))})},lh.prototype.hasChildren=function(){return ca("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(lh.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),lh.prototype.numChildren=function(){return ca("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},lh.prototype.getRef=function(){return ca("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(lh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),lh);function lh(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var fh=(ph.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},ph.prototype.getEventType=function(){return this.eventType},ph.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},ph.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Js(this.snapshot.exportVal())},ph);function ph(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var dh=(vh.prototype.getPath=function(){return this.path},vh.prototype.getEventType=function(){return"cancel"},vh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},vh.prototype.toString=function(){return this.path.toString()+":cancel"},vh);function vh(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var yh=(gh.prototype.respondsTo=function(t){return"value"===t},gh.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new fh("value",this,new hh(t.snapshotNode,e.getRef(),n))},gh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ds(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},gh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new dh(this,t,e):null},gh.prototype.matches=function(t){return t instanceof gh&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},gh.prototype.hasAnyCallback=function(){return null!==this.callback_},gh);function gh(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var mh,bh=(wh.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Zs(this.callbacks_,e)},wh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new dh(this,t,e):null},wh.prototype.createEvent=function(t,e){Ds(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new fh(t.type,this,new hh(t.snapshotNode,n,r),t.prevName)},wh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ds(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},wh.prototype.matches=function(e){var n=this;if(e instanceof wh){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},wh.prototype.hasAnyCallback=function(){return null!==this.callbacks_},wh);function wh(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var _h=(Object.defineProperty(Eh,"__referenceConstructor",{get:function(){return Ds(mh,"Reference.ts has not been loaded"),mh},set:function(t){mh=t},enumerable:!0,configurable:!0}),Eh.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===_c){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Eu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Iu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Rc){if(null!=e&&!Hu(e)||null!=n&&!Hu(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ds(t.getIndex()instanceof uh||t.getIndex()===ah,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},Eh.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},Eh.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Eh.prototype.getQueryParams=function(){return this.queryParams_},Eh.prototype.getRef=function(){return ca("Query.ref",0,0,arguments.length),new Eh.__referenceConstructor(this.repo,this.path)},Eh.prototype.on=function(t,e,n,r){ca("Query.on",2,4,arguments.length),zu("Query.on",1,t,!1),la("Query.on",2,e,!1);var i=Eh.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},Eh.prototype.onValueEvent=function(t,e,n){var r=new yh(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},Eh.prototype.onChildEvent=function(t,e,n){var r=new bh(t,e,n);this.repo.addEventCallbackForQuery(this,r)},Eh.prototype.off=function(t,e,n){ca("Query.off",0,3,arguments.length),zu("Query.off",1,t,!0),la("Query.off",2,e,!0),fa("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new yh(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new bh(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Eh.prototype.once=function(e,n,t,r){var i=this;ca("Query.once",1,4,arguments.length),zu("Query.once",1,e,!1),la("Query.once",2,n,!0);var o=Eh.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Us;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},Eh.prototype.limitToFirst=function(t){if(ca("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Eh(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},Eh.prototype.limitToLast=function(t){if(ca("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Eh(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},Eh.prototype.orderByChild=function(t){if(ca("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Xu("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Pu(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new uh(e),r=this.queryParams_.orderBy(n);return Eh.validateQueryEndpoints_(r),new Eh(this.repo,this.path,r,!0)},Eh.prototype.orderByKey=function(){ca("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(_c);return Eh.validateQueryEndpoints_(t),new Eh(this.repo,this.path,t,!0)},Eh.prototype.orderByPriority=function(){ca("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Rc);return Eh.validateQueryEndpoints_(t),new Eh(this.repo,this.path,t,!0)},Eh.prototype.orderByValue=function(){ca("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(ah);return Eh.validateQueryEndpoints_(t),new Eh(this.repo,this.path,t,!0)},Eh.prototype.startAt=function(t,e){void 0===t&&(t=null),ca("Query.startAt",0,2,arguments.length),Gu("Query.startAt",1,t,this.path,!0),Yu("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(Eh.validateLimit_(n),Eh.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Eh(this.repo,this.path,n,this.orderByCalled_)},Eh.prototype.endAt=function(t,e){void 0===t&&(t=null),ca("Query.endAt",0,2,arguments.length),Gu("Query.endAt",1,t,this.path,!0),Yu("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(Eh.validateLimit_(n),Eh.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Eh(this.repo,this.path,n,this.orderByCalled_)},Eh.prototype.equalTo=function(t,e){if(ca("Query.equalTo",1,2,arguments.length),Gu("Query.equalTo",1,t,this.path,!1),Yu("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},Eh.prototype.toString=function(){return ca("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Eh.prototype.toJSON=function(){return ca("Query.toJSON",0,1,arguments.length),this.toString()},Eh.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Eh.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Su(t);return"{}"===e?"default":e},Eh.prototype.isEqual=function(t){if(ca("Query.isEqual",1,1,arguments.length),!(t instanceof Eh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},Eh.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,la(t,3,r.cancel,!0),r.context=n,fa(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ha(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Eh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Eh);function Eh(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Ih=(Th.prototype.getImmediateChild=function(t){return new Th(this.node_.getImmediateChild(t))},Th.prototype.node=function(){return this.node_},Th);function Th(t){this.node_=t}var Sh=(Ch.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new Ch(this.syncTree_,e)},Ch.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},Ch);function Ch(t,e){this.syncTree_=t,this.path_=e}function Nh(t,e,n,r){return Ph(e,new Sh(n,t),r)}function Ah(t,e,n){return Ph(t,new Ih(e),n)}var kh=function(t,e,n){return t&&"object"==typeof t?(Ds(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Oh(t[".sv"],e,n):"object"==typeof t[".sv"]?Rh(t[".sv"],e):void Ds(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Oh=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ds(!1,"Unexpected server value: "+t)}},Rh=function(t,e,n){t.hasOwnProperty("increment")||Ds(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Ds(!1,"Unexpected increment value: "+r);var i=e.node();if(Ds(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function Ph(t,r,i){var o,e=t.getPriority().val(),n=kh(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var s=t,a=kh(s.getValue(),r,i);return a!==s.getValue()||n!==s.getPriority().val()?new Ac(a,ih(n)):t}var u=t;return n!==(o=u).getPriority().val()&&(o=o.updatePriority(new Ac(n))),u.forEachChild(Rc,function(t,e){var n=Ph(e,r.getImmediateChild(t),i);n!==e&&(o=o.updateImmediateChild(t,n))}),o}var Dh,xh,Lh=(Mh.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Mh.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new Mh);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},Mh.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Rc,function(t,e){n.remember(new Pu(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},Mh.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new Pu(r.toString()+"/"+t);e.forEachTree(n,i)})},Mh.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Mh);function Mh(){this.value=null,this.children=new Map}(xh=Dh=Dh||{})[xh.OVERWRITE=0]="OVERWRITE",xh[xh.MERGE=1]="MERGE",xh[xh.ACK_USER_WRITE=2]="ACK_USER_WRITE",xh[xh.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Fh=(Uh.User=new Uh(!0,!1,null,!1),Uh.Server=new Uh(!1,!0,null,!1),Uh.forServerTaggedQuery=function(t){return new Uh(!1,!0,t,!0)},Uh);function Uh(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Ds(!r||e,"Tagged queries must be from server.")}var jh,Vh=(qh.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Ds(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Pu(t));return new qh(Pu.Empty,e,this.revert)}return Ds(this.path.getFront()===t,"operationForChild called for unrelated child."),new qh(this.path.popFront(),this.affectedTree,this.revert)},qh);function qh(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Dh.ACK_USER_WRITE,this.source=Fh.User}var Bh=(Wh.fromObject=function(t){var n=Wh.Empty;return Cu(t,function(t,e){n=n.set(new Pu(t),e)}),n},Wh.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Wh.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Pu.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new Pu(n).child(i.path),value:i.value}},Wh.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Wh.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):Wh.Empty},Wh.prototype.set=function(t,e){if(t.isEmpty())return new Wh(e,this.children);var n=t.getFront(),r=(this.children.get(n)||Wh.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new Wh(this.value,i)},Wh.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Wh.Empty:new Wh(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?Wh.Empty:new Wh(this.value,i)}return this},Wh.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},Wh.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||Wh.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Wh(this.value,i)},Wh.prototype.fold=function(t){return this.fold_(Pu.Empty,t)},Wh.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Wh.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Pu.Empty,e)},Wh.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},Wh.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Pu.Empty,e)},Wh.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Wh.Empty},Wh.prototype.foreach=function(t){this.foreach_(Pu.Empty,t)},Wh.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Wh.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Wh.Empty=new Wh(null),Wh);function Wh(t,e){void 0===e&&(e=jh=jh||new Uc(lu)),this.value=t,this.children=e}var Hh=(Gh.prototype.operationForChild=function(t){return this.path.isEmpty()?new Gh(this.source,Pu.Empty):new Gh(this.source,this.path.popFront())},Gh);function Gh(t,e){this.source=t,this.path=e,this.type=Dh.LISTEN_COMPLETE}var Qh=(Kh.prototype.operationForChild=function(t){return this.path.isEmpty()?new Kh(this.source,Pu.Empty,this.snap.getImmediateChild(t)):new Kh(this.source,this.path.popFront(),this.snap)},Kh);function Kh(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Dh.OVERWRITE}var zh=(Yh.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Pu(t));return e.isEmpty()?null:e.value?new Qh(this.source,Pu.Empty,e.value):new Yh(this.source,Pu.Empty,e)}return Ds(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Yh(this.source,this.path.popFront(),this.children)},Yh.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Yh);function Yh(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Dh.MERGE}var Xh=(Jh.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Jh.prototype.isFiltered=function(){return this.filtered_},Jh.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},Jh.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Jh.prototype.getNode=function(){return this.node_},Jh);function Jh(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var $h=(Zh.prototype.updateEventSnap=function(t,e,n){return new Zh(new Xh(t,e,n),this.serverCache_)},Zh.prototype.updateServerSnap=function(t,e,n){return new Zh(this.eventCache_,new Xh(t,e,n))},Zh.prototype.getEventCache=function(){return this.eventCache_},Zh.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Zh.prototype.getServerCache=function(){return this.serverCache_},Zh.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Zh.Empty=new Zh(new Xh($c.EMPTY_NODE,!1,!1),new Xh($c.EMPTY_NODE,!1,!1)),Zh);function Zh(t,e){this.eventCache_=t,this.serverCache_=e}var tl=(el.valueChange=function(t){return new el(el.VALUE,t)},el.childAddedChange=function(t,e){return new el(el.CHILD_ADDED,e,t)},el.childRemovedChange=function(t,e){return new el(el.CHILD_REMOVED,e,t)},el.childChangedChange=function(t,e,n){return new el(el.CHILD_CHANGED,e,t,n)},el.childMovedChange=function(t,e){return new el(el.CHILD_MOVED,e,t)},el.CHILD_ADDED="child_added",el.CHILD_REMOVED="child_removed",el.CHILD_CHANGED="child_changed",el.CHILD_MOVED="child_moved",el.VALUE="value",el);function el(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var nl=(rl.prototype.updateChild=function(t,e,n,r,i,o){Ds(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(tl.childRemovedChange(e,s)):Ds(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(tl.childAddedChange(e,n)):o.trackChildChange(tl.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},rl.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Rc,function(t,e){n.hasChild(t)||i.trackChildChange(tl.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Rc,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(tl.childChangedChange(t,e,n))}else i.trackChildChange(tl.childAddedChange(t,e))})),n.withIndex(this.index_)},rl.prototype.updatePriority=function(t,e){return t.isEmpty()?$c.EMPTY_NODE:t.updatePriority(e)},rl.prototype.filtersNodes=function(){return!1},rl.prototype.getIndexedFilter=function(){return this},rl.prototype.getIndex=function(){return this.index_},rl);function rl(t){this.index_=t}var il=(ol.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Ds(e===tl.CHILD_ADDED||e===tl.CHILD_CHANGED||e===tl.CHILD_REMOVED,"Only child changes supported for tracking"),Ds(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===tl.CHILD_ADDED&&i===tl.CHILD_REMOVED)this.changeMap.set(n,tl.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===tl.CHILD_REMOVED&&i===tl.CHILD_ADDED)this.changeMap.delete(n);else if(e===tl.CHILD_REMOVED&&i===tl.CHILD_CHANGED)this.changeMap.set(n,tl.childRemovedChange(n,r.oldSnap));else if(e===tl.CHILD_CHANGED&&i===tl.CHILD_ADDED)this.changeMap.set(n,tl.childAddedChange(n,t.snapshotNode));else{if(e!==tl.CHILD_CHANGED||i!==tl.CHILD_CHANGED)throw xs("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,tl.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},ol.prototype.getChanges=function(){return Array.from(this.changeMap.values())},ol);function ol(){this.changeMap=new Map}function sl(){}var al=new(sl.prototype.getCompleteChild=function(t){return null},sl.prototype.getChildAfterChild=function(t,e,n){return null},sl),ul=(cl.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Xh(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},cl.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},cl);function cl(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var hl=function(t,e){this.viewCache=t,this.changes=e},ll=(fl.prototype.assertIndexed=function(t){Ds(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Ds(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},fl.prototype.applyOperation=function(t,e,n,r){var i,o,s=new il;if(e.type===Dh.OVERWRITE){var a=e;i=a.source.fromUser?this.applyUserOverwrite_(t,a.path,a.snap,n,r,s):(Ds(a.source.fromServer,"Unknown source."),o=a.source.tagged||t.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(t,a.path,a.snap,n,r,o,s))}else if(e.type===Dh.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,s):(Ds(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,s))}else if(e.type===Dh.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,s):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,s)}else{if(e.type!==Dh.LISTEN_COMPLETE)throw xs("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,s)}var h=s.getChanges();return fl.maybeAddValueEvent_(t,i,h),new hl(i,h)},fl.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(tl.valueChange(e.getCompleteEventSnap()))}},fl.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(Ds(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof $c?u:$c.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){Ds(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},fl.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,al,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new ul(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},fl.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new ul(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):$c.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},fl.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},fl.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);fl.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);fl.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},fl.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},fl.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,l=o;n=t.isEmpty()?e:Bh.Empty.setTree(t,e);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(f.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e);l=h.applyServerOverwrite_(l,new Pu(t),r,s,a,u,c)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!f.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=h.applyMerge_(r,e);l=h.applyServerOverwrite_(l,new Pu(t),i,s,a,u,c)}}),l},fl.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Bh.Empty;return a.getNode().forEachChild(_c,function(t,e){u=u.set(new Pu(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Bh.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},fl.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,al,r)},fl.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new ul(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Ds(h instanceof $c,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,$c.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Pu.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},fl);function fl(t){this.filter_=t}var pl=(dl.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===tl.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(tl.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,tl.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,tl.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,tl.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,tl.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,tl.VALUE,t,n,e),i},dl.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},dl.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},dl.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw xs("Should only compare child_ events.");var n=new fc(t.childName,t.snapshotNode),r=new fc(e.childName,e.snapshotNode);return this.index_.compare(n,r)},dl);function dl(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var vl,yl=(gl.prototype.getQuery=function(){return this.query_},gl.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},gl.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},gl.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},gl.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},gl.prototype.removeEventRegistration=function(t,n){var r=[];if(n){Ds(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},gl.prototype.applyOperation=function(t,e,n){t.type===Dh.MERGE&&null!==t.source.queryId&&(Ds(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Ds(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Ds(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},gl.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Rc,function(t,e){n.push(tl.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(tl.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},gl.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},gl);function gl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new nl(n.getIndex()),i=n.getNodeFilter();this.processor_=new ll(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode($c.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode($c.EMPTY_NODE,s.getNode(),null),c=new Xh(a,o.isFullyInitialized(),r.filtersNodes()),h=new Xh(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new $h(h,c),this.eventGenerator_=new pl(this.query_)}var ml=(Object.defineProperty(bl,"__referenceConstructor",{get:function(){return Ds(vl,"Reference.ts has not been loaded"),vl},set:function(t){Ds(!vl,"__referenceConstructor has already been defined"),vl=t},enumerable:!0,configurable:!0}),bl.prototype.isEmpty=function(){return 0===this.views.size},bl.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Ds(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Cs(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},bl.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;u=!!a||(a=r instanceof $c?n.calcCompleteEventChildren(r):$c.EMPTY_NODE,!1);var c=new $h(new Xh(a,u,!1),new Xh(r,i,!1));s=new yl(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},bl.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Cs(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Ns(h.value,2),f=l[0],p=l[1];a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new bl.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},bl.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=Cs(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},bl.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Cs(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},bl.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},bl.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},bl.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},bl.prototype.getCompleteView=function(){var e,t;try{for(var n=Cs(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},bl);function bl(){this.views=new Map}var wl=(_l.prototype.addWrite=function(t,e){if(t.isEmpty())return new _l(new Bh(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=Pu.relativePath(r,t);return i=i.updateChild(o,e),new _l(this.writeTree_.set(r,i))}var s=new Bh(e);return new _l(this.writeTree_.setTree(t,s))},_l.prototype.addWrites=function(n,t){var r=this;return Cu(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},_l.prototype.removeWrite=function(t){return t.isEmpty()?_l.Empty:new _l(this.writeTree_.setTree(t,Bh.Empty))},_l.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},_l.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Pu.relativePath(e.path,t)):null},_l.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Rc,function(t,e){n.push(new fc(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new fc(t,e.value))}),n},_l.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new _l(null!=e?new Bh(e):this.writeTree_.subtree(t))},_l.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},_l.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Ds(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(Pu.Empty,this.writeTree_,t)},_l.Empty=new _l(new Bh(null)),_l);function _l(t){this.writeTree_=t}var El=(Il.prototype.childWrites=function(t){return new Tl(t,this)},Il.prototype.addOverwrite=function(t,e,n,r){Ds(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Il.prototype.addMerge=function(t,e,n){Ds(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Il.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Il.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Ds(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Cu(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},Il.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Il.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Pu.Empty)){var o=Il.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return u=t||$c.EMPTY_NODE,o.apply(u)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);if(a.isEmpty())return t;if(null!=t||a.hasCompleteWrite(Pu.Empty)){var u=t||$c.EMPTY_NODE;return a.apply(u)}return null},Il.prototype.calcCompleteEventChildren=function(t,e){var r=$c.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(Rc,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Rc,function(t,e){var n=i.childCompoundWrite(new Pu(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},Il.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Ds(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Il.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Il.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Il.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Pu.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},Il.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Il.prototype.resetTree_=function(){this.visibleWrites_=Il.layerTree_(this.allWrites_,Il.DefaultFilter_,Pu.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Il.DefaultFilter_=function(t){return t.visible},Il.layerTree_=function(t,e,n){for(var r=wl.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Pu.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Pu.relativePath(s,n),r=r.addWrite(Pu.Empty,o.snap.getChild(a)));else{if(!o.children)throw xs("WriteRecord should have .snap or .children");if(n.contains(s))a=Pu.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=Pu.relativePath(s,n)).isEmpty())r=r.addWrites(Pu.Empty,o.children);else{var u=ta(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(Pu.Empty,c)}}}}}return r},Il);function Il(){this.visibleWrites_=wl.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Tl=(Sl.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Sl.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Sl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Sl.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Sl.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Sl.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Sl.prototype.child=function(t){return new Sl(this.treePath_.child(t),this.writeTree_)},Sl);function Sl(t,e){this.treePath_=t,this.writeTree_=e}var Cl=(Nl.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Qh(Fh.User,t,e)):[]},Nl.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Bh.fromObject(e);return this.applyOperationToSyncPoints_(new zh(Fh.User,t,r))},Nl.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Bh.Empty;return null!=n.snap?r=r.set(Pu.Empty,!0):Cu(n.children,function(t,e){r=r.set(new Pu(t),e)}),this.applyOperationToSyncPoints_(new Vh(n.path,r,e))}return[]},Nl.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Qh(Fh.Server,t,e))},Nl.prototype.applyServerMerge=function(t,e){var n=Bh.fromObject(e);return this.applyOperationToSyncPoints_(new zh(Fh.Server,t,n))},Nl.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Hh(Fh.Server,t))},Nl.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Nl.parseQueryKey_(r),o=i.path,s=i.queryId,a=Pu.relativePath(o,t),u=new Qh(Fh.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},Nl.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=Nl.parseQueryKey_(r),o=i.path,s=i.queryId,a=Pu.relativePath(o,t),u=Bh.fromObject(e),c=new zh(Fh.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},Nl.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=Nl.parseQueryKey_(n),i=r.path,o=r.queryId,s=Pu.relativePath(i,t),a=new Hh(Fh.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},Nl.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Pu.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Pu.Empty)):(s=new ml,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=$c.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Pu.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a=s.viewExistsForQuery(t);if(!a&&!t.getQueryParams().loadsAllData()){var u=Nl.makeQueryKey_(t);Ds(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=Nl.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var h=this.pendingWriteTree_.childWrites(r),l=s.addEventRegistration(t,e,h,i,n);if(!a&&!o){var f=s.viewForQuery(t);l=l.concat(this.setupListener_(t,f))}return l},Nl.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(Nl.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Nl.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(Nl.makeQueryKey_(t));r.listenProvider_.stopListening(Nl.queryForListening_(t),e)})),this.removeTags_(u)}return s},Nl.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=Pu.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},Nl.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Cu(n,function(t,e){r=r.concat(e)}),r})},Nl.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=Nl.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},Nl.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Nl.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(Nl.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)Ds(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Cu(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(Nl.queryForListening_(c),this.tagForQuery_(c))}return o},Nl.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||$c.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},Nl.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Nl.parseQueryKey_=function(t){var e=t.indexOf("$");return Ds(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Pu(t.substr(0,e))}},Nl.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Nl.prototype.tagForQuery_=function(t){var e=Nl.makeQueryKey_(t);return this.queryToTagMap.get(e)},Nl.getNextQueryTag_=function(){return Nl.nextQueryTag_++},Nl.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Ds(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},Nl.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Pu.Empty))},Nl.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Pu.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Pu.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},Nl.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(Pu.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(Pu.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},Nl.nextQueryTag_=1,Nl);function Nl(t){this.listenProvider_=t,this.syncPointTree_=Bh.Empty,this.pendingWriteTree_=new El,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Al=(kl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},kl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},kl);function kl(){this.rootNode_=$c.EMPTY_NODE}var Ol=(Rl.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(ou("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Rl.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Rl.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Rl.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cu(t)},Rl);function Rl(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Pl=(Dl.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Zs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Dl.prototype.get=function(){return Ms(this.counters_)},Dl);function Dl(){this.counters_={}}var xl=(Ll.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Pl),this.collections_[e]},Ll.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},Ll.collections_={},Ll.reporters_={},Ll);function Ll(){}var Ml=(Fl.prototype.get=function(){var t=this.collection_.get(),n=Is({},t);return this.last_&&Cu(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Fl);function Fl(t){this.collection_=t,this.last_=null}var Ul=(jl.prototype.includeStat=function(t){this.statsToReport_[t]=!0},jl.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Cu(t,function(t,e){0<e&&Zs(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),ku(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},jl);function jl(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ml(t);var n=1e4+2e4*Math.random();ku(this.reportStats_.bind(this),Math.floor(n))}var Vl=(ql.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Bl(i)),e.add(r)}e&&this.eventLists_.push(e)},ql.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},ql.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},ql.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},ql);function ql(){this.eventLists_=[],this.recursionDepth_=0}var Bl=(Wl.prototype.add=function(t){this.events_.push(t)},Wl.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();wu&&ou("event: "+e.toString()),Au(n)}}},Wl.prototype.getPath=function(){return this.path_},Wl);function Wl(t){this.path_=t,this.events_=[]}var Hl=(Gl.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=As(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Gl.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},Gl.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Gl.prototype.validateEventType_=function(e){Ds(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},Gl);function Gl(t){this.allowedEvents_=t,this.listeners_={},Ds(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Ql,zl=(Es(Yl,Ql=Hl),Yl.getInstance=function(){return new Yl},Yl.prototype.getInitialEvent=function(t){return Ds("visible"===t,"Unknown event type: "+t),[this.visible_]},Yl);function Yl(){var e,t,n=Ql.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Xl,Jl=(Es($l,Xl=Hl),$l.getInstance=function(){return new $l},$l.prototype.getInitialEvent=function(t){return Ds("online"===t,"Unknown event type: "+t),[this.online_]},$l.prototype.currentlyOnline=function(){return this.online_},$l);function $l(){var t=Xl.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||qs()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Zl=(tf.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},tf.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&Au(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},tf);function tf(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var ef=(nf.prototype.open=function(t,e){var s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Zl(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!s.isClosed_){s.scriptTagHolder=new rf(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ns(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ns(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Mu)&&(t.r="f");var e=s.urlFn(t);s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){})}})},nf.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},nf.forceAllow=function(){nf.forceAllow_=!0},nf.forceDisallow=function(){nf.forceDisallow_=!0},nf.isAvailable=function(){return!!nf.forceAllow_||!(nf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},nf.prototype.markConnectionHealthy=function(){},nf.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},nf.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},nf.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},nf.prototype.send=function(t){var e=Js(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=Os(e),Ls.encodeByteArray(n,!0)),i=pu(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},nf.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},nf.prototype.incrementIncomingBytes_=function(t){var e=Js(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},nf);function nf(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=su(t),this.stats_=xl.getCollection(e),this.urlFn=function(t){return e.connectionURL(Uu,t)}}var rf=(of.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ou("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},of.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},of.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},of.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},of.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},of.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},of.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){ou("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},of);function of(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=mu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=of.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){ou("frame writing exception"),t.stack&&ou(t.stack),ou(t)}}var sf="";var af=null;"undefined"!=typeof MozWebSocket?af=MozWebSocket:"undefined"!=typeof WebSocket&&(af=WebSocket);var uf=(cf.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Mu)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Fu,r)},cf.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vu.set("previous_websocket_failure",!0);try{if(Ws()){var r=Ps.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+sf+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new af(this.connURL,[],i)}else i={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new af(this.connURL,[],i)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},cf.prototype.start=function(){},cf.forceDisallow=function(){cf.forceDisallow_=!0},cf.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==af&&!cf.forceDisallow_},cf.previouslyFailed=function(){return vu.isInMemoryStorage||!0===vu.get("previous_websocket_failure")},cf.prototype.markConnectionHealthy=function(){vu.remove("previous_websocket_failure")},cf.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Xs(e);this.onMessage(n)}},cf.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},cf.prototype.extractFrameCount_=function(t){if(Ds(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},cf.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},cf.prototype.send=function(t){this.resetKeepAlive();var e=Js(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=pu(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},cf.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},cf.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},cf.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},cf.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},cf.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},cf.responsesRequiredToBeHealthy=2,cf.healthyTimeout=3e4,cf);function cf(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=su(this.connId),this.stats_=xl.getCollection(e),this.connURL=cf.connectionURL_(e,r,i)}var hf=(Object.defineProperty(lf,"ALL_TRANSPORTS",{get:function(){return[ef,uf]},enumerable:!0,configurable:!0}),lf.prototype.initTransports_=function(t){var e,n,r=uf&&uf.isAvailable(),i=r&&!uf.previouslyFailed();if(t.webSocketOnly&&(r||cu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[uf];else{var o=this.transports_=[];try{for(var s=Cs(lf.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},lf.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},lf.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},lf);function lf(t){this.initTransports_(t)}var ff=(pf.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=ku(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},pf.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},pf.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},pf.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},pf.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},pf.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},pf.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},pf.prototype.onSecondaryMessageReceived_=function(t){var e=fu("t",t),n=fu("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},pf.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},pf.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},pf.prototype.onPrimaryMessageReceived_=function(t){var e=fu("t",t),n=fu("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},pf.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},pf.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},pf.prototype.onControl_=function(t){var e=fu("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?au("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):au("Unknown control packet command: "+e)}},pf.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&cu("Protocol version mismatch detected"),this.tryStartUpgrade_())},pf.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},pf.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ku(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},pf.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},pf.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ku(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},pf.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},pf.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},pf.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},pf.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},pf.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},pf.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},pf.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},pf);function pf(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=su("c:"+this.id+":"),this.transportManager_=new hf(e),this.log_("Connection created"),this.start_()}var df=(vf.prototype.put=function(t,e,n,r){},vf.prototype.merge=function(t,e,n,r){},vf.prototype.refreshAuthToken=function(t){},vf.prototype.onDisconnectPut=function(t,e,n){},vf.prototype.onDisconnectMerge=function(t,e,n){},vf.prototype.onDisconnectCancel=function(t,e){},vf.prototype.reportStats=function(t){},vf);function vf(){}var yf,gf=(Es(mf,yf=df),mf.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Js(i)),Ds(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},mf.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ds(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Ds(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},mf.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;mf.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},mf.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Zs(t,"w")){var n=ta(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();cu("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},mf.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},mf.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=$s(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},mf.prototype.tryAuth=function(){var t,r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,e=(t=$s(i).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",n={cred:i};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},mf.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Ds(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},mf.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},mf.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},mf.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},mf.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},mf.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},mf.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},mf.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},mf.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},mf.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},mf.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},mf.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Js(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},mf.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):au("Unrecognized action received from server: "+Js(t)+"\nAre you using the latest client?")},mf.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},mf.prototype.scheduleConnect_=function(t){var e=this;Ds(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},mf.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},mf.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},mf.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},mf.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+mf.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){Ds(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?ou("getToken() completed but was canceled"):(ou("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new ff(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){cu(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||c()})}},mf.prototype.interrupt=function(t){ou("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},mf.prototype.resume=function(t){ou("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ea(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},mf.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},mf.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},mf.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return Su(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},mf.prototype.removeListen_=function(t,e){var n,r=new Pu(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},mf.prototype.onAuthRevoked_=function(t,e){ou("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},mf.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},mf.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Cs(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Cs(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},mf.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+sf.replace(/\./g,"-")]=1,qs()?t["framework.cordova"]=1:Bs()&&(t["framework.reactnative"]=1),this.reportStats(t)},mf.prototype.shouldReconnect_=function(){var t=Jl.getInstance().currentlyOnline();return ea(this.interruptReasons_)&&t},mf.nextPersistentConnectionId_=0,mf.nextConnectionId_=0,mf);function mf(t,e,n,r,i,o,s){var a=yf.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=mf.nextPersistentConnectionId_++,a.log_=su("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!Ws())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),zl.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&Jl.getInstance().on("online",a.onOnline_,a),a}var bf,wf=(Es(_f,bf=df),_f.prototype.reportStats=function(t){throw new Error("Method not implemented.")},_f.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Ds(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},_f.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=_f.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),ta(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},_f.prototype.unlisten=function(t,e){var n=_f.getListenId_(t,e);delete this.listens_[n]},_f.prototype.refreshAuthToken=function(t){},_f.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+function(t){for(var n=[],e=function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];e(o[0],o[1])}return n.length?"&"+n.join("&"):""}(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=Xs(r.responseText)}catch(t){cu("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&cu("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},_f);function _f(t,e,n){var r=bf.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=su("p:rest:"),r.listens_={},r}var Ef="repo_interrupt",If=(Tf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Tf.prototype.name=function(){return this.repoInfo_.namespace},Tf.prototype.serverTime=function(){var t=this.infoData_.getNode(new Pu(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},Tf.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},Tf.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Pu(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=na(e,function(t){return ih(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=ih(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=na(e,function(t){return ih(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=ih(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;0<o.length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},Tf.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},Tf.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},Tf.prototype.onServerInfoUpdate_=function(t){var n=this;Cu(t,function(t,e){n.updateInfo_(t,e)})},Tf.prototype.updateInfo_=function(t,e){var n=new Pu("/.info/"+t),r=ih(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Tf.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Tf.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=ih(t,e),a=this.serverSyncTree_.calcCompleteEventCache(i),u=Ah(r,a,n),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(i,u,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||cu("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(c,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var l=this.abortTransactions_(i);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},Tf.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var n=!0,r=this.generateServerValues(),i={};if(Cu(t,function(t,e){n=!1,i[t]=Nh(o.child(t),ih(e),a.serverSyncTree_,r)}),n)ou("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok");else{var u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,i,u);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||cu("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),Cu(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},Tf.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=new Lh;this.onDisconnect_.forEachTree(Pu.Empty,function(t,e){var n=Nh(t,e,r.serverSyncTree_,i);o.remember(t,n)});var s=[];o.forEachTree(Pu.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new Lh,this.eventQueue_.raiseEventsForChangedPath(Pu.Empty,s)},Tf.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},Tf.prototype.onDisconnectSet=function(n,t,r){var i=this,o=ih(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Tf.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=ih(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Tf.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(ea(n))return ou("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&Cu(n,function(t,e){var n=ih(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},Tf.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Tf.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Tf.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Ef)},Tf.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Ef)},Tf.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new Ml(this.stats_)),this.statsListener_.get()):this.stats_.get();var i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);Cu(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)})}},Tf.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},Tf.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),ou.apply(void 0,As([n],t))},Tf.prototype.callOnCompleteCallback=function(r,i,o){r&&Au(function(){if("ok"===i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(Tf.prototype,"database",{get:function(){return this.__database||(this.__database=new Wf(this))},enumerable:!0,configurable:!0}),Tf);function Tf(t,e,n,r){var s=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Lh,this.persistentConnection_=null;var i=new Ol(n,r);if(this.stats_=xl.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new wf(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Js(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new gf(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=xl.getOrCreateReporter(t,function(){return new Ul(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new Al,this.infoSyncTree_=new Cl({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Cl({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var Sf=(Cf.prototype.getStartPost=function(){return this.startPost_},Cf.prototype.getEndPost=function(){return this.endPost_},Cf.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Cf.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new fc(e,n))||(n=$c.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Cf.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=$c.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority($c.EMPTY_NODE);var i=this;return e.forEachChild(Rc,function(t,e){i.matches(new fc(t,e))||(r=r.updateImmediateChild(t,$c.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Cf.prototype.updatePriority=function(t,e){return t},Cf.prototype.filtersNodes=function(){return!0},Cf.prototype.getIndexedFilter=function(){return this.indexedFilter_},Cf.prototype.getIndex=function(){return this.index_},Cf.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Cf.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Cf);function Cf(t){this.indexedFilter_=new nl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Cf.getStartPost_(t),this.endPost_=Cf.getEndPost_(t)}var Nf=(Af.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new fc(e,n))||(n=$c.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Af.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=$c.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=$c.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority($c.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,$c.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Af.prototype.updatePriority=function(t,e){return t},Af.prototype.filtersNodes=function(){return!0},Af.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Af.prototype.getIndex=function(){return this.index_},Af.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;Ds(a.numChildren()===this.limit_,"");var u=new fc(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(tl.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(tl.childRemovedChange(e,l));var d=a.updateImmediateChild(e,$c.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(tl.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(tl.childRemovedChange(c.name,c.node)),i.trackChildChange(tl.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,$c.EMPTY_NODE)):t},Af);function Af(t){this.rangedFilter_=new Sf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var kf=(Of.prototype.hasStart=function(){return this.startSet_},Of.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Of.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Of.prototype.getIndexStartValue=function(){return Ds(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Of.prototype.getIndexStartName=function(){return Ds(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eu},Of.prototype.hasEnd=function(){return this.endSet_},Of.prototype.getIndexEndValue=function(){return Ds(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Of.prototype.getIndexEndName=function(){return Ds(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Iu},Of.prototype.hasLimit=function(){return this.limitSet_},Of.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Of.prototype.getLimit=function(){return Ds(this.limitSet_,"Only valid if limit has been set"),this.limit_},Of.prototype.getIndex=function(){return this.index_},Of.prototype.copy_=function(){var t=new Of;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Of.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Of.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Of.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Of.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Of.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Of.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Of.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Of.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Of.prototype.getQueryObject=function(){var t=Of.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==Rc&&(e[t.INDEX]=this.index_.toString()),e},Of.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Of.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Rc},Of.prototype.getNodeFilter=function(){return this.loadsAllData()?new nl(this.getIndex()):new(this.hasLimit()?Nf:Sf)(this)},Of.prototype.toRestQueryStringParameters=function(){var t,e=Of.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Rc?e.PRIORITY_INDEX:this.index_===ah?e.VALUE_INDEX:this.index_===_c?e.KEY_INDEX:(Ds(this.index_ instanceof uh,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Js(t),this.startSet_&&(n[e.START_AT]=Js(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Js(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Js(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Js(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Of.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Of.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Of.DEFAULT=new Of,Of);function Of(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rc}var Rf,Pf=(Es(Df,Rf=_h),Df.prototype.getKey=function(){return ca("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Df.prototype.child=function(t){var e,n,r,i;return ca("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Pu||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),Xu(e,n,r,i)):Xu("Reference.child",1,t,!1)),new Df(this.repo,this.path.child(t))},Df.prototype.getParent=function(){ca("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Df(this.repo,t)},Df.prototype.getRoot=function(){ca("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Df.prototype.databaseProp=function(){return this.repo.database},Df.prototype.set=function(t,e){ca("Reference.set",1,2,arguments.length),Ju("Reference.set",this.path),Gu("Reference.set",1,t,this.path,!1),la("Reference.set",2,e,!0);var n=new Us;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Df.prototype.update=function(t,e){if(ca("Reference.update",1,2,arguments.length),Ju("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,cu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qu("Reference.update",1,t,this.path,!1),la("Reference.update",2,e,!0);var i=new Us;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Df.prototype.setWithPriority=function(t,e,n){if(ca("Reference.setWithPriority",2,3,arguments.length),Ju("Reference.setWithPriority",this.path),Gu("Reference.setWithPriority",1,t,this.path,!1),Ku("Reference.setWithPriority",2,e,!1),la("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Us;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Df.prototype.remove=function(t){return ca("Reference.remove",0,1,arguments.length),Ju("Reference.remove",this.path),la("Reference.remove",1,t,!0),this.set(null,t)},Df.prototype.transaction=function(t,r,e){if(ca("Reference.transaction",1,3,arguments.length),Ju("Reference.transaction",this.path),la("Reference.transaction",1,t,!1),la("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(ha(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Us;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new sc(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Df.prototype.setPriority=function(t,e){ca("Reference.setPriority",1,2,arguments.length),Ju("Reference.setPriority",this.path),Ku("Reference.setPriority",1,t,!1),la("Reference.setPriority",2,e,!0);var n=new Us;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Df.prototype.push=function(t,e){ca("Reference.push",0,2,arguments.length),Ju("Reference.push",this.path),Gu("Reference.push",1,t,this.path,!0),la("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=lc(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},Df.prototype.onDisconnect=function(){return Ju("Reference.onDisconnect",this.path),new ic(this.repo,this.path)},Object.defineProperty(Df.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(Df.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(Df.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(Df.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Df);function Df(t,e){if(!(t instanceof If))throw new Error("new Reference() no longer supported - use app.database().");return Rf.call(this,t,e,kf.DEFAULT,!1)||this}_h.__referenceConstructor=Pf,ml.__referenceConstructor=Pf;var xf,Lf,Mf=function(){this.children={},this.childCount=0,this.value=null},Ff=(Uf.prototype.subTree=function(t){for(var e=t instanceof Pu?t:new Pu(t),n=this,r=e.getFront();null!==r;)n=new Uf(r,n,ta(n.node_.children,r)||new Mf),r=(e=e.popFront()).getFront();return n},Uf.prototype.getValue=function(){return this.node_.value},Uf.prototype.setValue=function(t){Ds(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Uf.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Uf.prototype.hasChildren=function(){return 0<this.node_.childCount},Uf.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Uf.prototype.forEachChild=function(n){var r=this;Cu(this.node_.children,function(t,e){n(new Uf(t,r,e))})},Uf.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Uf.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Uf.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Uf.prototype.path=function(){return new Pu(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Uf.prototype.name=function(){return this.name_},Uf.prototype.parent=function(){return this.parent_},Uf.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Uf.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Zs(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Uf);function Uf(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Mf),this.name_=t,this.parent_=e,this.node_=n}(Lf=xf=xf||{})[Lf.RUN=0]="RUN",Lf[Lf.SENT=1]="SENT",Lf[Lf.COMPLETED=2]="COMPLETED",Lf[Lf.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Lf[Lf.NEEDS_ABORT=4]="NEEDS_ABORT",If.MAX_TRANSACTION_RETRIES_=25,If.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Ff},If.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new Pf(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:mu(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new hh(s.currentInputSnapshot,new Pf(this,s.path),Rc);s.onComplete(null,!1,c)}}else{rc("transaction failed: Data returned ",u,s.path),s.status=xf.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&Zs(u,".priority"))f=ta(u,".priority"),Ds(Hu(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||$c.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=ih(u,f),v=Ah(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},If.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||$c.EMPTY_NODE},If.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Ds(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===xf.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},If.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];Ds(o.status===xf.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=xf.SENT,o.retryCount++;var s=Pu.relativePath(a,o.path);n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<u.length;r++){if(u[r].status=xf.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new Pf(c,u[r].path),s=new hh(i,o,Rc);n.push(u[r].onComplete.bind(null,null,!0,s))}u[r].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e);for(r=0;r<n.length;r++)Au(n[r])}else{if("datastale"===t)for(r=0;r<u.length;r++)u[r].status===xf.SENT_NEEDS_ABORT?u[r].status=xf.NEEDS_ABORT:u[r].status=xf.RUN;else{cu("transaction at "+l.toString()+" failed: "+t);for(r=0;r<u.length;r++)u[r].status=xf.NEEDS_ABORT,u[r].abortReason=t}c.rerunTransactions_(a)}},r)},If.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},If.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===xf.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Pu.relativePath(e,a.path),c=!1,h=void 0;if(Ds(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===xf.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===xf.RUN)if(a.retryCount>=If.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=t[s].update(l.val());if(void 0!==f){rc("transaction failed: Data returned ",f,a.path);var p=ih(f);"object"==typeof f&&null!=f&&Zs(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,v=this.generateServerValues(),y=Ah(p,l,v);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=xf.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var g=new Pf(this,t[s].path),m=t[s].currentInputSnapshot,b=new hh(m,g,Rc);r.push(t[s].onComplete.bind(null,null,!1,b))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)Au(r[s]);this.sendReadyTransactions_()}},If.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},If.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},If.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},If.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==xf.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},If.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},If.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status!==xf.SENT_NEEDS_ABORT)if(e[o].status===xf.SENT)Ds(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=xf.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(Ds(e[o].status===xf.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Au(n[o])}};var jf,Vf="databaseURL",qf=(Bf.getInstance=function(){return jf=jf||new Bf},Bf.prototype.interrupt=function(){var e,t,n,r;try{for(var i=Cs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Cs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Bf.prototype.resume=function(){var e,t,n,r;try{for(var i=Cs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Cs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Bf.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[Vf];void 0===r&&uu("Can't determine Firebase Database URL.  Be sure to include "+Vf+" option when calling firebase.initializeApp().");var i=qu(r),o=i.repoInfo,s=void 0;return"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(r="http://"+s+"?ns="+o.namespace,o=(i=qu(r)).repoInfo),$u("Invalid Firebase Database URL",1,i),i.path.isEmpty()||uu("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},Bf.prototype.deleteRepo=function(t){var e=ta(this.repos_,t.app.name);e&&ta(e,t.repoInfo_.toURLString())===t||uu("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Bf.prototype.createRepo=function(t,e,n){var r=ta(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ta(r,t.toURLString());return i&&uu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new If(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Bf.prototype.forceRestClient=function(t){this.useRestClient_=t},Bf);function Bf(){this.repos_={},this.useRestClient_=!1}var Wf=(Object.defineProperty(Hf.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Hf.prototype.ref=function(t){return this.checkDeleted_("ref"),ca("database.ref",0,1,arguments.length),t instanceof Pf?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Hf.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),ca(e,1,1,arguments.length);var n=qu(t);$u(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&uu(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Hf.prototype.checkDeleted_=function(t){null===this.repo_&&uu("Cannot call "+t+" on a deleted database.")},Hf.prototype.goOffline=function(){ca("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Hf.prototype.goOnline=function(){ca("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Hf.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Hf);function Hf(t){(this.repo_=t)instanceof If||uu("Don't call new Database() directly - please use firebase.database()."),this.root_=new Pf(t,Pu.Empty),this.INTERNAL=new Gf(this)}var Gf=(Qf.prototype.delete=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return this.database.checkDeleted_("delete"),qf.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Qf);function Qf(t){this.database=t}var Kf=Object.freeze({__proto__:null,forceLongPolling:function(){uf.forceDisallow(),ef.forceAllow()},forceWebSockets:function(){ef.forceDisallow()},isWebSocketsAvailable:function(){return uf.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),zf=gf;gf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},gf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Yf,Xf,Jf=ff,$f=ju,Zf=Object.freeze({__proto__:null,DataConnection:zf,RealTimeConnection:Jf,hijackHash:function(i){var o=gf.prototype.put;return gf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){gf.prototype.put=o}},ConnectionTarget:$f,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){qf.getInstance().forceRestClient(t)}}),tp=Wf.ServerValue;function ep(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}Xf=(Yf=Kl).SDK_VERSION,sf=Xf,Yf.INTERNAL.registerComponent(new da("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return qf.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:Pf,Query:_h,Database:Wf,DataSnapshot:hh,enableLogging:iu,INTERNAL:Kf,ServerValue:tp,TEST_ACCESS:Zf}).setMultipleInstances(!0)),Yf.registerVersion("@firebase/database","0.6.6");var np,rp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ip=ip||{},op=rp||self;function sp(){}function ap(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function up(t){var e=ap(t);return"array"==e||"object"==e&&"number"==typeof t.length}function cp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var hp="closure_uid_"+(1e9*Math.random()>>>0),lp=0;function fp(t,e,n){return t.call.apply(t.bind,arguments)}function pp(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function dp(t,e,n){return(dp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fp:pp).apply(null,arguments)}function vp(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var yp=Date.now||function(){return+new Date};function gp(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function mp(){this.j=this.j,this.i=this.i}mp.prototype.j=!1,mp.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))t=this,Object.prototype.hasOwnProperty.call(t,hp)&&t[hp]||(t[hp]=++lp);var t},mp.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var bp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},wp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function _p(){return Array.prototype.concat.apply([],arguments)}function Ep(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ip(t){return/^[\s\xa0]*$/.test(t)}var Tp,Sp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Cp(t,e){return-1!=t.indexOf(e)}function Np(t,e){return t<e?-1:e<t?1:0}t:{var Ap=op.navigator;if(Ap){var kp=Ap.userAgent;if(kp){Tp=kp;break t}}Tp=""}function Op(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Rp(t){var e={};for(var n in t)e[n]=t[n];return e}var Pp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dp(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Pp.length;i++)e=Pp[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function xp(t){return xp[" "](t),t}xp[" "]=sp;var Lp,Mp,Fp=Cp(Tp,"Opera"),Up=Cp(Tp,"Trident")||Cp(Tp,"MSIE"),jp=Cp(Tp,"Edge"),Vp=jp||Up,qp=Cp(Tp,"Gecko")&&!(Cp(Tp.toLowerCase(),"webkit")&&!Cp(Tp,"Edge"))&&!(Cp(Tp,"Trident")||Cp(Tp,"MSIE"))&&!Cp(Tp,"Edge"),Bp=Cp(Tp.toLowerCase(),"webkit")&&!Cp(Tp,"Edge");function Wp(){var t=op.document;return t?t.documentMode:void 0}t:{var Hp="",Gp=(Mp=Tp,qp?/rv:([^\);]+)(\)|;)/.exec(Mp):jp?/Edge\/([\d\.]+)/.exec(Mp):Up?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mp):Bp?/WebKit\/(\S+)/.exec(Mp):Fp?/(?:Version)[ \/]?(\S+)/.exec(Mp):void 0);if(Gp&&(Hp=Gp?Gp[1]:""),Up){var Qp=Wp();if(null!=Qp&&Qp>parseFloat(Hp)){Lp=String(Qp);break t}}Lp=Hp}var Kp,zp={};function Yp(a){return t=a,e=function(){for(var t=0,e=Sp(String(Lp)).split("."),n=Sp(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Np(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Np(0==o[2].length,0==s[2].length)||Np(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=zp,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}if(op.document&&Up){var Xp=Wp();Kp=Xp||(parseInt(Lp,10)||void 0)}else Kp=void 0;var Jp=Kp,$p=!Up||9<=Number(Jp),Zp=Up&&!Yp("9"),td=function(){if(!op.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{op.addEventListener("test",sp,e),op.removeEventListener("test",sp,e)}catch(t){}return t}();function ed(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function nd(t,e){if(ed.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(qp){t:{try{xp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:rd[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}ed.prototype.b=function(){this.defaultPrevented=!0},gp(nd,ed);var rd={2:"touch",3:"pen",4:"mouse"};nd.prototype.b=function(){nd.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Zp)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var id="closure_listenable_"+(1e6*Math.random()|0),od=0;function sd(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++od,this.V=this.X=!1}function ad(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function ud(t){this.src=t,this.a={},this.b=0}function cd(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=bp(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ad(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function hd(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}ud.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=hd(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new sd(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var ld="closure_lm_"+(1e6*Math.random()|0),fd={};function pd(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=_d(r);return e&&e[id]?e.sa(n,r,cp(i)?!!i.capture:!!i,o):dd(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)pd(t,e[o],n,r,i);return null}return n=_d(n),t&&t[id]?t.ra(e,n,cp(r)?!!r.capture:!!r,i):dd(t,e,n,!1,r,i)}function dd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=cp(i)?!!i.capture:!!i;if(s&&!$p)return null;var a,u,c=bd(t);if(c||(t[ld]=c=new ud(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=md,r=u=$p?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)td||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yd(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function vd(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[id])cd(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bd(e))?(cd(n,t),0==n.b&&(n.src=null,e[ld]=null)):ad(t)}}}function yd(t){return t in fd?fd[t]:fd[t]="on"+t}function gd(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&vd(t),n.call(r,e)}function md(t,e){if(t.V)return!0;if($p)return gd(t,new nd(e,this));if(!e)t:{e=["window","event"];for(var n=op,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return gd(t,e=new nd(e,this))}function bd(t){return(t=t[ld])instanceof ud?t:null}var wd="__closure_events_fn_"+(1e9*Math.random()>>>0);function _d(e){return"function"==ap(e)?e:(e[wd]||(e[wd]=function(t){return e.handleEvent(t)}),e[wd])}function Ed(){mp.call(this),this.c=new ud(this),(this.J=this).A=null}function Id(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.V&&s.capture==n){var a=s.listener,u=s.aa||s.src;s.X&&cd(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}gp(Ed,mp),Ed.prototype[id]=!0,(np=Ed.prototype).addEventListener=function(t,e,n,r){pd(this,t,e,n,r)},np.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=cp(i)?!!i.capture:!!i,r=_d(r),e&&e[id]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=hd(s=e.a[n],r,i,o))&&(ad(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&bd(e))&&(n=e.a[n.toString()],e=-1,n&&(e=hd(n,r,i,o)),(r=-1<e?n[e]:null)&&vd(r))}(this,t,e,n,r)},np.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new ed(t,n);else if(t instanceof ed)t.target=t.target||n;else{var i=t;Dp(t=new ed(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Id(s,r,!0,t)&&i}if(i=Id(s=t.a=n,r,!0,t)&&i,i=Id(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Id(s=t.a=e[o],r,!1,t)&&i;return i},np.C=function(){if(Ed.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ad(n[r]);delete e.a[t],e.b--}}this.A=null},np.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},np.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Td=op.JSON.stringify;function Sd(){this.b=this.a=null}var Cd,Nd=(Ad.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Ad(function(){return new kd},function(t){t.reset()},100));function Ad(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function kd(){this.next=this.b=this.a=null}function Od(t){op.setTimeout(function(){throw t},0)}function Rd(t,e){var n;Cd||(n=op.Promise.resolve(void 0),Cd=function(){n.then(xd)}),Pd||(Cd(),Pd=!0),Dd.add(t,e)}Sd.prototype.add=function(t,e){var n=Nd.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},kd.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Pd=!(kd.prototype.reset=function(){this.next=this.b=this.a=null}),Dd=new Sd;function xd(){for(var t;r=n=void 0,r=null,(n=Dd).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){Od(t)}var e=Nd;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}var n,r;Pd=!1}function Ld(t,e){Ed.call(this),this.b=t||1,this.a=e||op,this.f=dp(this.Ua,this),this.g=yp()}function Md(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Fd(t,e,n){if("function"==ap(t))n&&(t=dp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=dp(t.handleEvent,t)}return 2147483647<Number(e)?-1:op.setTimeout(t,e||0)}function Ud(t,e,n){mp.call(this),this.f=null!=n?dp(t,n):t,this.c=e,this.b=dp(this.Pa,this),this.a=[]}function jd(t){t.T=Fd(t.b,t.c),t.f.apply(null,t.a)}function Vd(t){mp.call(this),this.b=t,this.a={}}gp(Ld,Ed),(np=Ld.prototype).Z=!1,np.L=null,np.Ua=function(){if(this.Z){var t=yp()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(Md(this),this.start()))}},np.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=yp())},np.C=function(){Ld.M.C.call(this),Md(this),delete this.a},gp(Ud,mp),(np=Ud.prototype).ba=!1,np.T=null,np.Ia=function(t){this.a=arguments,this.T?this.ba=!0:jd(this)},np.C=function(){Ud.M.C.call(this),this.T&&(op.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},np.Pa=function(){this.T=null,this.ba&&(this.ba=!1,jd(this))},gp(Vd,mp);var qd=[];function Bd(t,e,n,r){Array.isArray(n)||(n&&(qd[0]=n.toString()),n=qd);for(var i=0;i<n.length;i++){var o=pd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Wd(t){Op(t.a,function(t,e){this.a.hasOwnProperty(e)&&vd(t)},t),t.a={}}function Hd(){}Vd.prototype.C=function(){Vd.M.C.call(this),Wd(this)},Vd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gd=null;function Qd(){return Gd=Gd||new Ed}function Kd(t){ed.call(this,"serverreachability",t)}function zd(t){var e=Qd();e.dispatchEvent(new Kd(e))}function Yd(t){ed.call(this,"statevent",t)}function Xd(t){var e=Qd();e.dispatchEvent(new Yd(e))}function Jd(t){ed.call(this,"timingevent",t)}function $d(t,e){if("function"!=ap(t))throw Error("Fn must not be null and must be a function");return op.setTimeout(function(){t()},e)}gp(Kd,ed),gp(Yd,ed),gp(Jd,ed);var Zd={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},tv={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function ev(){}function nv(t){var e;return(e=t.a)||(e=t.a={}),e}function rv(){}ev.prototype.a=null;var iv,ov={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function sv(){ed.call(this,"d")}function av(){ed.call(this,"c")}function uv(){}function cv(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Vd(this),this.N=hv,t=Vp?125:void 0,this.O=new Ld(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}gp(sv,ed),gp(av,ed),gp(uv,ev),iv=new uv;var hv=45e3,lv={},fv={};function pv(t,e,n){t.B=1,t.f=Lv(kv(e)),t.j=n,t.F=!0,dv(t,null)}function dv(t,e){t.s=yp(),gv(t),t.A=kv(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),zv(n.b,"t",r),t.w=0,t.a=jy(t.g,t.g.w?e:null),0<t.J&&(t.D=new Ud(dp(t.ya,t,t.a),t.J)),Bd(t.G,t.a,"readystatechange",t.Sa),e=t.m?Rp(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),zd(1)}function vv(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=yv(t,n);if(i==fv){4==e&&(t.c=4,Xd(14),r=!1);break}if(i==lv){t.c=4,Xd(15),r=!1;break}Ev(t,i)}4==e&&0==n.length&&(t.c=1,Xd(16),r=!1),t.b=t.b&&r,r||(_v(t),wv(t))}function yv(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?fv:(n=Number(e.substring(n,r)),isNaN(n)?lv:(r+=1)+n>e.length?fv:(e=e.substr(r,n),t.w=r+n,e))}function gv(t){t.P=yp()+t.N,mv(t,t.N)}function mv(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=$d(dp(t.Qa,t),e)}function bv(t){t.h&&(op.clearTimeout(t.h),t.h=null)}function wv(t){0==t.g.u||t.l||xy(t.g,t)}function _v(t){bv(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,Md(t.O),Wd(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function Ev(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||ey(n.b,t)))if(n.A=t.H,!t.o&&ey(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;Dy(n),n.a.cancel(),n.a=null}Py(n),Xd(18)}}else n.ia=i[1],0<n.ia-n.G&&i[2]<37500&&n.U&&0==n.m&&!n.l&&(n.l=$d(dp(n.Na,n),6e3));if(ty(n.b)<=1&&n.O){try{n.O()}catch(t){}n.O=void 0}}else My(n,11)}else if(!t.o&&n.a!=t||Dy(n),!Ip(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var s=i[5];null!=s&&"number"==typeof s&&0<s&&(n.D=1.5*s);var a=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=a.b;!h.a&&(Cp(c,"spdy")||Cp(c,"quic")||Cp(c,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ny(h,h.b),h.b=null))}if(a.s){var l=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.ha=l,xv(a.v,a.s,l))}}n.u=3,n.c&&n.c.na();var f=t;if((a=n).ea=Uy(a,a.w?a.R:null,a.P),f.o){ry(a.b,f);var p=f,d=a.D;d&&p.setTimeout(d),p.h&&(bv(p),gv(p)),a.a=f}else Ry(a);0<n.f.length&&Ny(n)}else"stop"!=i[0]&&"close"!=i[0]||My(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?My(n,7):Ty(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);zd(4)}catch(t){}}function Iv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(up(t)||"string"==typeof t)wp(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(up(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(up(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Tv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Tv)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Sv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Cv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Cv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Cv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(np=cv.prototype).setTimeout=function(t){this.N=t},np.Sa=function(t){t=t.target;var e=this.D;e&&3==wy(t)?e.Ia():this.ya(t)},np.ya=function(t){try{if(t==this.a)t:{var e=wy(this.a),n=this.a.qa(),r=this.a.S();if(!(e<3||3==e&&!Vp&&!this.a.Y())){this.l||4!=e||7==n||zd(8==n||r<=0?3:2),bv(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ip(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,Xd(12),_v(this),wv(this);break t}this.o=!0,Ev(this,u)}this.F?(vv(this,e,o),Vp&&this.b&&3==e&&(Bd(this.G,this.O,"tick",this.Ra),this.O.start())):Ev(this,o),4==e&&_v(this),this.b&&!this.l&&(4==e?xy(this.g,this):(this.b=!1,gv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Xd(12)):(this.c=0,Xd(13)),_v(this),wv(this)}}}catch(t){}},np.Ra=function(){if(this.a){var t=wy(this.a),e=this.a.Y();this.w<e.length&&(bv(this),vv(this,t,e),this.b&&4!=t&&gv(this))}},np.cancel=function(){this.l=!0,_v(this)},np.Qa=function(){this.h=null;var t=yp();0<=t-this.P?(2!=this.B&&(zd(3),Xd(17)),_v(this),this.c=2,wv(this)):mv(this,this.P-t)},(np=Tv.prototype).I=function(){Sv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},np.K=function(){return Sv(this),this.a.concat()},np.get=function(t,e){return Cv(this.b,t)?this.b[t]:e},np.set=function(t,e){Cv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},np.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Nv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Av(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Av){this.a=void 0!==e?e:t.a,Ov(this,t.f),this.j=t.j,Rv(this,t.c),Pv(this,t.h),this.g=t.g,e=t.b;var n=new Hv;n.c=e.c,e.a&&(n.a=new Tv(e.a),n.b=e.b),Dv(this,n),this.i=t.i}else t&&(n=String(t).match(Nv))?(this.a=!!e,Ov(this,n[1]||"",!0),this.j=Mv(n[2]||""),Rv(this,n[3]||"",!0),Pv(this,n[4]),this.g=Mv(n[5]||"",!0),Dv(this,n[6]||"",!0),this.i=Mv(n[7]||"")):(this.a=!!e,this.b=new Hv(null,this.a))}function kv(t){return new Av(t)}function Ov(t,e,n){t.f=n?Mv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Rv(t,e,n){t.c=n?Mv(e,!0):e}function Pv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Dv(t,e,n){var r,i;e instanceof Hv?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Gv(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Qv(this,e),zv(this,n,t))},r)),r.f=i):(n||(e=Fv(e,Bv)),t.b=new Hv(e,t.a))}function xv(t,e,n){t.b.set(e,n)}function Lv(t){return xv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^yp()).toString(36)),t}function Mv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Uv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Uv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Av.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Fv(e,jv,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Fv(e,jv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fv(n,"/"==n.charAt(0)?qv:Vv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Fv(n,Wv)),t.join("")};var jv=/[#\/\?@]/g,Vv=/[#\?:]/g,qv=/[#\?]/g,Bv=/[#\?@]/g,Wv=/#/g;function Hv(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Gv(n){n.a||(n.a=new Tv,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Qv(t,e){Gv(t),e=Yv(t,e),Cv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Cv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Sv(t)))}function Kv(t,e){return Gv(t),e=Yv(t,e),Cv(t.a.b,e)}function zv(t,e,n){Qv(t,e),0<n.length&&(t.c=null,t.a.set(Yv(t,e),Ep(n)),t.b+=n.length)}function Yv(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Xv(t,e){this.b=t,this.a=e}function Jv(t){this.g=t||$v,t=op.PerformanceNavigationTiming?0<(t=op.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(op.ca&&op.ca.ua&&op.ca.ua()&&op.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(np=Hv.prototype).add=function(t,e){Gv(this),this.c=null,t=Yv(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},np.forEach=function(n,r){Gv(this),this.a.forEach(function(t,e){wp(t,function(t){n.call(r,t,e,this)},this)},this)},np.K=function(){Gv(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},np.I=function(t){Gv(this);var e=[];if("string"==typeof t)Kv(this,t)&&(e=_p(e,this.a.get(Yv(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=_p(e,t[n])}return e},np.set=function(t,e){return Gv(this),this.c=null,Kv(this,t=Yv(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},np.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},np.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var $v=10;function Zv(t){return t.b||t.a&&t.a.size>=t.f}function ty(t){return t.b?1:t.a?t.a.size:0}function ey(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function ny(t,e){t.a?t.a.add(e):t.b=e}function ry(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function iy(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null==t.a||0===t.a.size)return Ep(t.c);var r=t.c;try{for(var i=ep(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function oy(){}function sy(){this.a=new oy}function ay(t,r,e){var i=e||"";try{Iv(t,function(t,e){var n=t;cp(t)&&(n=Td(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}function uy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Jv.prototype.cancel=function(){var e,t;if(this.c=iy(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ep(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},oy.prototype.stringify=function(t){return op.JSON.stringify(t,void 0)},oy.prototype.parse=function(t){return op.JSON.parse(t,void 0)};var cy=op.JSON.parse;function hy(t){Ed.call(this),this.headers=new Tv,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=ly,this.B=this.F=!1}gp(hy,Ed);var ly="",fy=/^https?$/i,py=["POST","PUT"];function dy(t){return"content-type"==t.toLowerCase()}function vy(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,yy(t),my(t)}function yy(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function gy(t){if(t.b&&void 0!==ip&&(!t.s[1]||4!=wy(t)||2!=t.S()))if(t.l&&4==wy(t))Fd(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==wy(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(Nv)[1]||null;if(!o&&op.self&&op.self.location){var s=op.self.location.protocol;o=s.substr(0,s.length-1)}i=!fy.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<wy(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",yy(t)}}finally{my(t)}}}function my(t,e){if(t.a){by(t);var n=t.a,r=t.s[0]?sp:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function by(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(op.clearTimeout(t.m),t.m=null)}function wy(t){return t.a?t.a.readyState:0}function _y(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Op(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):xv(t,e,n))}function Ey(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Iy(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=Ey("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=Ey("baseRetryDelayMs",5e3,t),this.Ga=Ey("retryDelaySeedMs",1e4,t),this.Da=Ey("forwardChannelMaxRetries",2,t),this.ga=Ey("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Jv(t&&t.concurrentRequestLimit),this.ja=new sy,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function Ty(t){if(Sy(t),3==t.u){var e=t.H++,n=kv(t.v);xv(n,"SID",t.B),xv(n,"RID",e),xv(n,"TYPE","terminate"),ky(t,n),(e=new cv(t,e,void 0)).B=2,e.f=Lv(kv(n)),n=!1,op.navigator&&op.navigator.sendBeacon&&(n=op.navigator.sendBeacon(e.f.toString(),"")),!n&&op.Image&&((new Image).src=e.f,n=!0),n||(e.a=jy(e.g,null),e.a.$(e.f)),e.s=yp(),gv(e)}Fy(t)}function Sy(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(op.clearTimeout(t.i),t.i=null),Dy(t),t.b.cancel(),t.g&&("number"==typeof t.g&&op.clearTimeout(t.g),t.g=null)}function Cy(t,e){t.f.push(new Xv(t.Fa++,e)),3==t.u&&Ny(t)}function Ny(t){Zv(t.b)||t.g||(t.g=!0,Rd(t.xa,t),t.o=0)}function Ay(t,e){var n;n=e?e.W:t.H++;var r=kv(t.v);xv(r,"SID",t.B),xv(r,"RID",n),xv(r,"AID",t.G),ky(t,r),t.h&&t.j&&_y(r,t.h,t.j),n=new cv(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Oy(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),ny(t.b,n),pv(n,r,e)}function ky(t,n){t.c&&Iv({},function(t,e){xv(n,e,t)})}function Oy(t,e,n){n=Math.min(t.f.length,n);var r=t.c?dp(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{ay(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function Ry(t){t.a||t.i||(t.J=1,Rd(t.wa,t),t.m=0)}function Py(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=$d(dp(t.wa,t),Ly(t,t.m)),t.m++,1)}function Dy(t){null!=t.l&&(op.clearTimeout(t.l),t.l=null)}function xy(t,e){var n=null;if(t.a==e){Dy(t),t.a=null;var r=2}else{if(!ey(t.b,e))return;n=e.i,ry(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=yp()-e.s;var i=t.o;(r=Qd()).dispatchEvent(new Jd(r)),Ny(t)}else Ry(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){if(!(ty(t.b)>=t.b.f-(t.g?1:0))){if(t.g)return t.f=e.i.concat(t.f),1;if(!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)))return t.g=$d(dp(t.xa,t,e),Ly(t,t.o)),t.o++,1}}(t,e)||2==r&&Py(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:My(t,5);break;case 4:My(t,10);break;case 3:My(t,6);break;default:My(t,2)}}function Ly(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function My(t,e){if(2==e){var n=null;t.c&&(n=null);var r=dp(t.Ta,t);n||(n=new Av("//www.google.com/images/cleardot.gif"),op.location&&"http"==op.location.protocol||Ov(n,"https"),Lv(n)),function(t,e){var n=new Hd;if(op.Image){var r=new Image;r.onload=vp(uy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vp(uy,n,r,"TestLoadImage: error",!1,e),r.onabort=vp(uy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vp(uy,n,r,"TestLoadImage: timeout",!1,e),op.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xd(2);t.u=0,t.c&&t.c.la(e),Fy(t),Sy(t)}function Fy(t){t.u=0,t.A=-1,t.c&&(0==iy(t.b).length&&0==t.f.length||(t.b.c.length=0,Ep(t.f),t.f.length=0),t.c.ka())}function Uy(t,e,n){var r,i,o,s,a,u,c=(r=n)instanceof Av?kv(r):new Av(r,void 0);if(""!=c.c)e&&Rv(c,e+"."+c.c),Pv(c,c.h);else{var h=op.location;i=h.protocol,o=e?e+"."+h.hostname:h.hostname,s=+h.port,a=n,u=new Av(null,void 0),i&&Ov(u,i),o&&Rv(u,o),s&&Pv(u,s),a&&(u.g=a),c=u}return t.N&&Op(t.N,function(t,e){xv(c,e,t)}),e=t.s,n=t.ha,e&&n&&xv(c,e,n),xv(c,"VER",t.oa),ky(t,c),c}function jy(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hy(t.Ea)).F=t.w,e}function Vy(){}function qy(){if(Up&&!(10<=Number(Jp)))throw Error("Environmental error: no available transport.")}function By(t,e){Ed.call(this),this.a=new Iy(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ip(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ip(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Gy(this)}function Wy(t){sv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Hy(){av.call(this),this.status=1}function Gy(t){this.a=t}(np=hy.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?nv(this.G):nv(iv),this.a.onreadystatechange=dp(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void vy(this,t)}t=n||"";var i,o=new Tv(this.headers);r&&Iv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=dy,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.K()),n=op.FormData&&t instanceof op.FormData,0<=bp(py,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{by(this),0<this.o&&((this.B=(i=this.a,Up&&Yp(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=dp(this.ta,this)):this.m=Fd(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){vy(this,t)}},np.ta=function(){void 0!==ip&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},np.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),my(this))},np.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),my(this,!0)),hy.M.C.call(this)},np.va=function(){this.j||(this.w||this.l||this.g?gy(this):this.Oa())},np.Oa=function(){gy(this)},np.S=function(){try{return 2<wy(this)?this.a.status:-1}catch(t){return-1}},np.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},np.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),cy(e)}},np.qa=function(){return this.h},np.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(np=Iy.prototype).oa=8,np.u=1,np.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random()),t=this.H++;var e,n=new cv(this,t,void 0),r=this.j;if(this.F&&(r?Dp(r=Rp(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Oy(this,n,e),xv(i=kv(this.v),"RID",t),xv(i,"CVER",22),this.s&&xv(i,"X-HTTP-Session-Id",this.s),ky(this,i),this.h&&r&&_y(i,this.h,r),ny(this.b,n),this.fa?(xv(i,"$req",e),xv(i,"SID","null"),n.R=!0,pv(n,i,null)):pv(n,i,e),this.u=2}}else 3==this.u&&(t?Ay(this,t):0==this.f.length||Zv(this.b)||Ay(this))},np.wa=function(){this.i=null,this.a=new cv(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=kv(this.ea);xv(t,"RID","rpc"),xv(t,"SID",this.B),xv(t,"CI",this.U?"0":"1"),xv(t,"AID",this.G),ky(this,t),xv(t,"TYPE","xmlhttp"),this.h&&this.j&&_y(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=Lv(kv(t)),e.j=null,e.F=!0,dv(e,n)},np.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,Py(this),Xd(19))},np.Ta=function(t){Xd(t?2:1)},(np=Vy.prototype).na=function(){},np.ma=function(){},np.la=function(){},np.ka=function(){},np.Ha=function(){},qy.prototype.a=function(t,e){return new By(t,e)},gp(By,Ed),(np=By.prototype).addEventListener=function(t,e,n,r){By.M.addEventListener.call(this,t,e,n,r)},np.removeEventListener=function(t,e,n,r){By.M.removeEventListener.call(this,t,e,n,r)},np.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Xd(0),t.P=e,t.N=n||{},t.U=t.W,t.v=Uy(t,null,t.P),Ny(t)},np.close=function(){Ty(this.a)},np.La=function(t){if("string"==typeof t){var e={};e.__data__=t,Cy(this.a,e)}else this.g?((e={}).__data__=Td(t),Cy(this.a,e)):Cy(this.a,t)},np.C=function(){this.a.c=null,delete this.f,Ty(this.a),delete this.a,By.M.C.call(this)},gp(Wy,sv),gp(Hy,av),gp(Gy,Vy),Gy.prototype.na=function(){this.a.dispatchEvent("a")},Gy.prototype.ma=function(t){this.a.dispatchEvent(new Wy(t))},Gy.prototype.la=function(t){this.a.dispatchEvent(new Hy)},Gy.prototype.ka=function(){this.a.dispatchEvent("b")},qy.prototype.createWebChannel=qy.prototype.a,By.prototype.send=By.prototype.La,By.prototype.open=By.prototype.Ka,By.prototype.close=By.prototype.close,Zd.NO_ERROR=0,Zd.TIMEOUT=8,Zd.HTTP_ERROR=6,tv.COMPLETE="complete",(rv.EventType=ov).OPEN="a",ov.CLOSE="b",ov.ERROR="c",ov.MESSAGE="d",Ed.prototype.listen=Ed.prototype.ra,hy.prototype.listenOnce=hy.prototype.sa,hy.prototype.getLastError=hy.prototype.Ma,hy.prototype.getLastErrorCode=hy.prototype.qa,hy.prototype.getStatus=hy.prototype.S,hy.prototype.getResponseJson=hy.prototype.Ja,hy.prototype.getResponseText=hy.prototype.Y,hy.prototype.send=hy.prototype.$;var Qy={createWebChannelTransport:function(){return new qy},ErrorCode:Zd,EventType:tv,WebChannel:rv,XhrIo:hy},Ky=Qy.createWebChannelTransport,zy=Qy.ErrorCode,Yy=Qy.EventType,Xy=Qy.WebChannel,Jy=Qy.XhrIo,$y=Kl.SDK_VERSION,Zy=new Ra("@firebase/firestore");function tg(){return Zy.logLevel}function eg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zy.logLevel<=Ia.DEBUG){var r=e.map(rg);Zy.debug.apply(Zy,ks(["Firestore ("+$y+"): "+t],r))}}function ng(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zy.logLevel<=Ia.ERROR){var r=e.map(rg);Zy.error.apply(Zy,ks(["Firestore ("+$y+"): "+t],r))}}function rg(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function ig(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+$y+") INTERNAL ASSERTION FAILED: "+t;throw ng(e),new Error(e)}function og(t){t||ig()}function sg(t){return t}function ag(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ug=(cg.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ag(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},cg);function cg(){}function hg(t,e){return t<e?-1:e<t?1:0}function lg(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function fg(t){return t+"\0"}function pg(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var dg=(Object.defineProperty(vg.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),vg.prototype.isEqual=function(t){return t instanceof vg&&t.projectId===this.projectId&&t.database===this.database},vg.prototype.o=function(t){return hg(this.projectId,t.projectId)||hg(this.database,t.database)},vg);function vg(t,e){this.projectId=t,this.database=e||"(default)"}function yg(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var bg,wg,_g=(Dg.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},Dg.prototype.has=function(t){return void 0!==this.get(t)},Dg.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},Dg.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},Dg.prototype.forEach=function(a){gg(this.l,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},Dg.prototype._=function(){return mg(this.l)},Dg),Eg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ig=(Es(Pg,wg=Error),Pg),Tg=(Rg.now=function(){return Rg.fromMillis(Date.now())},Rg.fromDate=function(t){return Rg.fromMillis(t.getTime())},Rg.fromMillis=function(t){var e=Math.floor(t/1e3);return new Rg(e,1e6*(t-1e3*e))},Rg.prototype.toDate=function(){return new Date(this.toMillis())},Rg.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Rg.prototype.T=function(t){return this.seconds===t.seconds?hg(this.nanoseconds,t.nanoseconds):hg(this.seconds,t.seconds)},Rg.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Rg.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Rg.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Rg),Sg=(Og.I=function(t){return new Og(t)},Og.min=function(){return new Og(new Tg(0,0))},Og.prototype.o=function(t){return this.timestamp.T(t.timestamp)},Og.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Og.prototype.A=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Og.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Og.prototype.R=function(){return this.timestamp},Og),Cg=(Object.defineProperty(kg.prototype,"length",{get:function(){return this.m},enumerable:!0,configurable:!0}),kg.prototype.isEqual=function(t){return 0===kg.P(this,t)},kg.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof kg?t.forEach(function(t){e.push(t)}):e.push(t),this.V(e)},kg.prototype.limit=function(){return this.offset+this.length},kg.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},kg.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},kg.prototype.v=function(){return this.segments[this.offset]},kg.prototype.S=function(){return this.get(this.length-1)},kg.prototype.get=function(t){return this.segments[this.offset+t]},kg.prototype._=function(){return 0===this.length},kg.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},kg.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},kg.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},kg.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},kg.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},kg),Ng=(Es(Ag,bg=Cg),Ag.prototype.V=function(t,e,n){return new Ag(t,e,n)},Ag.prototype.N=function(){return this.F().join("/")},Ag.prototype.toString=function(){return this.N()},Ag.$=function(t){if(0<=t.indexOf("//"))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Ag(t.split("/").filter(function(t){return 0<t.length}))},Ag);function Ag(){return null!==bg&&bg.apply(this,arguments)||this}function kg(t,e,n){void 0===e?e=0:e>t.length&&ig(),void 0===n?n=t.length-e:n>t.length-e&&ig(),this.segments=t,this.offset=e,this.m=n}function Og(t){this.timestamp=t}function Rg(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Ig(Eg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Ig(Eg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ig(Eg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Ig(Eg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Pg(t,e){var n=this;return(n=wg.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Dg(t,e){this.h=t,this.u=e,this.l={}}Ng.k=new Ng([]);var xg,Lg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mg=(Es(Fg,xg=Cg),Fg.prototype.V=function(t,e,n){return new Fg(t,e,n)},Fg.M=function(t){return Lg.test(t)},Fg.prototype.N=function(){return this.F().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Fg.M(t)||(t="`"+t+"`"),t}).join(".")},Fg.prototype.toString=function(){return this.N()},Fg.prototype.L=function(){return 1===this.length&&"__name__"===this.get(0)},Fg.O=function(){return new Fg(["__name__"])},Fg.B=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Ig(Eg.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Ig(Eg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Ig(Eg.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fg(e)},Fg);function Fg(){return null!==xg&&xg.apply(this,arguments)||this}Mg.k=new Mg([]);var Ug=(jg.q=function(t){return new jg(Ng.$(t).g(5))},jg.prototype.U=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},jg.prototype.isEqual=function(t){return null!==t&&0===Ng.P(this.path,t.path)},jg.prototype.toString=function(){return this.path.toString()},jg.P=function(t,e){return Ng.P(t.path,e.path)},jg.W=function(t){return t.length%2==0},jg.j=function(t){return new jg(new Ng(t.slice()))},jg);function jg(t){this.path=t}function Vg(t){return null==t}function qg(t){return-0===t&&1/t==-1/0}function Bg(t){return"number"==typeof t&&Number.isInteger(t)&&!qg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}Ug.EMPTY=new Ug(new Ng([]));var Wg=(Hg.fromBase64String=function(t){return new Hg(atob(t))},Hg.fromUint8Array=function(t){return new Hg(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Hg.prototype.toBase64=function(){return t=this.K,btoa(t);var t},Hg.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.K)},Hg.prototype.G=function(){return 2*this.K.length},Hg.prototype.o=function(t){return hg(this.K,t.K)},Hg.prototype.isEqual=function(t){return this.K===t.K},Hg);function Hg(t){this.K=t}Wg.H=new Wg("");function Gg(t){this.count=t}var Qg,Kg,zg=(Yg.prototype.X=function(t){return new Yg(this.target,this.targetId,this.Y,t,this.J,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Yg.prototype.Z=function(t,e){return new Yg(this.target,this.targetId,this.Y,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Yg.prototype.tt=function(t){return new Yg(this.target,this.targetId,this.Y,this.sequenceNumber,this.J,t,this.resumeToken)},Yg);function Yg(t,e,n,r,i,o,s){void 0===i&&(i=Sg.min()),void 0===o&&(o=Sg.min()),void 0===s&&(s=Wg.H),this.target=t,this.targetId=e,this.Y=n,this.sequenceNumber=r,this.J=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Xg(t){switch(t){case Eg.OK:return ig();case Eg.CANCELLED:case Eg.UNKNOWN:case Eg.DEADLINE_EXCEEDED:case Eg.RESOURCE_EXHAUSTED:case Eg.INTERNAL:case Eg.UNAVAILABLE:case Eg.UNAUTHENTICATED:return;case Eg.INVALID_ARGUMENT:case Eg.NOT_FOUND:case Eg.ALREADY_EXISTS:case Eg.PERMISSION_DENIED:case Eg.FAILED_PRECONDITION:case Eg.ABORTED:case Eg.OUT_OF_RANGE:case Eg.UNIMPLEMENTED:case Eg.DATA_LOSS:return 1;default:return ig()}}function Jg(t){if(void 0===t)return ng("GRPC error has no .code"),Eg.UNKNOWN;switch(t){case Qg.OK:return Eg.OK;case Qg.CANCELLED:return Eg.CANCELLED;case Qg.UNKNOWN:return Eg.UNKNOWN;case Qg.DEADLINE_EXCEEDED:return Eg.DEADLINE_EXCEEDED;case Qg.RESOURCE_EXHAUSTED:return Eg.RESOURCE_EXHAUSTED;case Qg.INTERNAL:return Eg.INTERNAL;case Qg.UNAVAILABLE:return Eg.UNAVAILABLE;case Qg.UNAUTHENTICATED:return Eg.UNAUTHENTICATED;case Qg.INVALID_ARGUMENT:return Eg.INVALID_ARGUMENT;case Qg.NOT_FOUND:return Eg.NOT_FOUND;case Qg.ALREADY_EXISTS:return Eg.ALREADY_EXISTS;case Qg.PERMISSION_DENIED:return Eg.PERMISSION_DENIED;case Qg.FAILED_PRECONDITION:return Eg.FAILED_PRECONDITION;case Qg.ABORTED:return Eg.ABORTED;case Qg.OUT_OF_RANGE:return Eg.OUT_OF_RANGE;case Qg.UNIMPLEMENTED:return Eg.UNIMPLEMENTED;case Qg.DATA_LOSS:return Eg.DATA_LOSS;default:return ig()}}(Kg=Qg=Qg||{})[Kg.OK=0]="OK",Kg[Kg.CANCELLED=1]="CANCELLED",Kg[Kg.UNKNOWN=2]="UNKNOWN",Kg[Kg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kg[Kg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kg[Kg.NOT_FOUND=5]="NOT_FOUND",Kg[Kg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kg[Kg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kg[Kg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kg[Kg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kg[Kg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kg[Kg.ABORTED=10]="ABORTED",Kg[Kg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kg[Kg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kg[Kg.INTERNAL=13]="INTERNAL",Kg[Kg.UNAVAILABLE=14]="UNAVAILABLE",Kg[Kg.DATA_LOSS=15]="DATA_LOSS";var $g=(rm.prototype.et=function(t,e){return new rm(this.P,this.root.et(t,e,this.P).st(null,null,tm.nt,null,null))},rm.prototype.remove=function(t){return new rm(this.P,this.root.remove(t,this.P).st(null,null,tm.nt,null,null))},rm.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},rm.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},rm.prototype._=function(){return this.root._()},Object.defineProperty(rm.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),rm.prototype.it=function(){return this.root.it()},rm.prototype.rt=function(){return this.root.rt()},rm.prototype.ot=function(t){return this.root.ot(t)},rm.prototype.forEach=function(n){this.ot(function(t,e){return n(t,e),!1})},rm.prototype.toString=function(){var n=[];return this.ot(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},rm.prototype.ht=function(t){return this.root.ht(t)},rm.prototype.at=function(){return new Zg(this.root,null,this.P,!1)},rm.prototype.ut=function(t){return new Zg(this.root,t,this.P,!1)},rm.prototype.ct=function(){return new Zg(this.root,null,this.P,!0)},rm.prototype.lt=function(t){return new Zg(this.root,t,this.P,!0)},rm),Zg=(nm.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},nm.prototype.wt=function(){return 0<this.ft.length},nm.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},nm),tm=(em.prototype.st=function(t,e,n,r,i){return new em(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},em.prototype._=function(){return!1},em.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},em.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},em.prototype.min=function(){return this.left._()?this:this.left.min()},em.prototype.it=function(){return this.min().key},em.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},em.prototype.et=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.st(null,null,null,r.left.et(t,e,n),null):0===i?r.st(null,e,null,null,null):r.st(null,null,null,null,r.right.et(t,e,n))).Et()},em.prototype.It=function(){if(this.left._())return em.EMPTY;var t=this;return t.left.At()||t.left.left.At()||(t=t.Rt()),(t=t.st(null,null,null,t.left.It(),null)).Et()},em.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left._()||r.left.At()||r.left.left.At()||(r=r.Rt()),r=r.st(null,null,null,r.left.remove(t,e),null);else{if(r.left.At()&&(r=r.Pt()),r.right._()||r.right.At()||r.right.left.At()||(r=r.Vt()),0===e(t,r.key)){if(r.right._())return em.EMPTY;n=r.right.min(),r=r.st(n.key,n.value,null,null,r.right.It())}r=r.st(null,null,null,null,r.right.remove(t,e))}return r.Et()},em.prototype.At=function(){return this.color},em.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.pt()),t},em.prototype.Rt=function(){var t=this.pt();return t.right.left.At()&&(t=(t=(t=t.st(null,null,null,null,t.right.Pt())).gt()).pt()),t},em.prototype.Vt=function(){var t=this.pt();return t.left.left.At()&&(t=(t=t.Pt()).pt()),t},em.prototype.gt=function(){var t=this.st(null,null,em.RED,null,this.right.left);return this.right.st(null,null,this.color,t,null)},em.prototype.Pt=function(){var t=this.st(null,null,em.RED,this.left.right,null);return this.left.st(null,null,this.color,null,t)},em.prototype.pt=function(){var t=this.left.st(null,null,!this.left.color,null,null),e=this.right.st(null,null,!this.right.color,null,null);return this.st(null,null,!this.color,t,e)},em.prototype.yt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},em.prototype.bt=function(){if(this.At()&&this.left.At())throw ig();if(this.right.At())throw ig();var t=this.left.bt();if(t!==this.right.bt())throw ig();return t+(this.At()?0:1)},em);function em(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:em.RED,this.left=null!=r?r:em.EMPTY,this.right=null!=i?i:em.EMPTY,this.size=this.left.size+1+this.right.size}function nm(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}function rm(t,e){this.P=t,this.root=e||tm.EMPTY}function im(){this.size=0}tm.EMPTY=null,tm.RED=!0,tm.nt=!1,tm.EMPTY=(Object.defineProperty(im.prototype,"key",{get:function(){throw ig()},enumerable:!0,configurable:!0}),Object.defineProperty(im.prototype,"value",{get:function(){throw ig()},enumerable:!0,configurable:!0}),Object.defineProperty(im.prototype,"color",{get:function(){throw ig()},enumerable:!0,configurable:!0}),Object.defineProperty(im.prototype,"left",{get:function(){throw ig()},enumerable:!0,configurable:!0}),Object.defineProperty(im.prototype,"right",{get:function(){throw ig()},enumerable:!0,configurable:!0}),im.prototype.st=function(t,e,n,r,i){return this},im.prototype.et=function(t,e,n){return new tm(t,e)},im.prototype.remove=function(t,e){return this},im.prototype._=function(){return!0},im.prototype.ot=function(t){return!1},im.prototype.ht=function(t){return!1},im.prototype.it=function(){return null},im.prototype.rt=function(){return null},im.prototype.At=function(){return!1},im.prototype.yt=function(){return!0},im.prototype.bt=function(){return 0},new im);var om=(cm.prototype.has=function(t){return null!==this.data.get(t)},cm.prototype.first=function(){return this.data.it()},cm.prototype.last=function(){return this.data.rt()},Object.defineProperty(cm.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),cm.prototype.indexOf=function(t){return this.data.indexOf(t)},cm.prototype.forEach=function(n){this.data.ot(function(t,e){return n(t),!1})},cm.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(0<=this.P(r.key,t[1]))return;e(r.key)}},cm.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},cm.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},cm.prototype.at=function(){return new sm(this.data.at())},cm.prototype.ut=function(t){return new sm(this.data.ut(t))},cm.prototype.add=function(t){return this.st(this.data.remove(t).et(t,!0))},cm.prototype.delete=function(t){return this.has(t)?this.st(this.data.remove(t)):this},cm.prototype._=function(){return this.data._()},cm.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},cm.prototype.isEqual=function(t){if(!(t instanceof cm))return!1;if(this.size!==t.size)return!1;for(var e=this.data.at(),n=t.data.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(0!==this.P(r,i))return!1}return!0},cm.prototype.F=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},cm.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},cm.prototype.st=function(t){var e=new cm(this.P);return e.data=t,e},cm),sm=(um.prototype.dt=function(){return this.Ft.dt().key},um.prototype.wt=function(){return this.Ft.wt()},um),am=new $g(Ug.P);function um(t){this.Ft=t}function cm(t){this.P=t,this.data=new $g(this.P)}function hm(){return am}function lm(){return hm()}var fm=new $g(Ug.P);function pm(){return fm}var dm=new $g(Ug.P),vm=new om(Ug.P);function ym(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=vm,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var gm=new om(hg);function mm(){return gm}function bm(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r}function wm(t,e){this.targetId=t,this.ee=e}function _m(t,e,n,r){void 0===n&&(n=Wg.H),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var Em=(Lm.kt=function(t){return new Lm(t.P)},Lm.prototype.has=function(t){return null!=this.Nt.get(t)},Lm.prototype.get=function(t){return this.Nt.get(t)},Lm.prototype.first=function(){return this.$t.it()},Lm.prototype.last=function(){return this.$t.rt()},Lm.prototype._=function(){return this.$t._()},Lm.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(Lm.prototype,"size",{get:function(){return this.$t.size},enumerable:!0,configurable:!0}),Lm.prototype.forEach=function(n){this.$t.ot(function(t,e){return n(t),!1})},Lm.prototype.add=function(t){var e=this.delete(t.key);return e.st(e.Nt.et(t.key,t),e.$t.et(t,null))},Lm.prototype.delete=function(t){var e=this.get(t);return e?this.st(this.Nt.remove(t),this.$t.remove(e)):this},Lm.prototype.isEqual=function(t){if(!(t instanceof Lm))return!1;if(this.size!==t.size)return!1;for(var e=this.$t.at(),n=t.$t.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(!r.isEqual(i))return!1}return!0},Lm.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Lm.prototype.st=function(t,e){var n=new Lm;return n.P=this.P,n.Nt=t,n.$t=e,n},Lm),Im=(xm.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);!n||0!==t.type&&3===n.type?this.xt=this.xt.et(e,t):3===t.type&&1!==n.type?this.xt=this.xt.et(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.et(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.et(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.et(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.et(e,{type:2,doc:t.doc}):ig()},xm.prototype.Mt=function(){var n=[];return this.xt.ot(function(t,e){n.push(e)}),n},xm),Tm=(Dm.Ut=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Dm(t,e,Em.kt(e),i,n,r,!0,!1)},Object.defineProperty(Dm.prototype,"hasPendingWrites",{get:function(){return!this.Ot._()},enumerable:!0,configurable:!0}),Dm.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Ot.isEqual(t.Ot)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Dm),Sm=(Pm.Gt=function(t,e){var n=new Map;return n.set(t,Cm.zt(t,e)),new Pm(Sg.min(),n,mm(),hm(),ym())},Pm),Cm=(Rm.zt=function(t,e){return new Rm(Wg.H,e,ym(),ym(),ym())},Rm),Nm=(Object.defineProperty(Om.prototype,"Ht",{get:function(){return this.re},enumerable:!0,configurable:!0}),Object.defineProperty(Om.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!0,configurable:!0}),Object.defineProperty(Om.prototype,"he",{get:function(){return 0!==this.se},enumerable:!0,configurable:!0}),Object.defineProperty(Om.prototype,"ae",{get:function(){return this.oe},enumerable:!0,configurable:!0}),Om.prototype.ue=function(t){0<t.G()&&(this.oe=!0,this.ie=t)},Om.prototype.ce=function(){var n=ym(),r=ym(),i=ym();return this.ne.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:ig()}}),new Cm(this.ie,this.re,n,r,i)},Om.prototype.le=function(){this.oe=!1,this.ne=Fm()},Om.prototype._e=function(t,e){this.oe=!0,this.ne=this.ne.et(t,e)},Om.prototype.fe=function(t){this.oe=!0,this.ne=this.ne.remove(t)},Om.prototype.de=function(){this.se+=1},Om.prototype.we=function(){--this.se},Om.prototype.Te=function(){this.oe=!0,this.re=!0},Om),Am=(km.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof Iw?this.Ve(r,t.te):t.te instanceof Tw&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ge(s,t.key,t.te)}},km.prototype.pe=function(n){var r=this;this.ye(n,function(t){var e=r.be(t);switch(n.state){case 0:r.ve(t)&&e.ue(n.resumeToken);break;case 1:e.we(),e.he||e.le(),e.ue(n.resumeToken);break;case 2:e.we(),e.he||r.removeTarget(t);break;case 3:r.ve(t)&&(e.Te(),e.ue(n.resumeToken));break;case 4:r.ve(t)&&(r.Se(t),e.ue(n.resumeToken));break;default:ig()}})},km.prototype.ye=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Ie.forEach(function(t,e){r.ve(e)&&n(e)})},km.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(e_(i))if(0===n){var o=new Ug(i.path);this.ge(e,o,new Tw(o,Sg.min()))}else og(1===n);else this.Fe(e)!==n&&(this.Se(e),this.me=this.me.add(e))}},km.prototype.Ne=function(i){var o=this,s=new Map;this.Ie.forEach(function(t,e){var n=o.Ce(e);if(n){if(t.Ht&&e_(n.target)){var r=new Ug(n.target.path);null!==o.Ae.get(r)||o.$e(e,r)||o.ge(e,r,new Tw(r,i))}t.ae&&(s.set(e,t.ce()),t.le())}});var r=ym();this.Re.forEach(function(t,e){var n=!0;e.St(function(t){var e=o.Ce(t);return!e||2===e.Y||(n=!1)}),n&&(r=r.add(t))});var t=new Sm(i,s,this.me,this.Ae,r);return this.Ae=hm(),this.Re=Mm(),this.me=new om(hg),t},km.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.Ae=this.Ae.et(e.key,e),this.Re=this.Re.et(e.key,this.ke(e.key).add(t))}},km.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Re=this.Re.et(e,this.ke(e).delete(t)),n&&(this.Ae=this.Ae.et(e,n))}},km.prototype.removeTarget=function(t){this.Ie.delete(t)},km.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},km.prototype.de=function(t){this.be(t).de()},km.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new Nm,this.Ie.set(t,e)),e},km.prototype.ke=function(t){var e=this.Re.get(t);return e||(e=new om(hg),this.Re=this.Re.et(t,e)),e},km.prototype.ve=function(t){var e=null!==this.Ce(t);return e||eg("WatchChangeAggregator","Detected inactive target",t),e},km.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},km.prototype.Se=function(e){var n=this;this.Ie.set(e,new Nm),this.Ee.xe(e).forEach(function(t){n.ge(e,t,null)})},km.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},km);function km(t){this.Ee=t,this.Ie=new Map,this.Ae=hm(),this.Re=Mm(),this.me=new om(hg)}function Om(){this.se=0,this.ne=Fm(),this.ie=Wg.H,this.re=!1,this.oe=!0}function Rm(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}function Pm(t,e,n,r,i){this.J=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}function Dm(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Lt=n,this.docChanges=r,this.Ot=i,this.fromCache=o,this.Bt=s,this.qt=a}function xm(){this.xt=new $g(Ug.P)}function Lm(n){this.P=n?function(t,e){return n(t,e)||Ug.P(t.key,e.key)}:function(t,e){return Ug.P(t.key,e.key)},this.Nt=pm(),this.$t=new $g(this.P)}function Mm(){return new $g(Ug.P)}function Fm(){return new $g(Ug.P)}function Um(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jm(t){var e=Km(t.mapValue.fields.__local_write_time__.timestampValue);return new Tg(e.seconds,e.nanos)}var Vm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qm(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Um(t)?4:10:ig()}function Bm(i,t){var e,n,r,o=qm(i);if(o!==qm(t))return!1;switch(o){case 0:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return jm(i).isEqual(jm(t));case 3:return function(t){if("string"==typeof i.timestampValue&&"string"==typeof t.timestampValue&&i.timestampValue.length===t.timestampValue.length)return i.timestampValue===t.timestampValue;var e=Km(i.timestampValue),n=Km(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(t);case 5:return i.stringValue===t.stringValue;case 6:return r=t,Ym(i.bytesValue).isEqual(Ym(r.bytesValue));case 7:return i.referenceValue===t.referenceValue;case 8:return n=t,zm((e=i).geoPointValue.latitude)===zm(n.geoPointValue.latitude)&&zm(e.geoPointValue.longitude)===zm(n.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zm(t.integerValue)===zm(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=zm(t.doubleValue),r=zm(e.doubleValue);return n===r?qg(n)===qg(r):isNaN(n)&&isNaN(r)}return!1}(i,t);case 9:return lg(i.arrayValue.values||[],t.arrayValue.values||[],Bm);case 10:return function(t){var e=i.mapValue.fields||{},n=t.mapValue.fields||{};if(yg(e)!==yg(n))return!1;for(var r in e)if(e.hasOwnProperty(r)&&(void 0===n[r]||!Bm(e[r],n[r])))return!1;return!0}(t);default:return ig()}}function Wm(t,e){return void 0!==(t.values||[]).find(function(t){return Bm(t,e)})}function Hm(t,e){var n,r,i,o,s,a,u,c,h,l,f=qm(t),p=qm(e);if(f!==p)return hg(f,p);switch(f){case 0:return 0;case 1:return hg(t.booleanValue,e.booleanValue);case 2:return c=e,h=zm(t.integerValue||t.doubleValue),l=zm(c.integerValue||c.doubleValue),h<l?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return Gm(t.timestampValue,e.timestampValue);case 4:return Gm(jm(t),jm(e));case 5:return hg(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=Ym(o),u=Ym(s),a.o(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=hg(n[i],r[i]);if(0!==o)return o}return hg(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=hg(zm(n.latitude),zm(r.latitude)))?i:hg(zm(n.longitude),zm(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Hm(n[i],r[i]);if(o)return o}return hg(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=hg(r[s],o[s]);if(0!==a)return a;var u=Hm(n[r[s]],i[o[s]]);if(0!==u)return u}return hg(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ig()}}function Gm(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return hg(t,e);var n=Km(t),r=Km(e),i=hg(n.seconds,r.seconds);return 0!==i?i:hg(n.nanos,r.nanos)}function Qm(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=Km(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?Ym(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,Ug.q(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++){e?e=!1:t+=",",t+=s(r[n])}return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):ig();var t,e,n}(t)}function Km(t){if(og(!!t),"string"!=typeof t)return{seconds:zm(t.seconds),nanos:zm(t.nanos)};var e=0,n=Vm.exec(t);if(og(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}function zm(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ym(t){return"string"==typeof t?Wg.fromBase64String(t):Wg.fromUint8Array(t)}function Xm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function Jm(t){return t&&"integerValue"in t}function $m(t){return!!t&&"arrayValue"in t}function Zm(t){return t&&"nullValue"in t}function tb(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function eb(t){return t&&"mapValue"in t}var nb={asc:"ASCENDING",desc:"DESCENDING"},rb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ib=function(t,e){this.s=t,this.Le=e};function ob(t){return{integerValue:""+t}}function sb(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qg(e)?"-0":e}}function ab(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ub(t,e){return t.Le?e.toBase64():e.toUint8Array()}function cb(t,e){return t.Le?(og(void 0===e||"string"==typeof e),Wg.fromBase64String(e||"")):(og(void 0===e||e instanceof Uint8Array),Wg.fromUint8Array(e||new Uint8Array))}function hb(t){return og(!!t),Sg.I((e=Km(t),new Tg(e.seconds,e.nanos)));var e}function lb(t,e){return new Ng(["projects",t.projectId,"databases",t.database]).child("documents").child(e).N()}function fb(t){var e=Ng.$(t);return og(Ab(e)),e}function pb(t,e){return lb(t.s,e.path)}function db(t,e){var n=fb(e);return og(n.get(1)===t.s.projectId),og(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new Ug(mb(n))}function vb(t,e){return lb(t.s,e)}function yb(t){var e=fb(t);return 4===e.length?Ng.k:mb(e)}function gb(t){return new Ng(["projects",t.s.projectId,"databases",t.s.database]).N()}function mb(t){return og(4<t.length&&"documents"===t.get(4)),t.g(5)}function bb(t,e,n){return{name:pb(t,e),fields:n.proto.mapValue.fields}}function wb(t,e){var n,r,i,o,s,a,u;if(e instanceof zb)n={update:bb(t,e.key,e.value)};else if(e instanceof Jb)n={delete:pb(t,e.key)};else if(e instanceof Yb)n={update:bb(t,e.key,e.data),updateMask:(r=e.Oe,i=[],r.fields.forEach(function(t){return i.push(t.N())}),{fieldPaths:i})};else if(e instanceof Xb)n={transform:{document:pb(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){return function(t){var e=t.transform;if(e instanceof kb)return{fieldPath:t.field.N(),setToServerValue:"REQUEST_TIME"};if(e instanceof Rb)return{fieldPath:t.field.N(),appendMissingElements:{values:e.elements}};if(e instanceof Pb)return{fieldPath:t.field.N(),removeAllFromArray:{values:e.elements}};if(e instanceof Db)return{fieldPath:t.field.N(),increment:e.Be};throw ig()}(t)})}};else{if(!(e instanceof $b))return ig();n={verify:pb(t,e.key)}}return e.Ue.qe||(n.currentDocument=(o=t,void 0!==(s=e.Ue).updateTime?{updateTime:(a=o,u=s.updateTime,ab(a,u.R()))}:void 0!==s.exists?{exists:s.exists}:ig())),n}function _b(e,t){var n,r,i=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?Qb.updateTime(hb(n.updateTime)):void 0!==n.exists?Qb.exists(n.exists):Qb.Qe():Qb.Qe();if(t.update){t.update.name;var o=db(e,t.update.name),s=new Zb({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=(r=t.updateMask.fieldPaths||[],new Hb(r.map(function(t){return Mg.B(t)})));return new Yb(o,s,a,i)}return new zb(o,s,i)}if(t.delete){var u=db(e,t.delete);return new Jb(u,i)}if(t.transform){var c=db(e,t.transform.document),h=t.transform.fieldTransforms.map(function(t){return function(t,e){var n=null;if("setToServerValue"in e)og("REQUEST_TIME"===e.setToServerValue),n=kb.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Rb(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Pb(i)}else"increment"in e?n=new Db(t,e.increment):ig();var o=Mg.B(e.fieldPath);return new Gb(o,n)}(e,t)});return og(!0===i.exists),new Xb(c,h)}if(t.verify){var l=db(e,t.verify);return new $b(l,i)}return ig()}function Eb(t,e){return{documents:[vb(t,e.path)]}}function Ib(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=vb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=vb(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return t instanceof Nw?function(t){if("=="===t.op){if(tb(t.value))return{unaryFilter:{field:Cb(t.field),op:"IS_NAN"}};if(Zm(t.value))return{unaryFilter:{field:Cb(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Cb(t.field),op:(e=t.op,rb[e]),value:t.value}};var e}(t):ig()});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return{field:Cb((e=t).field),direction:(n=e.dir,nb[n])};var e,n})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.Le||Vg(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=Tb(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Tb(e.endAt)),n}function Tb(t){return{before:t.before,values:t.position}}function Sb(t){var e=!!t.before,n=t.values||[];return new Dw(n,e)}function Cb(t){return{fieldPath:t.N()}}function Nb(t){return Mg.B(t.fieldPath)}function Ab(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var kb=(Ob.prototype.je=function(t,e){return n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},t&&(n.fields.__previous_value__=t),{mapValue:n};var n},Ob.prototype.Ke=function(t,e){return e},Ob.prototype.Ge=function(t){return null},Ob.prototype.isEqual=function(t){return t instanceof Ob},Ob);function Ob(){}kb.instance=new kb;var Rb=(Mb.prototype.je=function(t,e){return this.apply(t)},Mb.prototype.Ke=function(t,e){return this.apply(t)},Mb.prototype.apply=function(t){for(var n=Fb(t),e=function(e){n.some(function(t){return Bm(t,e)})||n.push(e)},r=0,i=this.elements;r<i.length;r++)e(i[r]);return{arrayValue:{values:n}}},Mb.prototype.Ge=function(t){return null},Mb.prototype.isEqual=function(t){return t instanceof Mb&&lg(this.elements,t.elements,Bm)},Mb),Pb=(Lb.prototype.je=function(t,e){return this.apply(t)},Lb.prototype.Ke=function(t,e){return this.apply(t)},Lb.prototype.apply=function(t){for(var n=Fb(t),e=function(e){n=n.filter(function(t){return!Bm(t,e)})},r=0,i=this.elements;r<i.length;r++)e(i[r]);return{arrayValue:{values:n}}},Lb.prototype.Ge=function(t){return null},Lb.prototype.isEqual=function(t){return t instanceof Lb&&lg(this.elements,t.elements,Bm)},Lb),Db=(xb.prototype.je=function(t,e){var n=this.Ge(t),r=this.asNumber(n)+this.asNumber(this.Be);return Jm(n)&&Jm(this.Be)?ob(r):sb(this.serializer,r)},xb.prototype.Ke=function(t,e){return e},xb.prototype.Ge=function(t){return Jm(e=t)||e&&"doubleValue"in e?t:{integerValue:0};var e},xb.prototype.isEqual=function(t){return t instanceof xb&&Bm(this.Be,t.Be)},xb.prototype.asNumber=function(t){return zm(t.integerValue||t.doubleValue)},xb);function xb(t,e){this.serializer=t,this.Be=e}function Lb(t){this.elements=t}function Mb(t){this.elements=t}function Fb(t){return $m(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Ub(t,e){this.version=t,this.transformResults=e}var jb,Vb,qb,Bb,Wb,Hb=(lw.prototype.ze=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},lw.prototype.isEqual=function(t){return lg(this.fields,t.fields,function(t,e){return t.isEqual(e)})},lw),Gb=(hw.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},hw),Qb=(cw.Qe=function(){return new cw},cw.exists=function(t){return new cw(void 0,t)},cw.updateTime=function(t){return new cw(t)},Object.defineProperty(cw.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),cw.prototype.He=function(t){return void 0!==this.updateTime?t instanceof Iw&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof Iw},cw.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},cw),Kb=(uw.prototype.Ye=function(t){},uw.Je=function(t){return t instanceof Iw?t.version:Sg.min()},uw),zb=(Es(aw,Wb=Kb),aw.prototype.Ke=function(t,e){this.Ye(t);var n=e.version;return new Iw(this.key,n,this.value,{hasCommittedMutations:!0})},aw.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=Kb.Je(t);return new Iw(this.key,r,this.value,{Xe:!0})},aw.prototype.Ze=function(t){return null},aw.prototype.isEqual=function(t){return t instanceof aw&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Ue.isEqual(t.Ue)},aw),Yb=(Es(sw,Bb=Kb),sw.prototype.Ke=function(t,e){if(this.Ye(t),!this.Ue.He(t))return new Sw(this.key,e.version);var n=this.ts(t);return new Iw(this.key,e.version,n,{hasCommittedMutations:!0})},sw.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=Kb.Je(t),i=this.ts(t);return new Iw(this.key,r,i,{Xe:!0})},sw.prototype.Ze=function(t){return null},sw.prototype.isEqual=function(t){return t instanceof sw&&this.key.isEqual(t.key)&&this.Oe.isEqual(t.Oe)&&this.Ue.isEqual(t.Ue)},sw.prototype.ts=function(t){var e;return e=t instanceof Iw?t.data():Zb.empty(),this.es(e)},sw.prototype.es=function(t){var n=this,r=new tw(t);return this.Oe.fields.forEach(function(t){if(!t._()){var e=n.data.field(t);null!==e?r.set(t,e):r.delete(t)}}),r.ss()},sw),Xb=(Es(ow,qb=Kb),ow.prototype.Ke=function(t,e){if(this.Ye(t),og(null!=e.transformResults),!this.Ue.He(t))return new Sw(this.key,e.version);var n=this.ns(t),r=this.rs(t,e.transformResults),i=e.version,o=this.os(n.data(),r);return new Iw(this.key,i,o,{hasCommittedMutations:!0})},ow.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=this.ns(t),i=this.hs(n,t,e),o=this.os(r.data(),i);return new Iw(this.key,r.version,o,{Xe:!0})},ow.prototype.Ze=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Iw?t.field(i.field):void 0,s=i.transform.Ge(o||null);null!=s&&(e=null==e?(new tw).set(i.field,s):e.set(i.field,s))}return e?e.ss():null},ow.prototype.isEqual=function(t){return t instanceof ow&&this.key.isEqual(t.key)&&lg(this.fieldTransforms,t.fieldTransforms,function(t,e){return t.isEqual(e)})&&this.Ue.isEqual(t.Ue)},ow.prototype.ns=function(t){return t},ow.prototype.rs=function(t,e){var n=[];og(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof Iw&&(s=t.field(i.field)),n.push(o.Ke(s,e[r]))}return n},ow.prototype.hs=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof Iw&&(u=e.field(s.field)),null===u&&n instanceof Iw&&(u=n.field(s.field)),r.push(a.je(u,t))}return r},ow.prototype.os=function(t,e){for(var n=new tw(t),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.ss()},ow),Jb=(Es(iw,Vb=Kb),iw.prototype.Ke=function(t,e){return this.Ye(t),new Tw(this.key,e.version,{hasCommittedMutations:!0})},iw.prototype.je=function(t,e,n){return this.Ye(t),this.Ue.He(t)?new Tw(this.key,Sg.min()):t},iw.prototype.Ze=function(t){return null},iw.prototype.isEqual=function(t){return t instanceof iw&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},iw),$b=(Es(rw,jb=Kb),rw.prototype.Ke=function(t,e){ig()},rw.prototype.je=function(t,e,n){ig()},rw.prototype.Ze=function(t){ig()},rw.prototype.isEqual=function(t){return t instanceof rw&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},rw),Zb=(nw.empty=function(){return new nw({mapValue:{}})},nw.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!eb(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},nw.prototype.isEqual=function(t){return Bm(this.proto,t.proto)},nw),tw=(ew.prototype.set=function(t,e){return this.cs(t,e),this},ew.prototype.delete=function(t){return this.cs(t,null),this},ew.prototype.cs=function(t,e){for(var n=this.us,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map||(o=o&&10===qm(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),n=o}n.set(t.S(),e)},ew.prototype.ss=function(){var t=this.ls(Mg.k,this.us);return null!=t?new Zb(t):this.as},ew.prototype.ls=function(r,t){var i=this,o=!1,e=this.as.field(r),s=eb(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){if(t instanceof Map){var n=i.ls(r.child(e),t);null!=n&&(s[e]=n,o=!0)}else null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},ew);function ew(t){void 0===t&&(t=Zb.empty()),this.as=t,this.us=new Map}function nw(t){this.proto=t}function rw(t,e){var n=this;return(n=jb.call(this)||this).key=t,n.Ue=e,n.type=4,n}function iw(t,e){var n=this;return(n=Vb.call(this)||this).key=t,n.Ue=e,n.type=3,n}function ow(t,e){var n=this;return(n=qb.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Ue=Qb.exists(!0),n}function sw(t,e,n,r){var i=this;return(i=Bb.call(this)||this).key=t,i.data=e,i.Oe=n,i.Ue=r,i.type=1,i}function aw(t,e,n){var r=this;return(r=Wb.call(this)||this).key=t,r.value=e,r.Ue=n,r.type=0,r}function uw(){}function cw(t,e){this.updateTime=t,this.exists=e}function hw(t,e){this.field=t,this.transform=e}function lw(t){(this.fields=t).sort(Mg.P)}function fw(t){var a=[];return gg(t.fields||{},function(t,e){var n=new Mg([t]);if(eb(e)){var r=fw(e.mapValue).fields;if(0===r.length)a.push(n);else for(var i=0,o=r;i<o.length;i++){var s=o[i];a.push(n.child(s))}}else a.push(n)}),new Hb(a)}function pw(t,e){this.key=t,this.version=e}var dw,vw,yw,gw,mw,bw,ww,_w,Ew,Iw=(Es(Ww,Ew=pw),Ww.prototype.field=function(t){return this._s.field(t)},Ww.prototype.data=function(){return this._s},Ww.prototype.fs=function(){return this._s.proto},Ww.prototype.isEqual=function(t){return t instanceof Ww&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Xe===t.Xe&&this.hasCommittedMutations===t.hasCommittedMutations&&this._s.isEqual(t._s)},Ww.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this._s.toString()+", {hasLocalMutations: "+this.Xe+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Ww.prototype,"hasPendingWrites",{get:function(){return this.Xe||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ww),Tw=(Es(Bw,_w=pw),Bw.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Bw.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Bw.prototype.isEqual=function(t){return t instanceof Bw&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Bw),Sw=(Es(qw,ww=pw),qw.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(qw.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),qw.prototype.isEqual=function(t){return t instanceof qw&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},qw),Cw=(Vw.As=function(t){return new Vw(t)},Object.defineProperty(Vw.prototype,"orderBy",{get:function(){if(null===this.Ts){this.Ts=[];var t=this.Rs(),e=this.ms();if(null!==t&&null===e)t.L()||this.Ts.push(new zw(t)),this.Ts.push(new zw(Mg.O(),"asc"));else{for(var n=!1,r=0,i=this.ds;r<i.length;r++){var o=i[r];this.Ts.push(o),o.field.L()&&(n=!0)}if(!n){var s=0<this.ds.length?this.ds[this.ds.length-1].dir:"asc";this.Ts.push(new zw(Mg.O(),s))}}}return this.Ts},enumerable:!0,configurable:!0}),Vw.prototype.Ps=function(t){var e=this.filters.concat([t]);return new Vw(this.path,this.collectionGroup,this.ds.slice(),e,this.limit,this.ws,this.startAt,this.endAt)},Vw.prototype.Vs=function(t){var e=this.ds.concat([t]);return new Vw(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.ws,this.startAt,this.endAt)},Vw.prototype.gs=function(t){return new Vw(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},Vw.prototype.ps=function(t){return new Vw(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},Vw.prototype.ys=function(t){return new Vw(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),this.limit,this.ws,t,this.endAt)},Vw.prototype.bs=function(t){return new Vw(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),this.limit,this.ws,this.startAt,t)},Vw.prototype.vs=function(t){return new Vw(t,null,this.ds.slice(),this.filters.slice(),this.limit,this.ws,this.startAt,this.endAt)},Vw.prototype.Ss=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.ds.length||1===this.ds.length&&this.ds[0].field.L())},Vw.prototype.canonicalId=function(){return Zw(this.We())+"|lt:"+this.ws},Vw.prototype.toString=function(){return"Query(target="+(t=this.We(),e=t.path.N(),null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),0<t.filters.length&&(e+=", filters: ["+t.filters.join(", ")+"]"),Vg(t.limit)||(e+=", limit: "+t.limit),0<t.orderBy.length&&(e+=", orderBy: ["+t.orderBy.join(", ")+"]"),t.startAt&&(e+=", startAt: "+Hw(t.startAt)),t.endAt&&(e+=", endAt: "+Hw(t.endAt)),"Target("+e+")")+"; limitType="+this.ws+")";var t,e},Vw.prototype.isEqual=function(t){return t_(this.We(),t.We())&&this.ws===t.ws},Vw.prototype.Ds=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.L()}return 0},Vw.prototype.matches=function(t){return this.Cs(t)&&this.Fs(t)&&this.Ns(t)&&this.$s(t)},Vw.prototype.ks=function(){return!Vg(this.limit)&&"F"===this.ws},Vw.prototype.xs=function(){return!Vg(this.limit)&&"L"===this.ws},Vw.prototype.ms=function(){return 0<this.ds.length?this.ds[0].field:null},Vw.prototype.Rs=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Nw&&n.Ms())return n.field}return null},Vw.prototype.Ls=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Nw&&0<=t.indexOf(r.op))return r.op}return null},Vw.prototype.Os=function(){return e_(this.We())},Vw.prototype.Bs=function(){return null!==this.collectionGroup},Vw.prototype.We=function(){if(!this.Es)if("F"===this.ws)this.Es=$w(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new zw(r.field,i))}var o=this.endAt?new Dw(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Dw(this.startAt.position,!this.startAt.before):null;this.Es=$w(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Es},Vw.prototype.Cs=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.U(this.collectionGroup)&&this.path.D(e):Ug.W(this.path)?this.path.isEqual(e):this.path.C(e)},Vw.prototype.Fs=function(t){for(var e=0,n=this.ds;e<n.length;e++){var r=n[e];if(!r.field.L()&&null===t.field(r.field))return!1}return!0},Vw.prototype.Ns=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},Vw.prototype.$s=function(t){return!(this.startAt&&!Gw(this.startAt,this.orderBy,t)||this.endAt&&Gw(this.endAt,this.orderBy,t))},Vw.prototype.Is=function(t){},Vw),Nw=(Es(jw,bw=function(){}),jw.create=function(t,e,n){if(t.L())return"in"===e?new kw(t,n):new Aw(t,e,n);if(Zm(n)){if("=="!==e)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new jw(t,e,n)}if(tb(n)){if("=="!==e)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new jw(t,e,n)}return"array-contains"===e?new Ow(t,n):"in"===e?new Rw(t,n):"array-contains-any"===e?new Pw(t,n):new jw(t,e,n)},jw.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&qm(this.value)===qm(e)&&this.qs(Hm(e,this.value))},jw.prototype.qs=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return 0<t;case">=":return 0<=t;default:return ig()}},jw.prototype.Ms=function(){return 0<=["<","<=",">",">="].indexOf(this.op)},jw.prototype.canonicalId=function(){return this.field.N()+this.op.toString()+Qm(this.value)},jw.prototype.isEqual=function(t){return t instanceof jw&&this.op===t.op&&this.field.isEqual(t.field)&&Bm(this.value,t.value)},jw.prototype.toString=function(){return this.field.N()+" "+this.op+" "+Qm(this.value)},jw),Aw=(Es(Uw,mw=Nw),Uw.prototype.matches=function(t){var e=Ug.P(t.key,this.key);return this.qs(e)},Uw),kw=(Es(Fw,gw=Nw),Fw.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Fw),Ow=(Es(Mw,yw=Nw),Mw.prototype.matches=function(t){var e=t.field(this.field);return $m(e)&&Wm(e.arrayValue,this.value)},Mw),Rw=(Es(Lw,vw=Nw),Lw.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Wm(this.value.arrayValue,e)},Lw),Pw=(Es(xw,dw=Nw),xw.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!$m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Wm(e.value.arrayValue,t)})},xw),Dw=function(t,e){this.position=t,this.before=e};function xw(t,e){return dw.call(this,t,"array-contains-any",e)||this}function Lw(t,e){return vw.call(this,t,"in",e)||this}function Mw(t,e){return yw.call(this,t,"array-contains",e)||this}function Fw(t,e){var n=this;return(n=gw.call(this,t,"in",e)||this).keys=(e.arrayValue.values||[]).map(function(t){return Ug.q(t.referenceValue)}),n}function Uw(t,e,n){var r=this;return(r=mw.call(this,t,e,n)||this).key=Ug.q(n.referenceValue),r}function jw(t,e,n){var r=this;return(r=bw.call(this)||this).field=t,r.op=e,r.value=n,r}function Vw(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.ds=n,this.filters=r,this.limit=i,this.ws=o,this.startAt=s,this.endAt=a,this.Ts=null,this.Es=null,this.startAt&&this.Is(this.startAt),this.endAt&&this.Is(this.endAt)}function qw(){return null!==ww&&ww.apply(this,arguments)||this}function Bw(t,e,n){var r=this;return(r=_w.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Ww(t,e,n,r){var i=this;return(i=Ew.call(this,t,e)||this)._s=n,i.Xe=!!r.Xe,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Hw(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Qm(t)}).join(",")}function Gw(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.L()?Ug.P(Ug.q(s.referenceValue),n.key):Hm(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Qw(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Bm(t.position[n],e.position[n]))return!1;return!0}var Kw,zw=(Jw.prototype.compare=function(t,e){var n,r,i,o,s=this.Us?Ug.P(t.key,e.key):(n=this.field,r=e,i=t.field(n),o=r.field(n),null!==i&&null!==o?Hm(i,o):ig());switch(this.dir){case"asc":return s;case"desc":return-1*s;default:return ig()}},Jw.prototype.canonicalId=function(){return this.field.N()+this.dir.toString()},Jw.prototype.toString=function(){return this.field.N()+" ("+this.dir+")"},Jw.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},Jw),Yw=(Es(Xw,Kw=function(t,e,n,r,i,o,s){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s}),Xw);function Xw(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null);var a=this;return(a=Kw.call(this,t,e,n,r,i,o,s)||this).Qs=null,a}function Jw(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.Us=t.L()}function $w(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Yw(t,e,n,r,i,o,s)}function Zw(t){var e=sg(t);if(null===e.Qs){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return t.canonicalId()}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return t.canonicalId()}).join(","),Vg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Hw(e.startAt)),e.endAt&&(n+="|ub:",n+=Hw(e.endAt)),e.Qs=n}return e.Qs}function t_(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!t.orderBy[n].isEqual(e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(!t.filters[r].isEqual(e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qw(t.startAt,e.startAt)&&Qw(t.endAt,e.endAt)}function e_(t){return Ug.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var n_=(m_.prototype.Ke=function(t,e,n){for(var r=n.js,i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.Ke(e,s)}}return e},m_.prototype.je=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.je(e,e,this.Ws))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=u.je(e,o,this.Ws))}return e},m_.prototype.Ks=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.je(t.key,n.get(t.key));e&&(i=i.et(t.key,e))}),i},m_.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ym())},m_.prototype.isEqual=function(t){return this.batchId===t.batchId&&lg(this.mutations,t.mutations,function(t,e){return t.isEqual(e)})&&lg(this.baseMutations,t.baseMutations,function(t,e){return t.isEqual(e)})},m_),r_=(g_.from=function(t,e,n){og(t.mutations.length===n.length);for(var r=dm,i=t.mutations,o=0;o<i.length;o++)r=r.et(i[o].key,n[o].version);return new g_(t,e,n,r)},g_),i_=(y_.prototype.catch=function(t){return this.next(void 0,t)},y_.prototype.next=function(r,i){var o=this;return this.Xs&&ig(),this.Xs=!0,this.Js?this.error?this.Zs(i,this.error):this.tn(r,this.result):new y_(function(e,n){o.Hs=function(t){o.tn(r,t).next(e,n)},o.Ys=function(t){o.Zs(i,t).next(e,n)}})},y_.prototype.en=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},y_.prototype.sn=function(t){try{var e=t();return e instanceof y_?e:y_.resolve(e)}catch(t){return y_.reject(t)}},y_.prototype.tn=function(t,e){return t?this.sn(function(){return t(e)}):y_.resolve(e)},y_.prototype.Zs=function(t,e){return t?this.sn(function(){return t(e)}):y_.reject(e)},y_.resolve=function(n){return new y_(function(t,e){t(n)})},y_.reject=function(n){return new y_(function(t,e){e(n)})},y_.nn=function(t){return new y_(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},y_.rn=function(t){for(var n=y_.resolve(!1),e=function(e){n=n.next(function(t){return t?y_.resolve(t):e()})},r=0,i=t;r<i.length;r++)e(i[r]);return n},y_.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.nn(i)},y_),o_=(Object.defineProperty(v_.prototype,"readTime",{get:function(){return this.an},set:function(t){this.an=t},enumerable:!0,configurable:!0}),v_.prototype.un=function(t,e){this.cn(),this.readTime=e,this.on.set(t.key,t)},v_.prototype.ln=function(t,e){this.cn(),e&&(this.readTime=e),this.on.set(t,null)},v_.prototype._n=function(t,e){this.cn();var n=this.on.get(e);return void 0!==n?i_.resolve(n):this.fn(t,e)},v_.prototype.getEntries=function(t,e){return this.dn(t,e)},v_.prototype.apply=function(t){return this.cn(),this.hn=!0,this.wn(t)},v_.prototype.cn=function(){},v_),s_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",a_=(d_.prototype.En=function(t){this.Tn.push(t)},d_.prototype.In=function(){this.Tn.forEach(function(t){return t()})},d_),u_=(p_.prototype.Pn=function(e,n){var r=this;return this.Rn.Vn(e,n).next(function(t){return r.gn(e,n,t)})},p_.prototype.gn=function(t,r,i){return this.An._n(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].je(r,t);return t})},p_.prototype.pn=function(t,e,i){var o=lm();return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].je(t,e);o=o.et(t,e)}),o},p_.prototype.yn=function(e,t){var n=this;return this.An.getEntries(e,t).next(function(t){return n.bn(e,t)})},p_.prototype.bn=function(r,i){var o=this;return this.Rn.vn(r,i).next(function(t){var e=o.pn(r,i,t),n=hm();return e.forEach(function(t,e){e=e||new Tw(t,Sg.min()),n=n.et(t,e)}),n})},p_.prototype.Sn=function(t,e,n){return e.Os()?this.Dn(t,e.path):e.Bs()?this.Cn(t,e,n):this.Fn(t,e,n)},p_.prototype.Dn=function(t,e){return this.Pn(t,new Ug(e)).next(function(t){var e=pm();return t instanceof Iw&&(e=e.et(t.key,t)),e})},p_.prototype.Cn=function(n,r,i){var o=this,s=r.collectionGroup,a=pm();return this.mn.Nn(n,s).next(function(t){return i_.forEach(t,function(t){var e=r.vs(t.child(s));return o.Fn(n,e,i).next(function(t){t.forEach(function(t,e){a=a.et(t,e)})})}).next(function(){return a})})},p_.prototype.Fn=function(e,n,t){var h,l,r=this;return this.An.Sn(e,n,t).next(function(t){return h=t,r.Rn.$n(e,n)}).next(function(t){return l=t,r.kn(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=s.je(u,u,r.Ws);h=c instanceof Iw?h.et(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){n.matches(e)||(h=h.remove(t))}),h})},p_.prototype.kn=function(t,e,n){for(var r=ym(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Yb&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.An.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Iw&&(c=c.et(t,e))}),c})},p_),c_=(f_.Ln=function(t,e){for(var n=ym(),r=ym(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new f_(t,e.fromCache,n,r)},f_),h_=(l_.prototype.Bn=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},l_.prototype.next=function(){var t=++this.previousValue;return this.qn&&this.qn(t),t},l_);function l_(t,e){var n=this;this.previousValue=t,e&&(e.On=function(t){return n.Bn(t)},this.qn=function(t){return e.Un(t)})}function f_(t,e,n,r){this.targetId=t,this.fromCache=e,this.xn=n,this.Mn=r}function p_(t,e,n){this.An=t,this.Rn=e,this.mn=n}function d_(){this.Tn=[]}function v_(){this.on=new _g(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.hn=!1}function y_(t){var e=this;this.Hs=null,this.Ys=null,this.result=void 0,this.error=void 0,this.Js=!1,this.Xs=!1,t(function(t){e.Js=!0,e.result=t,e.Hs&&e.Hs(t)},function(t){e.Js=!0,e.error=t,e.Ys&&e.Ys(t)})}function g_(t,e,n,r){this.batch=t,this.Gs=e,this.js=n,this.zs=r}function m_(t,e,n,r){this.batchId=t,this.Ws=e,this.baseMutations=n,this.mutations=r}h_.Qn=-1;function b_(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var w_=(__.prototype.reset=function(){this.Hn=0},__.prototype.Xn=function(){this.Hn=this.zn},__.prototype.Zn=function(t){var e=this;this.cancel();var n=Math.floor(this.Hn+this.ti()),r=Math.max(0,Date.now()-this.Jn),i=Math.max(0,n-r);0<i&&eg("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Hn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Yn=this.Wn.ei(this.jn,i,function(){return e.Jn=Date.now(),t()}),this.Hn*=this.Gn,this.Hn<this.Kn&&(this.Hn=this.Kn),this.Hn>this.zn&&(this.Hn=this.zn)},__.prototype.si=function(){null!==this.Yn&&(this.Yn.ni(),this.Yn=null)},__.prototype.cancel=function(){null!==this.Yn&&(this.Yn.cancel(),this.Yn=null)},__.prototype.ti=function(){return(Math.random()-.5)*this.Hn},__);function __(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Wn=t,this.jn=e,this.Kn=n,this.Gn=r,this.zn=i,this.Hn=0,this.Yn=null,this.Jn=Date.now(),this.reset()}function E_(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=T_(e)),e=I_(t.get(n),e);return T_(e)}function I_(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function T_(t){return t+""}function S_(t){var e=t.length;if(og(2<=e),2===e)return og(""===t.charAt(0)&&""===t.charAt(1)),Ng.k;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&ig(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ig()}o=s+2}return new Ng(r)}var C_=(R_.prototype.ri=function(t,e){return this.ii.add(e),i_.resolve()},R_.prototype.Nn=function(t,e){return i_.resolve(this.ii.getEntries(e))},R_),N_=(O_.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new om(Ng.P),i=!r.has(n);return this.index[e]=r.add(n),i},O_.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},O_.prototype.getEntries=function(t){return(this.index[t]||new om(Ng.P)).F()},O_),A_=(k_.prototype.ri=function(t,e){var n=this;if(this.oi.has(e))return i_.resolve();var r=e.S(),i=e.p();t.En(function(){n.oi.add(e)});var o={collectionId:r,parent:E_(i)};return P_(t).put(o)},k_.prototype.Nn=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[fg(i),""],!1,!0);return P_(t).hi(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(S_(r.parent))}return o})},k_);function k_(){this.oi=new N_}function O_(){this.index={}}function R_(){this.ii=new N_}function P_(t){return aE.ai(t,UE.store)}function D_(t){this.ui=t}function x_(t,e){if(e.document)return n=t.ui,r=e.document,i=!!e.hasCommittedMutations,o=db(n,r.name),s=hb(r.updateTime),a=new Zb({mapValue:{fields:r.fields}}),new Iw(o,s,a,{hasCommittedMutations:!!i});var n,r,i,o,s,a;if(e.noDocument){var u=Ug.j(e.noDocument.path),c=j_(e.noDocument.readTime);return new Tw(u,c,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var h=Ug.j(e.unknownDocument.path),l=j_(e.unknownDocument.version);return new Sw(h,l)}return ig()}function L_(t,e,n){var r,i,o=M_(n),s=e.key.path.p().F();if(e instanceof Iw){var a={name:pb(r=t.ui,(i=e).key),fields:i.fs().mapValue.fields,updateTime:ab(r,i.version.R())},u=e.hasCommittedMutations;return new DE(null,null,a,u,o,s)}if(e instanceof Tw){var c=e.key.path.F(),h=U_(e.version),l=e.hasCommittedMutations;return new DE(null,new RE(c,h),null,l,o,s)}if(e instanceof Sw){var f=e.key.path.F(),p=U_(e.version);return new DE(new PE(f,p),null,null,!0,o,s)}return ig()}function M_(t){var e=t.R();return[e.seconds,e.nanoseconds]}function F_(t){var e=new Tg(t[0],t[1]);return Sg.I(e)}function U_(t){var e=t.R();return new TE(e.seconds,e.nanoseconds)}function j_(t){var e=new Tg(t.seconds,t.nanoseconds);return Sg.I(e)}function V_(e,t){var n=(t.baseMutations||[]).map(function(t){return _b(e.ui,t)}),r=t.mutations.map(function(t){return _b(e.ui,t)}),i=Tg.fromMillis(t.localWriteTimeMs);return new n_(t.batchId,i,n,r)}function q_(t){var e,n=j_(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?j_(t.lastLimboFreeSnapshotVersion):Sg.min();return e=(void 0!==t.query.documents?function(t){og(1===t.documents.length);var e=t.documents[0];return Cw.As(yb(e)).We()}:function(t){var e=yb(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){og(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function e(t){return t?void 0!==t.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Nb(t.unaryFilter.field);return Nw.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Nb(t.unaryFilter.field);return Nw.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ig()}}(t)]:void 0!==t.fieldFilter?[(n=t,Nw.create(Nb(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ig()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):ig():[];var n}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return new zw(Nb((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));var u,c,h=null;n.limit&&(u=n.limit,h=Vg(c="object"==typeof u?u.value:u)?null:c);var l=null;n.startAt&&(l=Sb(n.startAt));var f=null;return n.endAt&&(f=Sb(n.endAt)),new Cw(e,i,a,s,h,"F",l,f).We()})(t.query),new zg(e,t.targetId,0,t.lastListenSequenceNumber,n,r,Wg.fromBase64String(t.resumeToken))}function B_(t,e){var n,r=U_(e.J),i=U_(e.lastLimboFreeSnapshotVersion);n=(e_(e.target)?Eb:Ib)(t.ui,e.target);var o=e.resumeToken.toBase64();return new LE(e.targetId,Zw(e.target),r,o,e.sequenceNumber,i,n)}var W_,H_=(G_.prototype.un=function(t,e,n){return K_(t).put(z_(e),n)},G_.prototype.ln=function(t,e){var n=K_(t),r=z_(e);return n.delete(r)},G_.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.ci(e,t)})},G_.prototype._n=function(t,e){var n=this;return K_(t).get(z_(e)).next(function(t){return n.li(t)})},G_.prototype._i=function(t,e){var n=this;return K_(t).get(z_(e)).next(function(t){var e=n.li(t);return e?{fi:e,size:Y_(t)}:null})},G_.prototype.getEntries=function(t,e){var r=this,i=lm();return this.di(t,e,function(t,e){var n=r.li(e);i=i.et(t,n)}).next(function(){return i})},G_.prototype.wi=function(t,e){var r=this,i=lm(),o=new $g(Ug.P);return this.di(t,e,function(t,e){var n=r.li(e);o=n?(i=i.et(t,n),o.et(t,Y_(e))):(i=i.et(t,null),o.et(t,0))}).next(function(){return{Ti:i,Ei:o}})},G_.prototype.di=function(t,e,i){if(e._())return i_.resolve();var n=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),o=e.at(),s=o.dt();return K_(t).Ii({range:n},function(t,e,n){for(var r=Ug.j(t);s&&Ug.P(s,r)<0;)i(s,null),s=o.dt();s&&s.isEqual(r)&&(i(s,e),s=o.wt()?o.dt():null),s?n.Ai(s.path.F()):n.done()}).next(function(){for(;s;)i(s,null),s=o.wt()?o.dt():null})},G_.prototype.Sn=function(t,i,e){var o=this,s=pm(),a=i.path.length+1,n={};if(e.isEqual(Sg.min())){var r=i.path.F();n.range=IDBKeyRange.lowerBound(r)}else{var u=i.path.F(),c=M_(e);n.range=IDBKeyRange.lowerBound([u,c],!0),n.index=DE.collectionReadTimeIndex}return K_(t).Ii(n,function(t,e,n){if(t.length===a){var r=x_(o.serializer,e);i.path.D(r.key.path)?r instanceof Iw&&i.matches(r)&&(s=s.et(r.key,r)):n.done()}}).next(function(){return s})},G_.prototype.Ri=function(t,e){var r=this,i=hm(),o=M_(e),n=K_(t),s=IDBKeyRange.lowerBound(o,!0);return n.Ii({index:DE.readTimeIndex,range:s},function(t,e){var n=x_(r.serializer,e);i=i.et(n.key,n),o=e.readTime}).next(function(){return{mi:i,readTime:F_(o)}})},G_.prototype.Pi=function(t){var e=K_(t),r=Sg.min();return e.Ii({index:DE.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=F_(e.readTime)),n.done()}).next(function(){return r})},G_.prototype.Vi=function(t){return new G_.gi(this,!!t&&t.pi)},G_.prototype.yi=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},G_.prototype.getMetadata=function(t){return Q_(t).get(xE.key).next(function(t){return og(!!t),t})},G_.prototype.ci=function(t,e){return Q_(t).put(xE.key,e)},G_.prototype.li=function(t){if(t){var e=x_(this.serializer,t);return e instanceof Tw&&e.version.isEqual(Sg.min())?null:e}return null},G_);function G_(t,e){this.serializer=t,this.mn=e}function Q_(t){return aE.ai(t,xE.store)}function K_(t){return aE.ai(t,DE.store)}function z_(t){return t.path.F()}function Y_(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ig();e=t.noDocument}return JSON.stringify(e).length}function X_(t,e){var n=this;return(n=W_.call(this)||this).bi=t,n.pi=e,n.vi=new _g(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}H_.gi=(Es(X_,W_=o_),X_.prototype.wn=function(s){var a=this,u=[],c=0,h=new om(function(t,e){return hg(t.N(),e.N())});return this.on.forEach(function(t,e){var n=a.vi.get(t);if(e){var r=L_(a.bi.serializer,e,a.readTime);h=h.add(t.path.p());var i=Y_(r);c+=i-n,u.push(a.bi.un(s,t,r))}else if(c-=n,a.pi){var o=L_(a.bi.serializer,new Tw(t,Sg.min()),a.readTime);u.push(a.bi.un(s,t,o))}else u.push(a.bi.ln(s,t))}),h.forEach(function(t){u.push(a.bi.mn.ri(s,t))}),u.push(this.bi.updateMetadata(s,c)),i_.nn(u)},X_.prototype.fn=function(t,e){var n=this;return this.bi._i(t,e).next(function(t){return null===t?(n.vi.set(e,0),null):(n.vi.set(e,t.size),t.fi)})},X_.prototype.dn=function(t,e){var n=this;return this.bi.wi(t,e).next(function(t){var e=t.Ti;return t.Ei.forEach(function(t,e){n.vi.set(t,e)}),e})},X_);var J_=(tE.prototype.next=function(){return this.Si+=2,this.Si},tE.Di=function(){return new tE(0)},tE.Ci=function(){return new tE(-1)},tE),$_=(Z_.prototype.Ni=function(n){var r=this;return this.$i(n).next(function(t){var e=new J_(t.highestTargetId);return t.highestTargetId=e.next(),r.ki(n,t).next(function(){return t.highestTargetId})})},Z_.prototype.xi=function(t){return this.$i(t).next(function(t){return Sg.I(new Tg(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},Z_.prototype.Mi=function(t){return this.$i(t).next(function(t){return t.highestListenSequenceNumber})},Z_.prototype.Li=function(e,n,r){var i=this;return this.$i(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.R()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.ki(e,t)})},Z_.prototype.Oi=function(e,n){var r=this;return this.Bi(e,n).next(function(){return r.$i(e).next(function(t){return t.targetCount+=1,r.qi(n,t),r.ki(e,t)})})},Z_.prototype.Ui=function(t,e){return this.Bi(t,e)},Z_.prototype.Qi=function(e,t){var n=this;return this.Wi(e,t.targetId).next(function(){return eE(e).delete(t.targetId)}).next(function(){return n.$i(e)}).next(function(t){return og(0<t.targetCount),--t.targetCount,n.ki(e,t)})},Z_.prototype.ji=function(r,i,o){var s=this,a=0,u=[];return eE(r).Ii(function(t,e){var n=q_(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.Qi(r,n)))}).next(function(){return i_.nn(u)}).next(function(){return a})},Z_.prototype.ye=function(t,r){return eE(t).Ii(function(t,e){var n=q_(e);r(n)})},Z_.prototype.$i=function(t){return nE(t).get(FE.key).next(function(t){return og(null!==t),t})},Z_.prototype.ki=function(t,e){return nE(t).put(FE.key,e)},Z_.prototype.Bi=function(t,e){return eE(t).put(B_(this.serializer,e))},Z_.prototype.qi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},Z_.prototype.Ki=function(t){return this.$i(t).next(function(t){return t.targetCount})},Z_.prototype.Gi=function(t,i){var e=Zw(i),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),o=null;return eE(t).Ii({range:n,index:LE.queryTargetsIndexName},function(t,e,n){var r=q_(e);t_(i,r.target)&&(o=r,n.done())}).next(function(){return o})},Z_.prototype.zi=function(n,t,r){var i=this,o=[],s=rE(n);return t.forEach(function(t){var e=E_(t.path);o.push(s.put(new ME(r,e))),o.push(i.Fi.Hi(n,r,t))}),i_.nn(o)},Z_.prototype.Yi=function(n,t,r){var i=this,o=rE(n);return i_.forEach(t,function(t){var e=E_(t.path);return i_.nn([o.delete([r,e]),i.Fi.Ji(n,r,t)])})},Z_.prototype.Wi=function(t,e){var n=rE(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},Z_.prototype.Xi=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=rE(t),o=ym();return r.Ii({range:n,Zi:!0},function(t,e,n){var r=S_(t[1]),i=new Ug(r);o=o.add(i)}).next(function(){return o})},Z_.prototype.tr=function(t,e){var n=E_(e.path),r=IDBKeyRange.bound([n],[fg(n)],!1,!0),i=0;return rE(t).Ii({index:ME.documentTargetsIndex,Zi:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},Z_.prototype.Me=function(t,e){return eE(t).get(e).next(function(t){return t?q_(t):null})},Z_);function Z_(t,e){this.Fi=t,this.serializer=e}function tE(t){this.Si=t}function eE(t){return aE.ai(t,LE.store)}function nE(t){return aE.ai(t,FE.store)}function rE(t){return aE.ai(t,ME.store)}var iE,oE="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sE=(Es(cE,iE=a_),cE),aE=(uE.ai=function(t,e){if(t instanceof sE)return WE.ai(t.er,e);throw ig()},uE.prototype.start=function(){var e=this;return WE.Ir(this.dr,EE,new IE(this.serializer)).then(function(t){return e.Ar=t,e.Rr()}).then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ig(Eg.FAILED_PRECONDITION,oE);return e.mr(),e.Pr(),e.Vr(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Tr.Mi(t)})}).then(function(t){e.rr=new h_(t,e.nr)}).then(function(){e.or=!0}).catch(function(t){return e.Ar&&e.Ar.close(),Promise.reject(t)})},uE.prototype.gr=function(n){var t=this;return this.lr=function(e){return Ts(t,void 0,void 0,function(){return Ss(this,function(t){return this.pr?[2,n(e)]:[2]})})},n(this.isPrimary)},uE.prototype.yr=function(n){var t=this;this.Ar.br(function(e){return Ts(t,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},uE.prototype.vr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Wn.Sr(function(){return Ts(e,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.pr?[4,this.Rr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},uE.prototype.Rr=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return lE(e).put(new VE(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Dr(e).next(function(t){t||(n.isPrimary=!1,n.Wn.Cr(function(){return n.lr(!1)}))})}).next(function(){return n.Fr(e)}).next(function(t){return n.isPrimary&&!t?n.Nr(e).next(function(){return!1}):!!t&&n.$r(e).next(function(){return!0})})}).catch(function(t){if(YE(t))return eg("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return eg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Wn.Cr(function(){return n.lr(t)}),n.isPrimary=t})},uE.prototype.Dr=function(t){var e=this;return hE(t).get(SE.key).next(function(t){return i_.resolve(e.kr(t))})},uE.prototype.xr=function(t){return lE(t).delete(this.clientId)},uE.prototype.Mr=function(){return Ts(this,void 0,void 0,function(){var e,n,r,i,o=this;return Ss(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Lr(this.cr,18e5)?[3,2]:(this.cr=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=uE.ai(t,VE.store);return r.hi().next(function(t){var e=o.Or(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return i_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Er)for(n=0,r=e;n<r.length;n++)i=r[n],this.Er.removeItem(this.Br(i.clientId));t.label=2;case 2:return[2]}})})},uE.prototype.Vr=function(){var t=this;this.ur=this.Wn.ei("client_metadata_refresh",4e3,function(){return t.Rr().then(function(){return t.Mr()}).then(function(){return t.Vr()})})},uE.prototype.kr=function(t){return!!t&&t.ownerId===this.clientId},uE.prototype.Fr=function(e){var i=this;return this.ir?i_.resolve(!0):hE(e).get(SE.key).next(function(t){if(null!==t&&i.Lr(t.leaseTimestampMs,5e3)&&!i.qr(t.ownerId)){if(i.kr(t)&&i.networkEnabled)return!0;if(!i.kr(t)){if(!t.allowTabSynchronization)throw new Ig(Eg.FAILED_PRECONDITION,oE);return!1}}return!(!i.networkEnabled||!i.inForeground)||lE(e).hi().next(function(t){return void 0===i.Or(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&eg("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},uE.prototype.Ur=function(){return Ts(this,void 0,void 0,function(){var e=this;return Ss(this,function(t){switch(t.label){case 0:return this.or=!1,this.Qr(),this.ur&&(this.ur.cancel(),this.ur=null),this.Wr(),this.jr(),[4,this.runTransaction("shutdown","readwrite",function(t){return e.Nr(t).next(function(){return e.xr(t)})}).catch(function(t){eg("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)})];case 1:return t.sent(),this.Ar.close(),this.Kr(),[2]}})})},uE.prototype.Or=function(t,e){var n=this;return t.filter(function(t){return n.Lr(t.updateTimeMs,e)&&!n.qr(t.clientId)})},uE.prototype.Gr=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return lE(t).hi().next(function(t){return e.Or(t,18e5).map(function(t){return t.clientId})})})},uE.clearPersistence=function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return uE._r()?(e=n+uE.wr,[4,WE.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty(uE.prototype,"pr",{get:function(){return this.or},enumerable:!0,configurable:!0}),uE.prototype.zr=function(t){return vE.Hr(t,this.serializer,this.mn,this.Fi)},uE.prototype.Yr=function(){return this.Tr},uE.prototype.Jr=function(){return this.An},uE.prototype.Xr=function(){return this.mn},uE.prototype.runTransaction=function(e,n,r){var i=this;eg("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Ar.runTransaction(t,BE,function(t){return o=new sE(t,i.rr?i.rr.next():h_.Qn),"readwrite-primary"===n?i.Dr(o).next(function(t){return!!t||i.Fr(o)}).next(function(t){if(!t)throw ng("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Wn.Cr(function(){return i.lr(!1)}),new Ig(Eg.FAILED_PRECONDITION,s_);return r(o)}).next(function(t){return i.$r(o).next(function(){return t})}):i.Zr(o).next(function(){return r(o)})}).then(function(t){return o.In(),t})},uE.prototype.Zr=function(t){var e=this;return hE(t).get(SE.key).next(function(t){if(null!==t&&e.Lr(t.leaseTimestampMs,5e3)&&!e.qr(t.ownerId)&&!e.kr(t)&&!(e.ir||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ig(Eg.FAILED_PRECONDITION,oE)})},uE.prototype.$r=function(t){var e=new SE(this.clientId,this.allowTabSynchronization,Date.now());return hE(t).put(SE.key,e)},uE._r=function(){return WE._r()},uE.to=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},uE.prototype.Nr=function(t){var e=this,n=hE(t);return n.get(SE.key).next(function(t){return e.kr(t)?(eg("IndexedDbPersistence","Releasing primary lease."),n.delete(SE.key)):i_.resolve()})},uE.prototype.Lr=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(ng("Detected an update time that is in the future: "+t+" > "+n),1))},uE.prototype.mr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ar=function(){t.Wn.Sr(function(){return t.inForeground="visible"===t.document.visibilityState,t.Rr()})},this.document.addEventListener("visibilitychange",this.ar),this.inForeground="visible"===this.document.visibilityState)},uE.prototype.Wr=function(){this.ar&&(this.document.removeEventListener("visibilitychange",this.ar),this.ar=null)},uE.prototype.Pr=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.hr=function(){e.Qr(),e.Wn.Sr(function(){return e.Ur()})},this.window.addEventListener("unload",this.hr))},uE.prototype.jr=function(){this.hr&&(this.window.removeEventListener("unload",this.hr),this.hr=null)},uE.prototype.qr=function(t){var e;try{var n=null!==(null===(e=this.Er)||void 0===e?void 0:e.getItem(this.Br(t)));return eg("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ng("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},uE.prototype.Qr=function(){if(this.Er)try{this.Er.setItem(this.Br(this.clientId),String(Date.now()))}catch(t){ng("Failed to set zombie client id.",t)}},uE.prototype.Kr=function(){if(this.Er)try{this.Er.removeItem(this.Br(this.clientId))}catch(t){}},uE.prototype.Br=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},uE);function uE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Wn=i,this.window=o,this.document=s,this.nr=u,this.ir=c,this.rr=null,this.or=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hr=null,this.inForeground=!1,this.ar=null,this.ur=null,this.cr=Number.NEGATIVE_INFINITY,this.lr=function(t){return Promise.resolve()},!uE._r())throw new Ig(Eg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Fi=new fE(this,r),this.dr=e+uE.wr,this.serializer=new D_(a),this.Tr=new $_(this.Fi,this.serializer),this.mn=new A_,this.An=new H_(this.serializer,this.mn),this.window&&this.window.localStorage?this.Er=this.window.localStorage:(this.Er=null,!1===c&&ng("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function cE(t,e){var n=this;return(n=iE.call(this)||this).er=t,n.sr=e,n}function hE(t){return aE.ai(t,SE.store)}function lE(t){return aE.ai(t,VE.store)}aE.wr="main";var fE=(pE.prototype.so=function(t){var n=this.no(t);return this.db.Yr().Ki(t).next(function(e){return n.next(function(t){return e+t})})},pE.prototype.no=function(t){var e=0;return this.io(t,function(t){e++}).next(function(){return e})},pE.prototype.ye=function(t,e){return this.db.Yr().ye(t,e)},pE.prototype.io=function(t,n){return this.ro(t,function(t,e){return n(e)})},pE.prototype.Hi=function(t,e,n){return dE(t,n)},pE.prototype.Ji=function(t,e,n){return dE(t,n)},pE.prototype.ji=function(t,e,n){return this.db.Yr().ji(t,e,n)},pE.prototype.oo=function(t,e){return dE(t,e)},pE.prototype.ho=function(t,e){return r=e,i=!1,_E(n=t).ao(function(t){return gE(n,t,r).next(function(t){return t&&(i=!0),i_.resolve(!t)})}).next(function(){return i});var n,r,i},pE.prototype.uo=function(r,i){var o=this,s=this.db.Jr().Vi(),a=[],u=0;return this.ro(r,function(e,t){if(t<=i){var n=o.ho(r,e).next(function(t){if(!t)return u++,s._n(r,e).next(function(){return s.ln(e),rE(r).delete([0,E_(e.path)])})});a.push(n)}}).next(function(){return i_.nn(a)}).next(function(){return s.apply(r)}).next(function(){return u})},pE.prototype.removeTarget=function(t,e){var n=e.X(t.sr);return this.db.Yr().Ui(t,n)},pE.prototype.co=function(t,e){return dE(t,e)},pE.prototype.ro=function(t,o){var s,e=rE(t),a=h_.Qn;return e.Ii({index:ME.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==h_.Qn&&o(new Ug(S_(s)),a),a=i,s=r):a=h_.Qn}).next(function(){a!==h_.Qn&&o(new Ug(S_(s)),a)})},pE.prototype.lo=function(t){return this.db.Jr().yi(t)},pE);function pE(t,e){this.db=t,this.eo=new yI(this,e)}function dE(t,e){return rE(t).put((n=e,r=t.sr,new ME(0,E_(n.path),r)));var n,r}var vE=(yE.Hr=function(t,e,n,r){return og(""!==t.uid),new yE(t.fo()?t.uid:"",e,n,r)},yE.prototype.do=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bE(t).Ii({index:AE.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},yE.prototype.wo=function(c,h,l,f){var p=this,d=wE(c),v=bE(c);return v.add({}).next(function(t){og("number"==typeof t);for(var e=new n_(t,h,l,f),n=function(e,t,n){var r=n.baseMutations.map(function(t){return wb(e.ui,t)}),i=n.mutations.map(function(t){return wb(e.ui,t)});return new AE(t,n.batchId,n.Ws.toMillis(),r,i)}(p.serializer,p.userId,e),r=[],i=new om(function(t,e){return hg(t.N(),e.N())}),o=0,s=f;o<s.length;o++){var a=s[o],u=kE.key(p.userId,a.key.path,t);i=i.add(a.key.path.p()),r.push(v.put(n)),r.push(d.put(u,kE.PLACEHOLDER))}return i.forEach(function(t){r.push(p.mn.ri(c,t))}),c.En(function(){p._o[t]=e.keys()}),i_.nn(r).next(function(){return e})})},yE.prototype.To=function(t,e){var n=this;return bE(t).get(e).next(function(t){return t?(og(t.userId===n.userId),V_(n.serializer,t)):null})},yE.prototype.Eo=function(t,n){var r=this;return this._o[n]?i_.resolve(this._o[n]):this.To(t,n).next(function(t){if(t){var e=t.keys();return r._o[n]=e}return null})},yE.prototype.Io=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return bE(t).Ii({index:AE.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(og(e.batchId>=i),o=V_(r.serializer,e)),n.done()}).next(function(){return o})},yE.prototype.Ao=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return bE(t).Ii({index:AE.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},yE.prototype.Ro=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bE(t).hi(AE.userMutationsIndex,n).next(function(t){return t.map(function(t){return V_(e.serializer,t)})})},yE.prototype.Vn=function(a,u){var c=this,t=kE.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return wE(a).Ii({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=S_(i);if(r===c.userId&&u.path.isEqual(s))return bE(a).get(o).next(function(t){if(!t)throw ig();og(t.userId===c.userId),h.push(V_(c.serializer,t))});n.done()}).next(function(){return h})},yE.prototype.vn=function(r,t){var u=this,c=new om(hg),i=[];return t.forEach(function(a){var t=kE.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=wE(r).Ii({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=S_(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),i_.nn(i).next(function(){return u.mo(r,c)})},yE.prototype.$n=function(t,e){var a=this,u=e.path,c=u.length+1,n=kE.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new om(hg);return wE(t).Ii({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=S_(i);r===a.userId&&u.D(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.mo(t,h)})},yE.prototype.mo=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(bE(e).get(t).next(function(t){if(null===t)throw ig();og(t.userId===n.userId),r.push(V_(n.serializer,t))}))}),i_.nn(i).next(function(){return r})},yE.prototype.Po=function(e,n){var r=this;return mE(e.er,this.userId,n).next(function(t){return e.En(function(){r.Vo(n.batchId)}),i_.forEach(t,function(t){return r.Fi.oo(e,t)})})},yE.prototype.Vo=function(t){delete this._o[t]},yE.prototype.po=function(n){var o=this;return this.do(n).next(function(t){if(!t)return i_.resolve();var e=IDBKeyRange.lowerBound(kE.prefixForUser(o.userId)),i=[];return wE(n).Ii({range:e},function(t,e,n){if(t[0]===o.userId){var r=S_(t[1]);i.push(r)}else n.done()}).next(function(){og(0===i.length)})})},yE.prototype.tr=function(t,e){return gE(t,this.userId,e)},yE.prototype.yo=function(t){var e=this;return _E(t).get(this.userId).next(function(t){return t||new NE(e.userId,-1,"")})},yE);function yE(t,e,n,r){this.userId=t,this.serializer=e,this.mn=n,this.Fi=r,this._o={}}function gE(t,o,e){var n=kE.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return wE(t).Ii({range:r,Zi:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function mE(t,e,n){var r=t.store(AE.store),i=t.store(kE.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ii({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){og(1===a)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=kE.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return i_.nn(o).next(function(){return c})}function bE(t){return aE.ai(t,AE.store)}function wE(t){return aE.ai(t,kE.store)}function _E(t){return aE.ai(t,NE.store)}var EE=10,IE=(CE.prototype.createOrUpgrade=function(n,r,t,e){var i=this;og(t<e&&0<=t&&e<=EE);var o,s=new XE(r);t<1&&1<=e&&(n.createObjectStore(SE.store),(o=n).createObjectStore(NE.store,{keyPath:NE.keyPath}),o.createObjectStore(AE.store,{keyPath:AE.keyPath,autoIncrement:!0}).createIndex(AE.userMutationsIndex,AE.userMutationsKeyPath,{unique:!0}),o.createObjectStore(kE.store),jE(n),n.createObjectStore(DE.store));var a,u=i_.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(ME.store),a.deleteObjectStore(LE.store),a.deleteObjectStore(FE.store),jE(n)),u=u.next(function(){return t=s.store(FE.store),e=new FE(0,0,Sg.min().R(),0),t.put(FE.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(AE.store).hi().next(function(t){r.deleteObjectStore(AE.store),r.createObjectStore(AE.store,{keyPath:AE.keyPath,autoIncrement:!0}).createIndex(AE.userMutationsIndex,AE.userMutationsKeyPath,{unique:!0});var e=i.store(AE.store),n=t.map(function(t){return e.put(t)});return i_.nn(n)});var r,i})),u=u.next(function(){n.createObjectStore(VE.store,{keyPath:VE.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(xE.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(DE.store)).createIndex(DE.readTimeIndex,DE.readTimeIndexPath,{unique:!1}),t.createIndex(DE.collectionReadTimeIndex,DE.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=e&&(u=u.next(function(){return i.rewriteCanonicalIds(s)})),u},CE.prototype.addDocumentGlobal=function(e){var n=0;return e.store(DE.store).Ii(function(t,e){n+=Y_(e)}).next(function(){var t=new xE(n);return e.store(xE.store).put(xE.key,t)})},CE.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(NE.store),e=r.store(AE.store);return t.hi().next(function(t){return i_.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.hi(AE.userMutationsIndex,t).next(function(t){return i_.forEach(t,function(t){og(t.userId===n.userId);var e=V_(i.serializer,t);return mE(r,n.userId,e).next(function(){})})})})})},CE.prototype.ensureSequenceNumbers=function(t){var s=t.store(ME.store),e=t.store(DE.store);return t.store(FE.store).get(FE.key).next(function(i){var o=[];return e.Ii(function(t,e){var n=new Ng(t),r=[0,E_(n)];o.push(s.get(r).next(function(t){return t?i_.resolve():(e=n,s.put(new ME(0,E_(e),i.highestListenSequenceNumber)));var e}))}).next(function(){return i_.nn(o)})})},CE.prototype.createCollectionParentIndex=function(t,e){function i(t){if(o.add(t)){var e=t.S(),n=t.p();return r.put({collectionId:e,parent:E_(n)})}}t.createObjectStore(UE.store,{keyPath:UE.keyPath});var r=e.store(UE.store),o=new N_;return e.store(DE.store).Ii({Zi:!0},function(t,e){var n=new Ng(t);return i(n.p())}).next(function(){return e.store(kE.store).Ii({Zi:!0},function(t,e){t[0];var n=t[1],r=(t[2],S_(n));return i(r.p())})})},CE.prototype.rewriteCanonicalIds=function(t){var i=this,o=t.store(LE.store);return o.Ii(function(t,e){var n=q_(e),r=B_(i.serializer,n);return o.put(r)})},CE),TE=function(t,e){this.seconds=t,this.nanoseconds=e},SE=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function CE(t){this.serializer=t}SE.store="owner",SE.key="owner";var NE=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};NE.store="mutationQueues",NE.keyPath="userId";var AE=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};AE.store="mutations",AE.keyPath="batchId",AE.userMutationsIndex="userMutationsIndex",AE.userMutationsKeyPath=["userId","batchId"];var kE=(OE.prefixForUser=function(t){return[t]},OE.prefixForPath=function(t,e){return[t,E_(e)]},OE.key=function(t,e,n){return[t,E_(e),n]},OE);function OE(){}kE.store="documentMutations",kE.PLACEHOLDER=new kE;var RE=function(t,e){this.path=t,this.readTime=e},PE=function(t,e){this.path=t,this.version=e},DE=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};DE.store="remoteDocuments",DE.readTimeIndex="readTimeIndex",DE.readTimeIndexPath="readTime",DE.collectionReadTimeIndex="collectionReadTimeIndex",DE.collectionReadTimeIndexPath=["parentPath","readTime"];var xE=function(t){this.byteSize=t};xE.store="remoteDocumentGlobal",xE.key="remoteDocumentGlobalKey";var LE=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};LE.store="targets",LE.keyPath="targetId",LE.queryTargetsIndexName="queryTargetsIndex",LE.queryTargetsKeyPath=["canonicalId","targetId"];var ME=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ME.store="targetDocuments",ME.keyPath=["targetId","path"],ME.documentTargetsIndex="documentTargetsIndex",ME.documentTargetsKeyPath=["path","targetId"];var FE=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};FE.key="targetGlobalKey",FE.store="targetGlobal";var UE=function(t,e){this.collectionId=t,this.parent=e};function jE(t){t.createObjectStore(ME.store,{keyPath:ME.keyPath}).createIndex(ME.documentTargetsIndex,ME.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(LE.store,{keyPath:LE.keyPath}).createIndex(LE.queryTargetsIndexName,LE.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(FE.store)}UE.store="collectionParents",UE.keyPath=["collectionId","parent"];var VE=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};VE.store="clientMetadata",VE.keyPath="clientId";var qE,BE=ks(ks(ks([NE.store,AE.store,kE.store,DE.store,LE.store,SE.store,FE.store,ME.store],[VE.store]),[xE.store]),[UE.store]),WE=(zE.Ir=function(o,t,s){return eg("SimpleDb","Opening database:",o),new i_(function(n,r){var i=indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new zE(e))},i.onblocked=function(){r(new Ig(Eg.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new Ig(Eg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){eg("SimpleDb",'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;s.createOrUpgrade(e,i.transaction,t.oldVersion,EE).next(function(){eg("SimpleDb","Database upgrade to version "+EE+" complete")})}}).en()},zE.delete=function(t){return eg("SimpleDb","Removing database:",t),tI(window.indexedDB.deleteDatabase(t)).en()},zE._r=function(){if("undefined"==typeof indexedDB)return!1;if(zE.vo())return!0;var t=Vs(),e=zE.bo(t),n=0<e&&e<10,r=zE.So(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},zE.vo=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.Do)},zE.ai=function(t,e){return t.store(e)},zE.bo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},zE.So=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},zE.prototype.br=function(e){this.db.onversionchange=function(t){return e(t)}},zE.prototype.runTransaction=function(r,c,h){return Ts(this,void 0,void 0,function(){var s,a,e,u,n;return Ss(this,function(t){switch(t.label){case 0:s="readonly"===r,a=0,e=function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:++a,e=XE.open(u.db,s?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),n=h(e).catch(function(t){return e.abort(t),i_.reject(t)}).en(),r={},n.catch(function(){}),[4,e.Co];case 2:return[2,(r.value=(t.sent(),n),r)];case 3:return i=t.sent(),o="FirebaseError"!==i.name&&a<3,eg("SimpleDb","Transaction failed with error: %s. Retrying: %s.",i.message,o),o?[3,4]:[2,{value:Promise.reject(i)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(n=t.sent()))return[2,n.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},zE.prototype.close=function(){this.db.close()},zE),HE=(Object.defineProperty(KE.prototype,"Js",{get:function(){return this.No},enumerable:!0,configurable:!0}),Object.defineProperty(KE.prototype,"ko",{get:function(){return this.$o},enumerable:!0,configurable:!0}),Object.defineProperty(KE.prototype,"cursor",{set:function(t){this.Fo=t},enumerable:!0,configurable:!0}),KE.prototype.done=function(){this.No=!0},KE.prototype.Ai=function(t){this.$o=t},KE.prototype.delete=function(){return tI(this.Fo.delete())},KE),GE=(Es(QE,qE=Ig),QE);function QE(t){var e=this;return(e=qE.call(this,Eg.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",e}function KE(t){this.Fo=t,this.No=!1,this.$o=null}function zE(t){this.db=t,12.2===zE.bo(Vs())&&ng("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function YE(t){return"IndexedDbTransactionError"===t.name}var XE=(ZE.open=function(t,e,n){return new ZE(t.transaction(n,e))},Object.defineProperty(ZE.prototype,"Co",{get:function(){return this.xo.promise},enumerable:!0,configurable:!0}),ZE.prototype.abort=function(t){t&&this.xo.reject(t),this.aborted||(eg("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},ZE.prototype.store=function(t){var e=this.transaction.objectStore(t);return new JE(e)},ZE),JE=($E.prototype.put=function(t,e){return tI(void 0!==e?(eg("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(eg("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},$E.prototype.add=function(t){return eg("SimpleDb","ADD",this.store.name,t,t),tI(this.store.add(t))},$E.prototype.get=function(e){var n=this;return tI(this.store.get(e)).next(function(t){return void 0===t&&(t=null),eg("SimpleDb","GET",n.store.name,e,t),t})},$E.prototype.delete=function(t){return eg("SimpleDb","DELETE",this.store.name,t),tI(this.store.delete(t))},$E.prototype.count=function(){return eg("SimpleDb","COUNT",this.store.name),tI(this.store.count())},$E.prototype.hi=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mo(n,function(t,e){r.push(e)}).next(function(){return r})},$E.prototype.Lo=function(t,e){eg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Zi=!1;var r=this.cursor(n);return this.Mo(r,function(t,e,n){return n.delete()})},$E.prototype.Ii=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mo(r,e)},$E.prototype.ao=function(i){var t=this.cursor({});return new i_(function(n,r){t.onerror=function(t){var e=nI(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},$E.prototype.Mo=function(t,s){var a=[];return new i_(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;if(e){var n=new HE(e),r=s(e.primaryKey,e.value,n);if(r instanceof i_){var i=r.catch(function(t){return n.done(),i_.reject(t)});a.push(i)}n.Js?o():null===n.ko?e.continue():e.continue(n.ko)}else o()}}).next(function(){return i_.nn(a)})},$E.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},$E.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Zi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},$E);function $E(t){this.store=t}function ZE(t){var n=this;this.transaction=t,this.aborted=!1,this.xo=new b_,this.transaction.oncomplete=function(){n.xo.resolve()},this.transaction.onabort=function(){t.error?n.xo.reject(new GE(t.error)):n.xo.resolve()},this.transaction.onerror=function(t){var e=nI(t.target.error);n.xo.reject(new GE(e))}}function tI(t){return new i_(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=nI(t.target.error);r(e)}})}var eI=!1;function nI(t){var e=WE.bo(Vs());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new Ig("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return eI||(eI=!0,setTimeout(function(){throw r},0)),r}}return t}function rI(){return"undefined"!=typeof window?window:null}var iI=(aI.Qo=function(t,e,n,r,i){var o=new aI(t,e,Date.now()+n,r,i);return o.start(n),o},aI.prototype.start=function(t){var e=this;this.Wo=setTimeout(function(){return e.jo()},t)},aI.prototype.ni=function(){return this.jo()},aI.prototype.cancel=function(t){null!==this.Wo&&(this.clearTimeout(),this.Uo.reject(new Ig(Eg.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},aI.prototype.jo=function(){var e=this;this.Oo.Sr(function(){return null!==e.Wo?(e.clearTimeout(),e.op().then(function(t){return e.Uo.resolve(t)})):Promise.resolve()})},aI.prototype.clearTimeout=function(){null!==this.Wo&&(this.qo(this),clearTimeout(this.Wo),this.Wo=null)},aI),oI=(Object.defineProperty(sI.prototype,"eh",{get:function(){return this.zo},enumerable:!0,configurable:!0}),sI.prototype.Sr=function(t){this.enqueue(t)},sI.prototype.sh=function(t){this.nh(),this.ih(t)},sI.prototype.rh=function(t){return this.nh(),this.ih(t)},sI.prototype.oh=function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.nh(),this.zo?[3,2]:(this.zo=!0,(e=rI())&&e.removeEventListener("visibilitychange",this.th),[4,this.rh(n)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},sI.prototype.enqueue=function(t){return this.nh(),this.zo?new Promise(function(t){}):this.ih(t)},sI.prototype.Cr=function(i){var t=this;this.nh(),this.zo||(this.Go=this.Go.then(function(){var n=new b_,r=function(){return Ts(t,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,i()];case 1:return t.sent(),n.resolve(),this.Zo.reset(),[3,3];case 2:if(!YE(e=t.sent()))throw n.resolve(),e;return eg("AsyncQueue","Operation failed with retryable error: "+e),this.Zo.Zn(r),[3,3];case 3:return[2]}})})};return t.Sr(r),n.promise}))},sI.prototype.ih=function(t){var r=this,e=this.Ko.then(function(){return r.Jo=!0,t().catch(function(t){throw r.Yo=t,r.Jo=!1,ng("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.Jo=!1,t})});return this.Ko=e},sI.prototype.ei=function(t,e,n){var r=this;this.nh(),-1<this.Xo.indexOf(t)&&(e=0);var i=iI.Qo(this,t,e,n,function(t){return r.hh(t)});return this.Ho.push(i),i},sI.prototype.nh=function(){this.Yo&&ig()},sI.prototype.ah=function(){},sI.prototype.uh=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,e=this.Ko];case 1:t.sent(),t.label=2;case 2:if(e!==this.Ko)return[3,0];t.label=3;case 3:return[2]}})})},sI.prototype.lh=function(t){for(var e=0,n=this.Ho;e<n.length;e++)if(n[e].jn===t)return!0;return!1},sI.prototype._h=function(r){var i=this;return this.uh().then(function(){i.Ho.sort(function(t,e){return t.Bo-e.Bo});for(var t=0,e=i.Ho;t<e.length;t++){var n=e[t];if(n.ni(),"all"!==r&&n.jn===r)break}return i.uh()})},sI.prototype.fh=function(t){this.Xo.push(t)},sI.prototype.hh=function(t){var e=this.Ho.indexOf(t);this.Ho.splice(e,1)},sI);function sI(){var t=this;this.Ko=Promise.resolve(),this.Go=Promise.resolve(),this.zo=!1,this.Ho=[],this.Yo=null,this.Jo=!1,this.Xo=[],this.Zo=new w_(this,"async_queue_retry"),this.th=function(){return t.Zo.si()};var e=rI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.th)}function aI(t,e,n,r,i){this.Oo=t,this.jn=e,this.Bo=n,this.op=r,this.qo=i,this.Uo=new b_,this.then=this.Uo.promise.then.bind(this.Uo.promise),this.Uo.promise.catch(function(t){})}function uI(t,e){if(ng("AsyncQueue",e+": "+t),YE(t))return new Ig(Eg.UNAVAILABLE,e+": "+t);throw t}function cI(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=hg(n,i);return 0===s?hg(r,o):s}var hI=(dI.prototype.Th=function(){return++this.wh},dI.prototype.Eh=function(t){var e=[t,this.Th()];if(this.buffer.size<this.dh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();cI(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(dI.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),dI),lI={Ih:!1,Ah:0,Rh:0,mh:0},fI=(pI.ph=function(t){return new pI(t,pI.yh,pI.bh)},pI);function pI(t,e,n){this.Ph=t,this.Vh=e,this.gh=n}function dI(t){this.dh=t,this.buffer=new om(cI),this.wh=0}fI.vh=-1,fI.Sh=1048576,fI.Dh=41943040,fI.yh=10,fI.bh=1e3,fI.Ch=new fI(fI.Dh,fI.yh,fI.bh),fI.DISABLED=new fI(fI.vh,0,0);var vI=(wI.prototype.start=function(t){this.eo.$h.Ph!==fI.vh&&this.kh(t)},wI.prototype.stop=function(){this.Nh&&(this.Nh.cancel(),this.Nh=null)},Object.defineProperty(wI.prototype,"pr",{get:function(){return null!==this.Nh},enumerable:!0,configurable:!0}),wI.prototype.kh=function(n){var t=this,e=this.Fh?3e5:6e4;eg("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Nh=this.Oo.ei("lru_garbage_collection",e,function(){return Ts(t,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:this.Nh=null,this.Fh=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.xh(this.eo)];case 2:return t.sent(),[3,7];case 3:return YE(e=t.sent())?(eg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,TI(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.kh(n)];case 8:return t.sent(),[2]}})})})},wI),yI=(bI.prototype.Lh=function(t,e){return this.Mh.so(t).next(function(t){return Math.floor(e/100*t)})},bI.prototype.Oh=function(t,e){var n=this;if(0===e)return i_.resolve(h_.Qn);var r=new hI(e);return this.Mh.ye(t,function(t){return r.Eh(t.sequenceNumber)}).next(function(){return n.Mh.io(t,function(t){return r.Eh(t)})}).next(function(){return r.maxValue})},bI.prototype.ji=function(t,e,n){return this.Mh.ji(t,e,n)},bI.prototype.uo=function(t,e){return this.Mh.uo(t,e)},bI.prototype.Bh=function(e,n){var r=this;return this.$h.Ph===fI.vh?(eg("LruGarbageCollector","Garbage collection skipped; disabled"),i_.resolve(lI)):this.lo(e).next(function(t){return t<r.$h.Ph?(eg("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.$h.Ph),lI):r.qh(e,n)})},bI.prototype.lo=function(t){return this.Mh.lo(t)},bI.prototype.qh=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Lh(e,this.$h.Vh).next(function(t){return i=t>h.$h.gh?(eg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.$h.gh+" from "+t),h.$h.gh):t,s=Date.now(),h.Oh(e,i)}).next(function(t){return r=t,a=Date.now(),h.ji(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.uo(e,r)}).next(function(t){return c=Date.now(),tg()<=Ia.DEBUG&&eg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),i_.resolve({Ih:!0,Ah:i,Rh:o,mh:t})})},bI),gI=(mI.prototype.start=function(){return Promise.resolve()},mI.prototype.Hh=function(i){return Ts(this,void 0,void 0,function(){var e,m,n,r=this;return Ss(this,function(t){switch(t.label){case 0:return e=this.Rn,m=this.Gh,[4,this.persistence.runTransaction("Handle user change","readonly",function(y){var g;return r.Rn.Ro(y).next(function(t){return g=t,e=r.persistence.zr(i),m=new u_(r.Kh,e,r.persistence.Xr()),e.Ro(y)}).next(function(t){for(var e=[],n=[],r=ym(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++){var c=u[a];r=r.add(c.key)}}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.yn(y,r).next(function(t){return{Yh:t,Jh:e,Xh:n}})})})];case 1:return n=t.sent(),[2,(this.Rn=e,this.Gh=m,this.Uh.zh(this.Gh),n)]}})})},mI.prototype.Zh=function(a){var u,c=this,h=Tg.now(),t=a.reduce(function(t,e){return t.add(e.key)},ym());return this.persistence.runTransaction("Locally write mutations","readwrite",function(s){return c.Gh.yn(s,t).next(function(t){u=t;for(var e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=i.Ze(u.get(i.key));null!=o&&e.push(new Yb(i.key,o,fw(o.proto.mapValue),Qb.exists(!0)))}return c.Rn.wo(s,h,e,a)})}).then(function(t){var e=t.Ks(u);return{batchId:t.batchId,on:e}})},mI.prototype.ta=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.Kh.Vi({pi:!0});return i.ea(t,r,n).next(function(){return n.apply(t)}).next(function(){return i.Rn.po(t)}).next(function(){return i.Gh.yn(t,e)})})},mI.prototype.sa=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.Rn.To(e,t).next(function(t){return og(null!==t),n=t.keys(),r.Rn.Po(e,t)}).next(function(){return r.Rn.po(e)}).next(function(){return r.Gh.yn(e,n)})})},mI.prototype.Ao=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Rn.Ao(t)})},mI.prototype.xi=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Tr.xi(t)})},mI.prototype.na=function(u){var c=this,h=u.J,l=this.Qh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var i=c.Kh.Vi({pi:!0});l=c.Qh;var s=[];u.Qt.forEach(function(t,e){var n=l.get(e);if(n){s.push(c.Tr.Yi(o,t.Xt,e).next(function(){return c.Tr.zi(o,t.Yt,e)}));var r=t.resumeToken;if(0<r.G()){var i=n.Z(r,h).X(o.sr);l=l.et(e,i),mI.ia(n,i,t)&&s.push(c.Tr.Ui(o,i))}}});var a=hm(),n=ym();if(u.jt.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.jt.forEach(function(t,e){var n=r.get(t);e instanceof Tw&&e.version.isEqual(Sg.min())?(i.ln(t,h),a=a.et(t,e)):null==n||0<e.version.o(n.version)||0===e.version.o(n.version)&&n.hasPendingWrites?(i.un(e,h),a=a.et(t,e)):eg("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Kt.has(t)&&s.push(c.persistence.Fi.co(o,t))})})),!h.isEqual(Sg.min())){var t=c.Tr.xi(o).next(function(t){return c.Tr.Li(o,o.sr,h)});s.push(t)}return i_.nn(s).next(function(){return i.apply(o)}).next(function(){return c.Gh.bn(o,a)})}).then(function(t){return c.Qh=l,t})},mI.ia=function(t,e,n){return og(0<e.resumeToken.G()),0===t.resumeToken.G()||e.J.A()-t.J.A()>=this.ra||0<n.Yt.size+n.Jt.size+n.Xt.size},mI.prototype.oa=function(h){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c=this;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return i_.forEach(h,function(e){return i_.forEach(e.xn,function(t){return c.persistence.Fi.Hi(n,e.targetId,t)}).next(function(){return i_.forEach(e.Mn,function(t){return c.persistence.Fi.Ji(n,e.targetId,t)})})})})];case 1:return t.sent(),[3,3];case 2:if(!YE(e=t.sent()))throw e;return eg("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=h;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.Qh.get(o),a=s.J,u=s.tt(a),this.Qh=this.Qh.et(o,u));return[2]}})})},mI.prototype.ha=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Rn.Io(t,e)})},mI.prototype.aa=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.Gh.Pn(t,e)})},mI.prototype.ua=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Tr.Gi(e,r).next(function(t){return t?(n=t,i_.resolve(n)):i.Tr.Ni(e).next(function(t){return n=new zg(r,t,0,e.sr),i.Tr.Oi(e,n).next(function(){return n})})})}).then(function(t){var e=i.Qh.get(t.targetId);return(null===e||0<t.J.o(e.J))&&(i.Qh=i.Qh.et(t.targetId,t),i.Wh.set(r,t.targetId)),t})},mI.prototype.Gi=function(t,e){var n=this.Wh.get(e);return void 0!==n?i_.resolve(this.Qh.get(n)):this.Tr.Gi(t,e)},mI.prototype.ca=function(t,e){var n=this,r=this.Qh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,function(t){return e?i_.resolve():n.persistence.Fi.removeTarget(t,r)}).then(function(){n.Qh=n.Qh.remove(t),n.Wh.delete(r.target)})},mI.prototype.la=function(t,n){var r=this,i=Sg.min(),o=ym();return this.persistence.runTransaction("Execute query","readonly",function(e){return r.Gi(e,t.We()).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Tr.Xi(e,t.targetId).next(function(t){o=t})}).next(function(){return r.Uh.Sn(e,t,n?i:Sg.min(),n?o:ym())}).next(function(t){return{documents:t,_a:o}})})},mI.prototype.ea=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=i_.resolve();return n.forEach(function(r){a=a.next(function(){return o._n(t,r)}).next(function(t){var e=t,n=i.zs.get(r);og(null!==n),(!e||e.version.o(n)<0)&&(e=s.Ke(r,e,i))&&o.un(e,i.Gs)})}),a.next(function(){return e.Rn.Po(t,s)})},mI.prototype.xh=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Bh(t,n.Qh)})},mI);function mI(t,e,n){this.persistence=t,this.Uh=e,this.Qh=new $g(hg),this.Wh=new _g(function(t){return Zw(t)},t_),this.jh=Sg.min(),this.Rn=t.zr(n),this.Kh=t.Jr(),this.Tr=t.Yr(),this.Gh=new u_(this.Kh,this.Rn,this.persistence.Xr()),this.Uh.zh(this.Gh)}function bI(t,e){this.Mh=t,this.$h=e}function wI(t,e){this.eo=t,this.Oo=e,this.Fh=!1,this.Nh=null}gI.ra=3e8;var _I,EI=(Es(II,_I=gI),II.prototype.start=function(){return this.fa()},II.prototype.da=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return n.Rn.Eo(e,t).next(function(t){return t?n.Gh.yn(e,t):i_.resolve(null)})})},II.prototype.wa=function(t){this.Rn.Vo(t)},II.prototype.vr=function(t){this.persistence.vr(t)},II.prototype.Gr=function(){return this.persistence.Gr()},II.prototype.Ta=function(e){var n=this,t=this.Qh.get(e);return t?Promise.resolve(t.target):this.persistence.runTransaction("Get target data","readonly",function(t){return n.Tr.Me(t,e).next(function(t){return t?t.target:null})})},II.prototype.Ri=function(){var r=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return r.Kh.Ri(t,r.jh)}).then(function(t){var e=t.mi,n=t.readTime;return r.jh=n,e})},II.prototype.fa=function(){return Ts(this,void 0,void 0,function(){var e,n=this;return Ss(this,function(t){switch(t.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return n.Kh.Pi(t)})];case 1:return e.jh=t.sent(),[2]}})})},II);function II(t,e,n){var r=this;return(r=_I.call(this,t,e,n)||this).persistence=t,r.Rn=t.zr(n),r.Kh=t.Jr(),r.Tr=t.Yr(),r}function TI(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){if(e.code!==Eg.FAILED_PRECONDITION||e.message!==s_)throw e;return eg("LocalStore","Unexpectedly lost primary lease"),[2]})})}var SI=(AI.prototype._=function(){return this.Ea._()},AI.prototype.Hi=function(t,e){var n=new CI(t,e);this.Ea=this.Ea.add(n),this.Aa=this.Aa.add(n)},AI.prototype.ma=function(t,e){var n=this;t.forEach(function(t){return n.Hi(t,e)})},AI.prototype.Ji=function(t,e){this.Pa(new CI(t,e))},AI.prototype.Va=function(t,e){var n=this;t.forEach(function(t){return n.Ji(t,e)})},AI.prototype.ga=function(t){var e=this,n=Ug.EMPTY,r=new CI(n,t),i=new CI(n,t+1),o=[];return this.Aa.vt([r,i],function(t){e.Pa(t),o.push(t.key)}),o},AI.prototype.pa=function(){var e=this;this.Ea.forEach(function(t){return e.Pa(t)})},AI.prototype.Pa=function(t){this.Ea=this.Ea.delete(t),this.Aa=this.Aa.delete(t)},AI.prototype.ya=function(t){var e=Ug.EMPTY,n=new CI(e,t),r=new CI(e,t+1),i=ym();return this.Aa.vt([n,r],function(t){i=i.add(t.key)}),i},AI.prototype.tr=function(t){var e=new CI(t,0),n=this.Ea.Dt(e);return null!==n&&t.isEqual(n.key)},AI),CI=(NI.Ia=function(t,e){return Ug.P(t.key,e.key)||hg(t.ba,e.ba)},NI.Ra=function(t,e){return hg(t.ba,e.ba)||Ug.P(t.key,e.key)},NI);function NI(t,e){this.key=t,this.ba=e}function AI(){this.Ea=new om(CI.Ia),this.Aa=new om(CI.Ra)}function kI(t,e){if(0!==e.length)throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+KI(e.length,"argument")+".")}function OI(t,e,n){if(e.length!==n)throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires "+KI(n,"argument")+", but was called with "+KI(e.length,"argument")+".")}function RI(t,e,n){if(e.length<n)throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires at least "+KI(n,"argument")+", but was called with "+KI(e.length,"argument")+".")}function PI(t,e,n,r){if(e.length<n||e.length>r)throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+KI(e.length,"argument")+".")}function DI(t,e,n,r){jI(t,e,QI(n)+" argument",r)}function xI(t,e,n,r){void 0!==r&&DI(t,e,n,r)}function LI(t,e,n,r){jI(t,e,n+" option",r)}function MI(t,e,n,r){void 0!==r&&LI(t,e,n,r)}function FI(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(qI(s))}var a=qI(n);throw new Ig(Eg.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function UI(t,e,n,r){if(!e.some(function(t){return t===r}))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid value "+qI(r)+" provided to function "+t+"() for its "+QI(n)+" argument. Acceptable values: "+e.join(", "));return r}function jI(t,e,n,r){if(!("object"===e?VI(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=qI(r);throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function VI(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function qI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":ig();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function BI(t,e,n){if(void 0===n)throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+QI(e)+" argument, but it was undefined.")}function WI(n,t,r){gg(t,function(t,e){if(r.indexOf(t)<0)throw new Ig(Eg.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function HI(t,e,n,r){var i=qI(r);return new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires its "+QI(n)+" argument to be a "+e+", but it was: "+i)}function GI(t,e,n){if(n<=0)throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires its "+QI(e)+" argument to be a positive number, but it was: "+n+".")}function QI(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function KI(t,e){return t+" "+e+(1===t?"":"s")}function zI(){if("undefined"==typeof Uint8Array)throw new Ig(Eg.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function YI(){if("undefined"==typeof atob)throw new Ig(Eg.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function XI(t){!function(){if(!(t instanceof Array)||t.length<1)throw new Ig(Eg.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(DI("FieldPath","string",e,t[e]),0===t[e].length)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Sa=new Mg(t)}var JI,$I=(eT.fromBase64String=function(t){OI("Blob.fromBase64String",arguments,1),DI("Blob.fromBase64String","string",1,t),YI();try{return new eT(Wg.fromBase64String(t))}catch(t){throw new Ig(Eg.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},eT.fromUint8Array=function(t){if(OI("Blob.fromUint8Array",arguments,1),zI(),!(t instanceof Uint8Array))throw HI("Blob.fromUint8Array","Uint8Array",1,t);return new eT(Wg.fromUint8Array(t))},eT.prototype.toBase64=function(){return OI("Blob.toBase64",arguments,0),YI(),this.va.toBase64()},eT.prototype.toUint8Array=function(){return OI("Blob.toUint8Array",arguments,0),zI(),this.va.toUint8Array()},eT.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},eT.prototype.isEqual=function(t){return this.va.isEqual(t.va)},eT),ZI=(Es(tT,JI=XI),tT.documentId=function(){return tT.Da},tT.prototype.isEqual=function(t){if(!(t instanceof tT))throw HI("isEqual","FieldPath",1,t);return this.Sa.isEqual(t.Sa)},tT);function tT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JI.call(this,t)||this}function eT(t){YI(),this.va=t}ZI.Da=new ZI(Mg.O().N());var nT,rT,iT,oT,sT,aT,uT,cT=new RegExp("[~\\*/\\[\\]]"),hT=function(){this.Ca=this},lT=(Es(CT,uT=hT),CT.prototype.Na=function(t){if(2!==t.$a)throw 1===t.$a?t.ka(this.Fa+"() can only appear at the top level of your update data"):t.ka(this.Fa+"() cannot be used with set() unless you pass {merge:true}");return t.Oe.push(t.path),null},CT.prototype.isEqual=function(t){return t instanceof CT},CT),fT=(Es(ST,aT=hT),ST.prototype.Na=function(t){return new Gb(t.path,kb.instance)},ST.prototype.isEqual=function(t){return t instanceof ST},ST),pT=(Es(TT,sT=hT),TT.prototype.Na=function(t){var e=new LT({$a:3,methodName:this.Fa,Ma:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.xa.map(function(t){return jT(t,e)}),r=new Rb(n);return new Gb(t.path,r)},TT.prototype.isEqual=function(t){return this===t},TT),dT=(Es(IT,oT=hT),IT.prototype.Na=function(t){var e=new LT({$a:3,methodName:this.Fa,Ma:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.xa.map(function(t){return jT(t,e)}),r=new Pb(n);return new Gb(t.path,r)},IT.prototype.isEqual=function(t){return this===t},IT),vT=(Es(ET,iT=hT),ET.prototype.Na=function(t){var e=new LT({$a:3,methodName:this.Fa},t.s,t.serializer,t.ignoreUndefinedProperties),n=jT(this.La,e),r=new Db(t.serializer,n);return new Gb(t.path,r)},ET.prototype.isEqual=function(t){return this===t},ET),yT=(Es(_T,rT=hT),_T.delete=function(){return kI("FieldValue.delete",arguments),new gT(new lT("FieldValue.delete"))},_T.serverTimestamp=function(){return kI("FieldValue.serverTimestamp",arguments),new gT(new fT("FieldValue.serverTimestamp"))},_T.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return RI("FieldValue.arrayUnion",arguments,1),new gT(new pT("FieldValue.arrayUnion",t))},_T.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return RI("FieldValue.arrayRemove",arguments,1),new gT(new dT("FieldValue.arrayRemove",t))},_T.increment=function(t){return DI("FieldValue.increment","number",1,t),OI("FieldValue.increment",arguments,1),new gT(new vT("FieldValue.increment",t))},_T),gT=(Es(wT,nT=yT),wT.prototype.Na=function(t){return this.Ca.Na(t)},wT.prototype.isEqual=function(t){return t instanceof wT&&this.Ca.isEqual(t.Ca)},wT),mT=(Object.defineProperty(bT.prototype,"latitude",{get:function(){return this.Oa},enumerable:!0,configurable:!0}),Object.defineProperty(bT.prototype,"longitude",{get:function(){return this.Ba},enumerable:!0,configurable:!0}),bT.prototype.isEqual=function(t){return this.Oa===t.Oa&&this.Ba===t.Ba},bT.prototype.T=function(t){return hg(this.Oa,t.Oa)||hg(this.Ba,t.Ba)},bT);function bT(t,e){if(OI("GeoPoint",arguments,2),DI("GeoPoint","number",1,t),DI("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Ig(Eg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Ig(Eg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Oa=t,this.Ba=e}function wT(t){var e=this;return(e=nT.call(this)||this).Ca=t,e.Fa=t.Fa,e}function _T(){return null!==rT&&rT.apply(this,arguments)||this}function ET(t,e){var n=this;return(n=iT.call(this)||this).Fa=t,n.La=e,n}function IT(t,e){var n=this;return(n=oT.call(this)||this).Fa=t,n.xa=e,n}function TT(t,e){var n=this;return(n=sT.call(this)||this).Fa=t,n.xa=e,n}function ST(t){var e=this;return(e=aT.call(this)||this).Fa=t,e}function CT(t){var e=this;return(e=uT.call(this)||this).Fa=t,e}function NT(t){return new ib(t,!0)}var AT=/^__.*__$/,kT=function(t,e,n){this.qa=t,this.Ua=e,this.Qa=n},OT=(DT.prototype.Wa=function(t,e){var n=[];return null!==this.Oe?n.push(new Yb(t,this.data,this.Oe,e)):n.push(new zb(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Xb(t,this.fieldTransforms)),n},DT),RT=(PT.prototype.Wa=function(t,e){var n=[new Yb(t,this.data,this.Oe,e)];return 0<this.fieldTransforms.length&&n.push(new Xb(t,this.fieldTransforms)),n},PT);function PT(t,e,n){this.data=t,this.Oe=e,this.fieldTransforms=n}function DT(t,e,n){this.data=t,this.Oe=e,this.fieldTransforms=n}function xT(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw ig()}}var LT=(Object.defineProperty(UT.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(UT.prototype,"$a",{get:function(){return this.settings.$a},enumerable:!0,configurable:!0}),UT.prototype.Ka=function(t){return new UT(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Oe)},UT.prototype.Ga=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ka({path:n,Ma:!1});return r.za(t),r},UT.prototype.Ha=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ka({path:n,Ma:!1});return r.ja(),r},UT.prototype.Ya=function(t){return this.Ka({path:void 0,Ma:!0})},UT.prototype.ka=function(t){var e=!this.path||this.path._()?"":" (found in field "+this.path.toString()+")";return new Ig(Eg.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},UT.prototype.contains=function(e){return void 0!==this.Oe.find(function(t){return e.D(t)})||void 0!==this.fieldTransforms.find(function(t){return e.D(t.field)})},UT.prototype.ja=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.za(this.path.get(t))},UT.prototype.za=function(t){if(0===t.length)throw this.ka("Document fields must not be empty");if(xT(this.$a)&&AT.test(t))throw this.ka('Document fields cannot begin and end with "__"')},UT),MT=(FT.prototype.Ja=function(t,e,n){void 0===n&&(n={});var r=this.Xa(n.merge||n.mergeFields?2:0,t);BT("Data must be an object, but it was:",r,e);var i,o,s=VT(e,r);if(n.merge)i=new Hb(r.Oe),o=r.fieldTransforms;else if(n.mergeFields){for(var a=[],u=0,c=n.mergeFields;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof XI)l=h.Sa;else{if("string"!=typeof h)throw ig();l=HT(t,h)}if(!r.contains(l))throw new Ig(Eg.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");GT(a,l)||a.push(l)}i=new Hb(a),o=r.fieldTransforms.filter(function(t){return i.ze(t.field)})}else i=null,o=r.fieldTransforms;return new OT(new Zb(s),i,o)},FT.prototype.Za=function(o,t){var s=this.Xa(1,o);BT("Data must be an object, but it was:",s,t);var a=[],u=new tw;gg(t,function(t,e){var n=HT(o,t),r=s.Ha(n);if(e instanceof hT&&e.Ca instanceof lT)a.push(n);else{var i=jT(e,r);null!=i&&(a.push(n),u.set(n,i))}});var e=new Hb(a);return new RT(u.ss(),e,s.fieldTransforms)},FT.prototype.tu=function(t,e,n,r){var i=this.Xa(1,t),o=[WT(t,e)],s=[n];if(r.length%2!=0)throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(WT(t,r[a])),s.push(r[a+1]);for(var u=[],c=new tw,h=o.length-1;0<=h;--h)if(!GT(u,o[h])){var l=o[h],f=s[h],p=i.Ha(l);if(f instanceof hT&&f.Ca instanceof lT)u.push(l);else{var d=jT(f,p);null!=d&&(u.push(l),c.set(l,d))}}var v=new Hb(u);return new RT(c.ss(),v,i.fieldTransforms)},FT.prototype.Xa=function(t,e){return new LT({$a:t,methodName:e,path:Mg.k,Ma:!1},this.s,this.serializer,this.ignoreUndefinedProperties)},FT.prototype.eu=function(t,e,n){return void 0===n&&(n=!1),jT(e,this.Xa(n?4:3,t))},FT);function FT(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||NT(t)}function UT(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ja(),this.fieldTransforms=i||[],this.Oe=o||[]}function jT(s,t){if(qT(s))return BT("Unsupported field value:",t,s),VT(s,t);if(s instanceof hT)return function(t,e){if(!xT(e.$a))throw e.ka(t.Fa+"() can only be used with update() and set()");if(!e.path)throw e.ka(t.Fa+"() is not currently supported inside arrays");var n=t.Na(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.Oe.push(t.path),s instanceof Array){if(t.settings.Ma&&4!==t.$a)throw t.ka("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=jT(i[r],t.Ya(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return n=e.serializer,Bg(r=t)?ob(r):sb(n,r);var n,r;if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var i=Tg.fromDate(t);return{timestampValue:ab(e.serializer,i)}}if(t instanceof Tg){var o=new Tg(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ab(e.serializer,o)}}if(t instanceof mT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $I)return{bytesValue:ub(e.serializer,t)};if(t instanceof kT){var s=e.s,a=t.qa;if(!a.isEqual(s))throw e.ka("Document reference is for database "+a.projectId+"/"+a.database+" but should be for database "+s.projectId+"/"+s.database);return{referenceValue:lb(t.qa||e.s,t.Ua.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.ka("Unsupported field value: "+qI(t))}(s,t)}function VT(t,r){var i={};return mg(t)?r.path&&0<r.path.length&&r.Oe.push(r.path):gg(t,function(t,e){var n=jT(e,r.Ga(t));null!=n&&(i[t]=n)}),{mapValue:{fields:i}}}function qT(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Tg||t instanceof mT||t instanceof $I||t instanceof kT||t instanceof hT)}function BT(t,e,n){if(!qT(n)||!VI(n)){var r=qI(n);throw"an object"===r?e.ka(t+" a custom object"):e.ka(t+" "+r)}}function WT(t,e){if(e instanceof XI)return e.Sa;if("string"==typeof e)return HT(t,e);throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function HT(t,e){try{return function(e){if(0<=e.search(cT))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ZI.bind.apply(ZI,ks([void 0],e.split("."))))}catch(t){throw new Ig(Eg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Sa}catch(e){var n=e instanceof Error?e.message:e.toString();throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function GT(t,e){return t.some(function(t){return t.isEqual(e)})}var QT=(KT.prototype.fo=function(){return null!=this.uid},KT.prototype.su=function(){return this.fo()?"uid:"+this.uid:"anonymous-user"},KT.prototype.isEqual=function(t){return t.uid===this.uid},KT);function KT(t){this.uid=t}QT.UNAUTHENTICATED=new QT(null),QT.nu=new QT("google-credentials-uid"),QT.iu=new QT("first-party-uid");function zT(t,e){this.user=e,this.type="OAuth",this.ru={},this.ru.Authorization="Bearer "+t}var YT,XT,JT,$T=(bS.prototype.getToken=function(){return Promise.resolve(null)},bS.prototype.hu=function(){},bS.prototype.au=function(t){(this.ou=t)(QT.UNAUTHENTICATED)},bS.prototype.uu=function(){this.ou=null},bS),ZT=(mS.prototype.getToken=function(){var e=this,n=this._u,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e._u!==n?(eg("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(og("string"==typeof t.accessToken),new zT(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},mS.prototype.hu=function(){this.forceRefresh=!0},mS.prototype.au=function(t){this.ou=t,this.lu&&t(this.currentUser)},mS.prototype.uu=function(){this.auth&&this.auth.removeAuthTokenListener(this.cu),this.cu=null,this.ou=null},mS.prototype.fu=function(){var t=this.auth&&this.auth.getUid();return og(null===t||"string"==typeof t),new QT(t)},mS),tS=(Object.defineProperty(gS.prototype,"ru",{get:function(){var t={"X-Goog-AuthUser":this.wu},e=this.du.auth.Tu([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),gS),eS=(yS.prototype.getToken=function(){return Promise.resolve(new tS(this.du,this.wu))},yS.prototype.au=function(t){t(QT.iu)},yS.prototype.uu=function(){},yS.prototype.hu=function(){},yS),nS=(vS.prototype.Pu=function(){return 1===this.state||2===this.state||4===this.state},vS.prototype.Vu=function(){return 2===this.state},vS.prototype.start=function(){3!==this.state?this.auth():this.gu()},vS.prototype.stop=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Pu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},vS.prototype.pu=function(){this.state=0,this.Zo.reset()},vS.prototype.yu=function(){var t=this;this.Vu()&&null===this.mu&&(this.mu=this.Wn.ei(this.Eu,6e4,function(){return t.bu()}))},vS.prototype.vu=function(t){this.Su(),this.stream.send(t)},vS.prototype.bu=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return this.Vu()?[2,this.close(0)]:[2]})})},vS.prototype.Su=function(){this.mu&&(this.mu.cancel(),this.mu=null)},vS.prototype.close=function(e,n){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Su(),this.Zo.cancel(),this.Ru++,3!==e?this.Zo.reset():n&&n.code===Eg.RESOURCE_EXHAUSTED?(ng(n.toString()),ng("Using maximum backoff delay to prevent overloading the backend."),this.Zo.Xn()):n&&n.code===Eg.UNAUTHENTICATED&&this.Au.hu(),null!==this.stream&&(this.Du(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Cu(n)];case 1:return t.sent(),[2]}})})},vS.prototype.Du=function(){},vS.prototype.auth=function(){var n=this;this.state=1;var t=this.Fu(this.Ru),e=this.Ru;this.Au.getToken().then(function(t){n.Ru===e&&n.Nu(t)},function(e){t(function(){var t=new Ig(Eg.UNKNOWN,"Fetching auth token failed: "+e.message);return n.$u(t)})})},vS.prototype.Nu=function(t){var e=this,n=this.Fu(this.Ru);this.stream=this.ku(t),this.stream.xu(function(){n(function(){return e.state=2,e.listener.xu()})}),this.stream.Cu(function(t){n(function(){return e.$u(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},vS.prototype.gu=function(){var t=this;this.state=4,this.Zo.Zn(function(){return Ts(t,void 0,void 0,function(){return Ss(this,function(t){return this.state=0,this.start(),[2]})})})},vS.prototype.$u=function(t){return eg("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},vS.prototype.Fu=function(e){var n=this;return function(t){n.Wn.Sr(function(){return n.Ru===e?t():(eg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},vS),rS=(Es(dS,JT=nS),dS.prototype.ku=function(t){return this.Iu.Mu("Listen",t)},dS.prototype.onMessage=function(t){this.Zo.reset();var e=function(t,e){var n,r,i,o;if("targetChange"in e){e.targetChange;var s="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:ig(),a=e.targetChange.targetIds||[],u=cb(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(i=void 0===(r=c).code?Eg.UNKNOWN:Jg(r.code),new Ig(i,r.message||""));n=new _m(s,a,u,h||null)}else if("documentChange"in e){e.documentChange;var l=e.documentChange;l.document,l.document.name,l.document.updateTime;var f=db(t,l.document.name),p=hb(l.document.updateTime),d=new Zb({mapValue:{fields:l.document.fields}}),v=new Iw(f,p,d,{}),y=l.targetIds||[],g=l.removedTargetIds||[];n=new bm(y,g,v.key,v)}else if("documentDelete"in e){e.documentDelete;var m=e.documentDelete;m.document;var b=db(t,m.document),w=m.readTime?hb(m.readTime):Sg.min(),_=new Tw(b,w),E=m.removedTargetIds||[];n=new bm([],E,_.key,_)}else if("documentRemove"in e){e.documentRemove;var I=e.documentRemove;I.document;var T=db(t,I.document),S=I.removedTargetIds||[];n=new bm([],S,T,null)}else{if(!("filter"in e))return ig();e.filter;var C=e.filter;C.targetId;var N=C.count||0,A=new Gg(N),k=C.targetId;n=new wm(k,A)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Sg.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?Sg.min():hb(e.readTime)}(t);return this.listener.Lu(e,n)},dS.prototype.Ou=function(t){var e,n,r,i,o={};o.database=gb(this.serializer),o.addTarget=(e=this.serializer,i=(n=t).target,(r=e_(i)?{documents:Eb(e,i)}:{query:Ib(e,i)}).targetId=n.targetId,0<n.resumeToken.G()&&(r.resumeToken=ub(e,n.resumeToken)),r);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.Y){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ig()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.vu(o)},dS.prototype.Bu=function(t){var e={};e.database=gb(this.serializer),e.removeTarget=t,this.vu(e)},dS),iS=(Es(pS,XT=nS),Object.defineProperty(pS.prototype,"Uu",{get:function(){return this.qu},enumerable:!0,configurable:!0}),pS.prototype.start=function(){this.qu=!1,this.lastStreamToken=Wg.H,XT.prototype.start.call(this)},pS.prototype.Du=function(){this.qu&&this.Qu([])},pS.prototype.ku=function(t){return this.Iu.Mu("Write",t)},pS.prototype.onMessage=function(t){if(og(!!t.streamToken),this.lastStreamToken=cb(this.serializer,t.streamToken),this.qu){this.Zo.reset();var e=(r=t.writeResults,i=t.commitTime,r&&0<r.length?(og(void 0!==i),r.map(function(t){return function(t,e){var n=t.updateTime?hb(t.updateTime):hb(e);n.isEqual(Sg.min())&&(n=hb(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new Ub(n,r)}(t,i)})):[]),n=hb(t.commitTime);return this.listener.Wu(n,e)}var r,i;return og(!t.writeResults||0===t.writeResults.length),this.qu=!0,this.listener.ju()},pS.prototype.Ku=function(){var t={};t.database=gb(this.serializer),this.vu(t)},pS.prototype.Qu=function(t){var e=this,n={streamToken:ub(this.serializer,this.lastStreamToken),writes:t.map(function(t){return wb(e.serializer,t)})};this.vu(n)},pS),oS=(Es(fS,YT=function(){this.Gu=void 0}),fS.prototype.Hu=function(){if(this.zu)throw new Ig(Eg.FAILED_PRECONDITION,"The client has already been terminated.")},fS.prototype.Yu=function(e,n){var r=this;return this.Hu(),this.credentials.getToken().then(function(t){return r.Iu.Yu(e,n,t)}).catch(function(t){throw t.code===Eg.UNAUTHENTICATED&&r.credentials.hu(),t})},fS.prototype.Ju=function(e,n){var r=this;return this.Hu(),this.credentials.getToken().then(function(t){return r.Iu.Ju(e,n,t)}).catch(function(t){throw t.code===Eg.UNAUTHENTICATED&&r.credentials.hu(),t})},fS),sS=(lS.prototype.nc=function(r){return Ts(this,void 0,void 0,function(){var e,n=this;return Ss(this,function(t){switch(t.label){case 0:if(this.ic(),0<this.mutations.length)throw new Ig(Eg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return Ts(this,void 0,void 0,function(){var i,e,n,o,r;return Ss(this,function(t){switch(t.label){case 0:return i=sg(s),e={database:gb(i.serializer),documents:a.map(function(t){return pb(i.serializer,t)})},[4,i.Ju("BatchGetDocuments",e)];case 1:return n=t.sent(),o=new Map,n.forEach(function(t){var e,n,r=(e=i.serializer,"found"in(n=t)?function(t,e){og(!!e.found),e.found.name,e.found.updateTime;var n=db(t,e.found.name),r=hb(e.found.updateTime),i=new Zb({mapValue:{fields:e.found.fields}});return new Iw(n,r,i,{})}(e,n):"missing"in n?function(t,e){og(!!e.missing),og(!!e.readTime);var n=db(t,e.missing),r=hb(e.readTime);return new Tw(n,r)}(e,n):ig());o.set(r.key.toString(),r)}),r=[],[2,(a.forEach(function(t){var e=o.get(t.toString());og(!!e),r.push(e)}),r)]}})})}(this.Xu,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Tw||t instanceof Iw?n.rc(t):ig()}),e)]}})})},lS.prototype.set=function(t,e){this.write(e.Wa(t,this.Ue(t))),this.sc.add(t)},lS.prototype.update=function(t,e){try{this.write(e.Wa(t,this.oc(t)))}catch(t){this.ec=t}this.sc.add(t)},lS.prototype.delete=function(t){this.write([new Jb(t,this.Ue(t))]),this.sc.add(t)},lS.prototype.commit=function(){return Ts(this,void 0,void 0,function(){var e,r=this;return Ss(this,function(t){switch(t.label){case 0:if(this.ic(),this.ec)throw this.ec;return e=this.Zu,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=new Ug(Ng.$(e));r.mutations.push(new $b(n,r.Ue(n)))}),[4,function(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return e=sg(r),n={database:gb(e.serializer),writes:i.map(function(t){return wb(e.serializer,t)})},[4,e.Yu("Commit",n)];case 1:return t.sent(),[2]}})})}(this.Xu,this.mutations)];case 1:return t.sent(),this.tc=!0,[2]}})})},lS.prototype.rc=function(t){var e;if(t instanceof Iw)e=t.version;else{if(!(t instanceof Tw))throw ig();e=Sg.min()}var n=this.Zu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ig(Eg.ABORTED,"Document version changed between two reads.")}else this.Zu.set(t.key.toString(),e)},lS.prototype.Ue=function(t){var e=this.Zu.get(t.toString());return!this.sc.has(t)&&e?Qb.updateTime(e):Qb.Qe()},lS.prototype.oc=function(t){var e=this.Zu.get(t.toString());if(this.sc.has(t)||!e)return Qb.exists(!0);if(e.isEqual(Sg.min()))throw new Ig(Eg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qb.updateTime(e)},lS.prototype.write=function(t){this.ic(),this.mutations=this.mutations.concat(t)},lS.prototype.ic=function(){},lS),aS=(hS.prototype.lc=function(){var t=this;0===this.ac&&(this._c("Unknown"),this.uc=this.Oo.ei("online_state_timeout",1e4,function(){return t.uc=null,t.fc("Backend didn't respond within 10 seconds."),t._c("Offline"),Promise.resolve()}))},hS.prototype.dc=function(t){"Online"===this.state?this._c("Unknown"):(this.ac++,1<=this.ac&&(this.wc(),this.fc("Connection failed 1 times. Most recent error: "+t.toString()),this._c("Offline")))},hS.prototype.set=function(t){this.wc(),this.ac=0,"Online"===t&&(this.cc=!1),this._c(t)},hS.prototype._c=function(t){t!==this.state&&(this.state=t,this.hc(t))},hS.prototype.fc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.cc?(ng(e),this.cc=!1):eg("OnlineStateTracker",e)},hS.prototype.wc=function(){null!==this.uc&&(this.uc.cancel(),this.uc=null)},hS),uS=(cS.prototype.start=function(){return this.enableNetwork()},cS.prototype.enableNetwork=function(){return this.Rc.delete(0),this.$c()},cS.prototype.$c=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Vc()?(this.kc()?this.xc():this.pc.set("Unknown"),[4,this.Mc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},cS.prototype.disableNetwork=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Rc.add(0),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Offline"),[2]}})})},cS.prototype.Lc=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.Dc.stop()];case 1:return t.sent(),[4,this.yc.stop()];case 2:return t.sent(),0<this.Ec.length&&(eg("RemoteStore","Stopping write stream with "+this.Ec.length+" pending writes"),this.Ec=[]),this.Oc(),[2]}})})},cS.prototype.Ur=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return eg("RemoteStore","RemoteStore shutting down."),this.Rc.add(5),[4,this.Lc()];case 1:return t.sent(),this.mc.Ur(),this.pc.set("Unknown"),[2]}})})},cS.prototype.listen=function(t){this.Ic.has(t.targetId)||(this.Ic.set(t.targetId,t),this.kc()?this.xc():this.yc.Vu()&&this.Bc(t))},cS.prototype.qc=function(t){this.Ic.delete(t),this.yc.Vu()&&this.Uc(t),0===this.Ic.size&&(this.yc.Vu()?this.yc.yu():this.Vc()&&this.pc.set("Unknown"))},cS.prototype.Me=function(t){return this.Ic.get(t)||null},cS.prototype.xe=function(t){return this.Qc.xe(t)},cS.prototype.Bc=function(t){this.Ac.de(t.targetId),this.yc.Ou(t)},cS.prototype.Uc=function(t){this.Ac.de(t),this.yc.Bu(t)},cS.prototype.xc=function(){this.Ac=new Am(this),this.yc.start(),this.pc.lc()},cS.prototype.kc=function(){return this.Vc()&&!this.yc.Pu()&&0<this.Ic.size},cS.prototype.Vc=function(){return 0===this.Rc.size},cS.prototype.Oc=function(){this.Ac=null},cS.prototype.bc=function(){return Ts(this,void 0,void 0,function(){var n=this;return Ss(this,function(t){return this.Ic.forEach(function(t,e){n.Bc(t)}),[2]})})},cS.prototype.vc=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return this.Oc(),this.kc()?(this.pc.dc(e),this.xc()):this.pc.set("Unknown"),[2]})})},cS.prototype.Sc=function(i,o){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:if(this.pc.set("Online"),!(i instanceof _m&&2===i.state&&i.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.Wc(i)];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),eg("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),e),[4,this.jc(e)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof bm?this.Ac.Pe(i):i instanceof wm?this.Ac.De(i):this.Ac.pe(i),o.isEqual(Sg.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,this.Tc.xi()];case 8:return n=t.sent(),0<=o.o(n)?[4,this.Kc(o)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return eg("RemoteStore","Failed to raise snapshot:",r=t.sent()),[4,this.jc(r)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},cS.prototype.jc=function(n,r){return Ts(this,void 0,void 0,function(){var e=this;return Ss(this,function(t){switch(t.label){case 0:if(!YE(n))throw n;return this.Rc.add(1),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Offline"),r=r||function(){return e.Tc.xi()},this.Oo.Cr(function(){return Ts(e,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return eg("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return t.sent(),this.Rc.delete(1),[4,this.$c()];case 2:return t.sent(),[2]}})})}),[2]}})})},cS.prototype.Gc=function(e){var n=this;return e().catch(function(t){return n.jc(t,e)})},cS.prototype.Kc=function(r){var i=this,t=this.Ac.Ne(r);return t.Qt.forEach(function(t,e){if(0<t.resumeToken.G()){var n=i.Ic.get(e);n&&i.Ic.set(e,n.Z(t.resumeToken,r))}}),t.Wt.forEach(function(t){var e=i.Ic.get(t);if(e){i.Ic.set(t,e.Z(Wg.H,e.J)),i.Uc(t);var n=new zg(e.target,t,1,e.sequenceNumber);i.Bc(n)}}),this.Qc.na(t)},cS.prototype.Wc=function(o){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:e=o.cause,n=0,r=o.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],this.Ic.has(i)?[4,this.Qc.zc(i,e)]:[3,3]):[3,5];case 2:t.sent(),this.Ic.delete(i),this.Ac.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})},cS.prototype.Mc=function(){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:e=0<this.Ec.length?this.Ec[this.Ec.length-1].batchId:-1,t.label=1;case 1:if(!this.Hc())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.Tc.ha(e)];case 3:return null===(n=t.sent())?(0===this.Ec.length&&this.Dc.yu(),[3,7]):(e=n.batchId,this.Yc(n),[3,6]);case 4:return r=t.sent(),[4,this.jc(r)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return this.Jc()&&this.Xc(),[2]}})})},cS.prototype.Hc=function(){return this.Vc()&&this.Ec.length<10},cS.prototype.Zc=function(){return this.Ec.length},cS.prototype.Yc=function(t){this.Ec.push(t),this.Dc.Vu()&&this.Dc.Uu&&this.Dc.Qu(t.mutations)},cS.prototype.Jc=function(){return this.Vc()&&!this.Dc.Pu()&&0<this.Ec.length},cS.prototype.Xc=function(){this.Dc.start()},cS.prototype.Cc=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return this.Dc.Ku(),[2]})})},cS.prototype.Nc=function(){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){for(e=0,n=this.Ec;e<n.length;e++)r=n[e],this.Dc.Qu(r.mutations);return[2]})})},cS.prototype.Wu=function(i,o){return Ts(this,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){switch(t.label){case 0:return e=this.Ec.shift(),n=r_.from(e,i,o),[4,this.Gc(function(){return r.Qc.tl(n)})];case 1:return t.sent(),[4,this.Mc()];case 2:return t.sent(),[2]}})})},cS.prototype.Fc=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return e&&this.Dc.Uu?[4,this.el(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.Jc()&&this.Xc(),[2]}})})},cS.prototype.el=function(i){return Ts(this,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){switch(t.label){case 0:return Xg(n=i.code)&&n!==Eg.ABORTED?(e=this.Ec.shift(),this.Dc.pu(),[4,this.Gc(function(){return r.Qc.sl(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,this.Mc()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},cS.prototype.nl=function(){return new sS(this.Xu)},cS.prototype.gc=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Rc.add(4),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Unknown"),this.Rc.delete(4),[4,this.$c()];case 2:return t.sent(),[2]}})})},cS.prototype.il=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Oo.ah(),eg("RemoteStore","RemoteStore received new credentials"),this.Rc.add(3),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Unknown"),[4,this.Qc.il(e)];case 2:return t.sent(),this.Rc.delete(3),[4,this.$c()];case 3:return t.sent(),[2]}})})},cS.prototype.rl=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return e?(this.Rc.delete(2),[4,this.$c()]):[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:(this.Rc.add(2),[4,this.Lc()]);case 3:t.sent(),this.pc.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},cS);function cS(t,e,n,r,i){var o,s,a,u,c,h,l,f,p=this;this.Tc=t,this.Xu=e,this.Oo=n,this.Ec=[],this.Ic=new Map,this.Ac=null,this.Rc=new Set,this.mc=i,this.mc.Pc(function(t){n.Sr(function(){return Ts(p,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Vc()?(eg("RemoteStore","Restarting streams for network reachability change."),[4,this.gc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.pc=new aS(n,r),this.yc=(c=this.Xu,h=n,l={xu:this.bc.bind(this),Cu:this.vc.bind(this),Lu:this.Sc.bind(this)},f=sg(c),new rS(h,f.Iu,f.credentials,f.serializer,l)),this.Dc=(o=this.Xu,s=n,a={xu:this.Cc.bind(this),Cu:this.Fc.bind(this),ju:this.Nc.bind(this),Wu:this.Wu.bind(this)},u=sg(o),new iS(s,u.Iu,u.credentials,u.serializer,a))}function hS(t,e){this.Oo=t,this.hc=e,this.state="Unknown",this.ac=0,this.uc=null,this.cc=!0}function lS(t){this.Xu=t,this.Zu=new Map,this.mutations=[],this.tc=!1,this.ec=null,this.sc=new Set}function fS(t,e,n){var r=this;return(r=YT.call(this)||this).Iu=t,r.credentials=e,r.serializer=n,r.zu=!1,r}function pS(t,e,n,r,i){var o=this;return(o=XT.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.qu=!1,o.lastStreamToken=Wg.H,o}function dS(t,e,n,r,i){var o=this;return(o=JT.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function vS(t,e,n,r,i,o){this.Wn=t,this.Eu=n,this.Iu=r,this.Au=i,this.listener=o,this.state=0,this.Ru=0,this.mu=null,this.stream=null,this.Zo=new w_(t,e)}function yS(t,e){this.du=t,this.wu=e}function gS(t,e){this.du=t,this.wu=e,this.type="FirstParty",this.user=QT.iu}function mS(t){var e=this;this.cu=null,this.currentUser=QT.UNAUTHENTICATED,this.lu=!1,this._u=0,this.ou=null,this.forceRefresh=!1,this.cu=function(){e._u++,e.currentUser=e.fu(),e.lu=!0,e.ou&&e.ou(e.currentUser)},this._u=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.cu):(this.cu(null),t.get().then(function(t){e.auth=t,e.cu&&e.auth.addAuthTokenListener(e.cu)},function(){}))}function bS(){this.ou=null}function wS(t,e){return"firestore_clients_"+t+"_"+e}function _S(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.fo()&&(r+="_"+e.uid),r}function ES(t,e){return"firestore_targets_"+t+"_"+e}function IS(t){this.key=t}function TS(t){this.key=t}function SS(t,e,n){this.query=t,this.targetId=e,this.view=n}function CS(t){this.key=t,this.R_=!1}function NS(){this.if=void 0,this.rf=[]}var AS,kS,OS=(aC.ol=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ig(r.error.code,r.error.message)),i?new aC(t,e,r.state,o):(ng("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},aC.prototype.hl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},aC),RS=(sC.ol=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Ig(n.error.code,n.error.message)),r?new sC(t,n.state,i):(ng("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},sC.prototype.hl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},sC),PS=(oC.ol=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=mm(),o=0;r&&o<n.activeTargetIds.length;++o)r=Bg(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new oC(t,i):(ng("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},oC),DS=(iC.ol=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new iC(e.clientId,e.onlineState):(ng("SharedClientState","Failed to parse online state: "+t),null)},iC),xS=(rC.prototype.al=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},rC.prototype.ul=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},rC.prototype.hl=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},rC),LS=(nC._r=function(t){return!(!t||!t.localStorage)},nC.prototype.start=function(){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.Qc.Gr()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.cl&&(o=this.getItem(wS(this.persistenceKey,i)))&&(s=PS.ol(i,o))&&(this.fl=this.fl.et(s.clientId,s));for(this.ml(),(a=this.storage.getItem(this.Rl))&&(u=this.Pl(a))&&this.Vl(u),c=0,h=this.dl;c<h.length;c++)l=h[c],this._l(l);return this.dl=[],this.window.addEventListener("unload",function(){return f.Ur()}),this.pr=!0,[2]}})})},nC.prototype.Un=function(t){this.setItem(this.Tl,JSON.stringify(t))},nC.prototype.gl=function(){return this.pl(this.fl)},nC.prototype.yl=function(n){var r=!1;return this.fl.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},nC.prototype.bl=function(t){this.vl(t,"pending")},nC.prototype.Sl=function(t,e,n){this.vl(t,e,n),this.Dl(t)},nC.prototype.Cl=function(t){var e="not-current";if(this.yl(t)){var n=this.storage.getItem(ES(this.persistenceKey,t));if(n){var r=RS.ol(t,n);r&&(e=r.state)}}return this.Fl.al(t),this.ml(),e},nC.prototype.Nl=function(t){this.Fl.ul(t),this.ml()},nC.prototype.$l=function(t){return this.Fl.activeTargetIds.has(t)},nC.prototype.kl=function(t){this.removeItem(ES(this.persistenceKey,t))},nC.prototype.xl=function(t,e,n){this.Ml(t,e,n)},nC.prototype.Hh=function(t,e,n){var r=this;e.forEach(function(t){r.Dl(t)}),this.currentUser=t,n.forEach(function(t){r.bl(t)})},nC.prototype.Ll=function(t){this.Ol(t)},nC.prototype.Ur=function(){this.pr&&(this.window.removeEventListener("storage",this.ll),this.removeItem(this.wl),this.pr=!1)},nC.prototype.getItem=function(t){var e=this.storage.getItem(t);return eg("SharedClientState","READ",t,e),e},nC.prototype.setItem=function(t,e){eg("SharedClientState","SET",t,e),this.storage.setItem(t,e)},nC.prototype.removeItem=function(t){eg("SharedClientState","REMOVE",t),this.storage.removeItem(t)},nC.prototype._l=function(t){var e=this,a=t;if(a.storageArea===this.storage){if(eg("SharedClientState","EVENT",a.key,a.newValue),a.key===this.wl)return void ng("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Wn.Cr(function(){return Ts(e,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){if(this.pr){if(null!==a.key)if(this.El.test(a.key)){if(null==a.newValue)return e=this.Bl(a.key),[2,this.ql(e,null)];if(n=this.Ul(a.key,a.newValue))return[2,this.ql(n.clientId,n)]}else if(this.Il.test(a.key)){if(null!==a.newValue&&(r=this.Ql(a.key,a.newValue)))return[2,this.Wl(r)]}else if(this.Al.test(a.key)){if(null!==a.newValue&&(i=this.jl(a.key,a.newValue)))return[2,this.Kl(i)]}else if(a.key===this.Rl){if(null!==a.newValue&&(o=this.Pl(a.newValue)))return[2,this.Vl(o)]}else a.key===this.Tl&&(s=function(t){var e=h_.Qn;if(null!=t)try{var n=JSON.parse(t);og("number"==typeof n),e=n}catch(t){ng("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==h_.Qn&&this.On(s)}else this.dl.push(a);return[2]})})})}},Object.defineProperty(nC.prototype,"Fl",{get:function(){return this.fl.get(this.cl)},enumerable:!0,configurable:!0}),nC.prototype.ml=function(){this.setItem(this.wl,this.Fl.hl())},nC.prototype.vl=function(t,e,n){var r=new OS(this.currentUser,t,e,n),i=_S(this.persistenceKey,this.currentUser,t);this.setItem(i,r.hl())},nC.prototype.Dl=function(t){var e=_S(this.persistenceKey,this.currentUser,t);this.removeItem(e)},nC.prototype.Ol=function(t){var e={clientId:this.cl,onlineState:t};this.storage.setItem(this.Rl,JSON.stringify(e))},nC.prototype.Ml=function(t,e,n){var r=ES(this.persistenceKey,t),i=new RS(t,e,n);this.setItem(r,i.hl())},nC.prototype.Bl=function(t){var e=this.El.exec(t);return e?e[1]:null},nC.prototype.Ul=function(t,e){var n=this.Bl(t);return PS.ol(n,e)},nC.prototype.Ql=function(t,e){var n=this.Il.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return OS.ol(new QT(i),r,e)},nC.prototype.jl=function(t,e){var n=this.Al.exec(t),r=Number(n[1]);return RS.ol(r,e)},nC.prototype.Pl=function(t){return DS.ol(t)},nC.prototype.Wl=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.Qc.Gl(e.batchId,e.state,e.error)]:(eg("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},nC.prototype.Kl=function(t){return this.Qc.zl(t.targetId,t.state,t.error)},nC.prototype.ql=function(t,e){var n=this,r=e?this.fl.et(t,e):this.fl.remove(t),i=this.pl(this.fl),o=this.pl(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.Qc.Hl(s,a).then(function(){n.fl=r})},nC.prototype.Vl=function(t){this.fl.get(t.clientId)&&this.hc(t.onlineState)},nC.prototype.pl=function(t){var n=mm();return t.forEach(function(t,e){n=n.Ct(e.activeTargetIds)}),n},nC),MS=(eC.prototype.bl=function(t){},eC.prototype.Sl=function(t,e,n){},eC.prototype.Cl=function(t){return this.Yl.al(t),this.Jl[t]||"not-current"},eC.prototype.xl=function(t,e,n){this.Jl[t]=e},eC.prototype.Nl=function(t){this.Yl.ul(t)},eC.prototype.$l=function(t){return this.Yl.activeTargetIds.has(t)},eC.prototype.kl=function(t){delete this.Jl[t]},eC.prototype.gl=function(){return this.Yl.activeTargetIds},eC.prototype.yl=function(t){return this.Yl.activeTargetIds.has(t)},eC.prototype.start=function(){return this.Yl=new xS,Promise.resolve()},eC.prototype.Hh=function(t,e,n){},eC.prototype.Ll=function(t){},eC.prototype.Ur=function(){},eC.prototype.Un=function(t){},eC),FS=(Object.defineProperty(tC.prototype,"s_",{get:function(){return this.Xl},enumerable:!0,configurable:!0}),tC.prototype.n_=function(t,e){var a=this,u=e?e.i_:new Im,c=e?e.e_:this.e_,h=e?e.Ot:this.Ot,l=c,f=!1,p=this.query.ks()&&c.size===this.query.limit?c.last():null,d=this.query.xs()&&c.size===this.query.limit?c.first():null;if(t.ot(function(t,e){var n=c.get(t),r=e instanceof Iw?e:null;r=r&&(a.query.matches(r)?r:null);var i=!!n&&a.Ot.has(n.key),o=!!r&&(r.Xe||a.Ot.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.r_(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.query.Ds(r,p)||d&&a.query.Ds(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.ks()||this.query.xs())for(;l.size>this.query.limit;){var n=this.query.ks()?l.last():l.first();l=l.delete(n.key),h=h.delete(n.key),u.track({type:1,doc:n})}return{e_:l,i_:u,o_:f,Ot:h}},tC.prototype.r_=function(t,e){return t.Xe&&e.hasCommittedMutations&&!e.Xe},tC.prototype.wn=function(t,e,n){var o=this,r=this.e_;this.e_=t.e_,this.Ot=t.Ot;var i=t.i_.Mt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.query.Ds(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ig()}}var r,i}),this.h_(n);var s=e?this.a_():[],a=0===this.t_.size&&this.Ht?1:0,u=a!==this.Zl;return this.Zl=a,0!==i.length||u?{snapshot:new Tm(this.query,t.e_,r,i,t.Ot,0==a,u,!1),u_:s}:{u_:s}},tC.prototype.c_=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.wn({e_:this.e_,i_:new Im,Ot:this.Ot,o_:!1},!1)):{u_:[]}},tC.prototype.l_=function(t){return!this.Xl.has(t)&&!!this.e_.has(t)&&!this.e_.get(t).Xe},tC.prototype.h_=function(t){var e=this;t&&(t.Yt.forEach(function(t){return e.Xl=e.Xl.add(t)}),t.Jt.forEach(function(t){}),t.Xt.forEach(function(t){return e.Xl=e.Xl.delete(t)}),this.Ht=t.Ht)},tC.prototype.a_=function(){var e=this;if(!this.Ht)return[];var n=this.t_;this.t_=ym(),this.e_.forEach(function(t){e.l_(t.key)&&(e.t_=e.t_.add(t.key))});var r=[];return n.forEach(function(t){e.t_.has(t)||r.push(new TS(t))}),this.t_.forEach(function(t){n.has(t)||r.push(new IS(t))}),r},tC.prototype.__=function(t){this.Xl=t._a,this.t_=ym();var e=this.n_(t.documents);return this.wn(e,!0)},tC.prototype.f_=function(){return Tm.Ut(this.query,this.e_,this.Ot,0===this.Zl)},tC),US=(ZS.prototype.w_=function(){this.T_()},ZS.prototype.T_=function(){var t=this;this.Zo.Zn(function(){return Ts(t,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){return e=new sS(this.Xu),(n=this.E_(e))&&n.then(function(t){r.Oo.Sr(function(){return e.commit().then(function(){r.Uo.resolve(t)}).catch(function(t){r.I_(t)})})}).catch(function(t){r.I_(t)}),[2]})})})},ZS.prototype.E_=function(t){try{var e=this.updateFunction(t);return!Vg(e)&&e.catch&&e.then?e:(this.Uo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Uo.reject(t),null}},ZS.prototype.I_=function(t){var e=this;0<this.d_&&this.A_(t)?(--this.d_,this.Oo.Sr(function(){return e.T_(),Promise.resolve()})):this.Uo.reject(t)},ZS.prototype.A_=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!Xg(e)},ZS),jS=(Object.defineProperty($S.prototype,"k_",{get:function(){return!0},enumerable:!0,configurable:!0}),$S.prototype.subscribe=function(t){this.g_=t},$S.prototype.listen=function(s){return Ts(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return this.x_("listen()"),(r=this.p_.get(s))?(e=r.targetId,this.P_.Cl(e),n=r.view.f_(),[3,4]):[3,1];case 1:return[4,this.Tc.ua(s.We())];case 2:return i=t.sent(),o=this.P_.Cl(i.targetId),e=i.targetId,[4,this.M_(s,e,"current"===o)];case 3:n=t.sent(),this.k_&&this.m_.listen(i),t.label=4;case 4:return[2,n]}})})},$S.prototype.M_=function(a,u,c){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,this.Tc.la(a,!0)];case 1:return e=t.sent(),n=new FS(a,e._a),r=n.n_(e.documents),i=Cm.zt(u,c&&"Offline"!==this.onlineState),o=n.wn(r,this.k_,i),this.L_(u,o.u_),s=new SS(a,u,n),[2,(this.p_.set(a,s),this.y_.has(u)?this.y_.get(u).push(a):this.y_.set(u,[a]),o.snapshot)]}})})},$S.prototype.qc=function(i){return Ts(this,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){switch(t.label){case 0:return this.x_("unlisten()"),e=this.p_.get(i),1<(n=this.y_.get(e.targetId)).length?[2,(this.y_.set(e.targetId,n.filter(function(t){return!t.isEqual(i)})),void this.p_.delete(i))]:this.k_?(this.P_.Nl(e.targetId),this.P_.yl(e.targetId)?[3,2]:[4,this.Tc.ca(e.targetId,!1).then(function(){r.P_.kl(e.targetId),r.m_.qc(e.targetId),r.O_(e.targetId)}).catch(TI)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.O_(e.targetId),[4,this.Tc.ca(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},$S.prototype.write=function(i,o){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:this.x_("write()"),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.Tc.Zh(i)];case 2:return e=t.sent(),this.P_.bl(e.batchId),this.B_(e.batchId,o),[4,this.q_(e.on)];case 3:return t.sent(),[4,this.m_.Mc()];case 4:return t.sent(),[3,6];case 5:return n=t.sent(),r=uI(n,"Failed to persist write"),o.reject(r),[3,6];case 6:return[2]}})})},$S.prototype.runTransaction=function(t,e,n){new US(t,this.Xu,e,n).w_()},$S.prototype.na=function(n){return Ts(this,void 0,void 0,function(){var e,r=this;return Ss(this,function(t){switch(t.label){case 0:this.x_("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Tc.na(n)];case 2:return e=t.sent(),n.Qt.forEach(function(t,e){var n=r.S_.get(e);n&&(og(t.Yt.size+t.Jt.size+t.Xt.size<=1),0<t.Yt.size?n.R_=!0:0<t.Jt.size?og(n.R_):0<t.Xt.size&&(og(n.R_),n.R_=!1))}),[4,this.q_(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,TI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},$S.prototype.c_=function(r,t){this.x_("applyOnlineStateChange()");var i=[];this.p_.forEach(function(t,e){var n=e.view.c_(r);n.snapshot&&i.push(n.snapshot)}),this.g_.U_(r),this.g_.Lu(i),this.onlineState=r},$S.prototype.zc=function(a,u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Ss(this,function(t){switch(t.label){case 0:return this.x_("rejectListens()"),this.P_.xl(a,"rejected",u),e=this.S_.get(a),(n=e&&e.key)?(r=(r=new $g(Ug.P)).et(n,new Tw(n,Sg.min())),i=ym().add(n),o=new Sm(Sg.min(),new Map,new om(hg),r,i),[4,this.na(o)]):[3,2];case 1:return t.sent(),this.v_=this.v_.remove(n),this.S_.delete(a),this.Q_(),[3,4];case 2:return[4,this.Tc.ca(a,!1).then(function(){return s.O_(a,u)}).catch(TI)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},$S.prototype.tl=function(r){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:this.x_("applySuccessfulWrite()"),e=r.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Tc.ta(r)];case 2:return n=t.sent(),this.W_(e,null),this.j_(e),this.P_.Sl(e,"acknowledged"),[4,this.q_(n)];case 3:return t.sent(),[3,6];case 4:return[4,TI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},$S.prototype.sl=function(n,r){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:this.x_("rejectFailedWrite()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Tc.sa(n)];case 2:return e=t.sent(),this.W_(n,r),this.j_(n),this.P_.Sl(n,"rejected",r),[4,this.q_(e)];case 3:return t.sent(),[3,6];case 4:return[4,TI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},$S.prototype.K_=function(o){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:this.m_.Vc()||eg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Tc.Ao()];case 2:return-1===(e=t.sent())?[2,void o.resolve()]:((n=this.F_.get(e)||[]).push(o),this.F_.set(e,n),[3,4]);case 3:return r=t.sent(),i=uI(r,"Initialization of waitForPendingWrites() operation failed"),o.reject(i),[3,4];case 4:return[2]}})})},$S.prototype.j_=function(t){(this.F_.get(t)||[]).forEach(function(t){t.resolve()}),this.F_.delete(t)},$S.prototype.G_=function(e){this.F_.forEach(function(t){t.forEach(function(t){t.reject(new Ig(Eg.CANCELLED,e))})}),this.F_.clear()},$S.prototype.B_=function(t,e){var n=this.C_[this.currentUser.su()];n=(n=n||new $g(hg)).et(t,e),this.C_[this.currentUser.su()]=n},$S.prototype.W_=function(t,e){var n=this.C_[this.currentUser.su()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.C_[this.currentUser.su()]=n}},$S.prototype.O_=function(t,e){var n=this;void 0===e&&(e=null),this.P_.Nl(t);for(var r=0,i=this.y_.get(t);r<i.length;r++){var o=i[r];this.p_.delete(o),e&&this.g_.z_(o,e)}this.y_.delete(t),this.k_&&this.D_.ga(t).forEach(function(t){n.D_.tr(t)||n.H_(t)})},$S.prototype.H_=function(t){var e=this.v_.get(t);null!==e&&(this.m_.qc(e),this.v_=this.v_.remove(t),this.S_.delete(e),this.Q_())},$S.prototype.L_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof IS?(this.D_.Hi(i.key,t),this.Y_(i)):i instanceof TS?(eg("SyncEngine","Document no longer in limbo: "+i.key),this.D_.Ji(i.key,t),this.D_.tr(i.key)||this.H_(i.key)):ig()}},$S.prototype.Y_=function(t){var e=t.key;this.v_.get(e)||(eg("SyncEngine","New document in limbo: "+e),this.b_.push(e),this.Q_())},$S.prototype.Q_=function(){for(;0<this.b_.length&&this.v_.size<this.V_;){var t=this.b_.shift(),e=this.N_.next();this.S_.set(e,new CS(t)),this.v_=this.v_.et(t,e),this.m_.listen(new zg(Cw.As(t.path).We(),e,2,h_.Qn))}},$S.prototype.J_=function(){return this.v_},$S.prototype.X_=function(){return this.b_},$S.prototype.q_=function(r,u){return Ts(this,void 0,void 0,function(){var o,s,e,a=this;return Ss(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.p_.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.n_(r);return n.o_?a.Tc.la(i.query,!1).then(function(t){var e=t.documents;return i.view.n_(e,n)}):n}).then(function(t){var e=u&&u.Qt.get(i.targetId),n=i.view.wn(t,a.k_,e);if(a.L_(i.targetId,n.u_),n.snapshot){a.k_&&a.P_.xl(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=c_.Ln(i.targetId,n.snapshot);s.push(r)}}))}),[4,Promise.all(e)];case 1:return t.sent(),this.g_.Lu(o),[4,this.Tc.oa(s)];case 2:return t.sent(),[2]}})})},$S.prototype.x_=function(t){},$S.prototype.il=function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.currentUser.isEqual(n)?[3,3]:(eg("SyncEngine","User change. New user:",n.su()),[4,this.Tc.Hh(n)]);case 1:return e=t.sent(),this.currentUser=n,this.G_("'waitForPendingWrites' promise is rejected due to a user change."),this.P_.Hh(n,e.Jh,e.Xh),[4,this.q_(e.Yh)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},$S.prototype.enableNetwork=function(){return this.m_.enableNetwork()},$S.prototype.disableNetwork=function(){return this.m_.disableNetwork()},$S.prototype.xe=function(t){var e=this.S_.get(t);if(e&&e.R_)return ym().add(e.key);var n=ym(),r=this.y_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.p_.get(s);n=n.Ct(a.view.s_)}return n},$S),VS=(Es(JS,AS=jS),Object.defineProperty(JS.prototype,"k_",{get:function(){return!0===this.Z_},enumerable:!0,configurable:!0}),JS.prototype.enableNetwork=function(){return this.Tc.vr(!0),AS.prototype.enableNetwork.call(this)},JS.prototype.disableNetwork=function(){return this.Tc.vr(!1),AS.prototype.disableNetwork.call(this)},JS.prototype.tf=function(r){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,this.Tc.la(r.query,!0)];case 1:return e=t.sent(),n=r.view.__(e),[2,(this.Z_&&this.L_(r.targetId,n.u_),n)]}})})},JS.prototype.c_=function(t,e){this.k_&&0===e&&(AS.prototype.c_.call(this,t,e),this.P_.Ll(t)),this.k_||1!==e||AS.prototype.c_.call(this,t,e)},JS.prototype.Gl=function(n,r,i){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.x_("applyBatchState()"),[4,this.Tc.da(n)];case 1:return null===(e=t.sent())?[3,6]:"pending"!==r?[3,3]:[4,this.m_.Mc()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.W_(n,i||null),this.Tc.wa(n)):ig(),t.label=4;case 4:return[4,this.q_(e)];case 5:return t.sent(),[3,7];case 6:eg("SyncEngine","Cannot apply mutation batch with id: "+n),t.label=7;case 7:return[2]}})})},JS.prototype.rl=function(c){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return Ss(this,function(t){switch(t.label){case 0:return!0!==c||!0===this.Z_?[3,3]:(e=this.P_.gl(),[4,this.ef(e.F(),!0)]);case 1:return n=t.sent(),this.Z_=!0,[4,this.m_.rl(!0)];case 2:for(t.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.m_.listen(o);return[3,7];case 3:return!1!==c||!1===this.Z_?[3,7]:(s=[],a=Promise.resolve(),this.y_.forEach(function(t,e){u.P_.$l(e)?s.push(e):a=a.then(function(){return u.O_(e),u.Tc.ca(e,!0)}),u.m_.qc(e)}),[4,a]);case 4:return t.sent(),[4,this.ef(s,!1)];case 5:return t.sent(),this.sf(),this.Z_=!1,[4,this.m_.rl(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},JS.prototype.sf=function(){var n=this;this.S_.forEach(function(t,e){n.m_.qc(e)}),this.D_.pa(),this.S_=new Map,this.v_=new $g(Ug.P)},JS.prototype.ef=function(d,t){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p;return Ss(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=d,t.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.y_.get(o))&&0!==a.length?[4,this.Tc.ua(a[0].We())]:[3,7]):[3,13];case 2:s=t.sent(),u=0,c=a,t.label=3;case 3:return u<c.length?(h=c[u],l=this.p_.get(h),[4,this.tf(l)]):[3,6];case 4:(f=t.sent()).snapshot&&n.push(f.snapshot),t.label=5;case 5:return u++,[3,3];case 6:return[3,11];case 7:return[4,this.Tc.Ta(o)];case 8:return p=t.sent(),[4,this.Tc.ua(p)];case 9:return s=t.sent(),[4,this.M_(this.nf(p),o,!1)];case 10:t.sent(),t.label=11;case 11:e.push(s),t.label=12;case 12:return r++,[3,1];case 13:return[2,(this.g_.Lu(n),e)]}})})},JS.prototype.nf=function(t){return new Cw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},JS.prototype.Gr=function(){return this.Tc.Gr()},JS.prototype.zl=function(r,i,o){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return this.Z_?(eg("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.y_.has(r))return[3,8];switch(i){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Tc.Ri()];case 3:return e=t.sent(),n=Sm.Gt(r,"current"===i),[4,this.q_(e,n)];case 4:return t.sent(),[3,8];case 5:return[4,this.Tc.ca(r,!0)];case 6:return t.sent(),this.O_(r,o),[3,8];case 7:ig(),t.label=8;case 8:return[2]}})})},JS.prototype.Hl=function(f,p){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Ss(this,function(t){switch(t.label){case 0:if(!this.Z_)return[3,10];e=0,n=f,t.label=1;case 1:return e<n.length?(r=n[e],this.y_.has(r)?(eg("SyncEngine","Adding an already active target "+r),[3,5]):[4,this.Tc.Ta(r)]):[3,6];case 2:return i=t.sent(),[4,this.Tc.ua(i)];case 3:return o=t.sent(),[4,this.M_(this.nf(i),o.targetId,!1)];case 4:t.sent(),this.m_.listen(o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Ss(this,function(t){switch(t.label){case 0:return a.y_.has(e)?[4,a.Tc.ca(e,!1).then(function(){l.m_.qc(e),l.O_(e)}).catch(TI)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=this,u=0,c=p,t.label=7;case 7:return u<c.length?(h=c[u],[5,s(h)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},JS),qS=(XS.prototype.listen=function(a){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:if(e=a.query,n=!1,(r=this.hf.get(e))||(n=!0,r=new NS),!n)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),i=r,[4,this.Qc.listen(e)];case 2:return i.if=t.sent(),[3,4];case 3:return o=t.sent(),s=uI(o,"Initialization of query '"+a.query+"' failed"),[2,void a.onError(s)];case 4:return this.hf.set(e,r),r.rf.push(a),a.c_(this.onlineState),r.if&&a.uf(r.if)&&this.cf(),[2]}})})},XS.prototype.qc=function(o){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){return e=o.query,n=!1,(r=this.hf.get(e))&&0<=(i=r.rf.indexOf(o))&&(r.rf.splice(i,1),n=0===r.rf.length),n?[2,(this.hf.delete(e),this.Qc.qc(e))]:[2]})})},XS.prototype.Lu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.hf.get(o);if(s){for(var a=0,u=s.rf;a<u.length;a++)u[a].uf(i)&&(e=!0);s.if=i}}e&&this.cf()},XS.prototype.z_=function(t,e){var n=this.hf.get(t);if(n)for(var r=0,i=n.rf;r<i.length;r++)i[r].onError(e);this.hf.delete(t)},XS.prototype.U_=function(i){this.onlineState=i;var o=!1;this.hf.forEach(function(t,e){for(var n=0,r=e.rf;n<r.length;n++)r[n].c_(i)&&(o=!0)}),o&&this.cf()},XS.prototype.lf=function(t){this.af.add(t),t.next()},XS.prototype._f=function(t){this.af.delete(t)},XS.prototype.cf=function(){this.af.forEach(function(t){t.next()})},XS),BS=(YS.prototype.uf=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Tm(t.query,t.docs,t.Lt,e,t.Ot,t.fromCache,t.Bt,!0)}var o=!1;return this.df?this.Tf(t)&&(this.ff.next(t),o=!0):this.Ef(t,this.onlineState)&&(this.If(t),o=!0),this.wf=t,o},YS.prototype.onError=function(t){this.ff.error(t)},YS.prototype.c_=function(t){this.onlineState=t;var e=!1;return this.wf&&!this.df&&this.Ef(this.wf,t)&&(this.If(this.wf),e=!0),e},YS.prototype.Ef=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Af&&n||t.docs._()&&"Offline"!==e)},YS.prototype.Tf=function(t){if(0<t.docChanges.length)return!0;var e=this.wf&&this.wf.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},YS.prototype.If=function(t){t=Tm.Ut(t.query,t.docs,t.Ot,t.fromCache),this.df=!0,this.ff.next(t)},YS),WS=(zS.prototype.zh=function(t){this.Rf=t},zS.prototype.Sn=function(e,r,i,o){var s=this;return r.Ss()||i.isEqual(Sg.min())?this.mf(e,r):this.Rf.yn(e,o).next(function(t){var n=s.Pf(r,t);return(r.ks()||r.xs())&&s.o_(r.ws,n,o,i)?s.mf(e,r):(tg()<=Ia.DEBUG&&eg("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),s.Rf.Sn(e,r,i).next(function(e){return n.forEach(function(t){e=e.et(t.key,t)}),e}))})},zS.prototype.Pf=function(n,t){var r=new om(function(t,e){return n.Ds(t,e)});return t.forEach(function(t,e){e instanceof Iw&&n.matches(e)&&(r=r.add(e))}),r},zS.prototype.o_=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.o(r))},zS.prototype.mf=function(t,e){return tg()<=Ia.DEBUG&&eg("IndexFreeQueryEngine","Using full collection scan to execute query:",e.toString()),this.Rf.Sn(t,e,Sg.min())},zS),HS=(KS.prototype.do=function(t){return i_.resolve(0===this.Rn.length)},KS.prototype.wo=function(t,e,n,r){var i=this.Vf;this.Vf++,0<this.Rn.length&&this.Rn[this.Rn.length-1];var o=new n_(i,e,n,r);this.Rn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.gf=this.gf.add(new CI(u.key,i)),this.mn.ri(t,u.key.path.p())}return i_.resolve(o)},KS.prototype.To=function(t,e){return i_.resolve(this.pf(e))},KS.prototype.Io=function(t,e){var n=e+1,r=this.yf(n),i=r<0?0:r;return i_.resolve(this.Rn.length>i?this.Rn[i]:null)},KS.prototype.Ao=function(){return i_.resolve(0===this.Rn.length?-1:this.Vf-1)},KS.prototype.Ro=function(t){return i_.resolve(this.Rn.slice())},KS.prototype.Vn=function(t,e){var n=this,r=new CI(e,0),i=new CI(e,Number.POSITIVE_INFINITY),o=[];return this.gf.vt([r,i],function(t){var e=n.pf(t.ba);o.push(e)}),i_.resolve(o)},KS.prototype.vn=function(t,e){var r=this,i=new om(hg);return e.forEach(function(t){var e=new CI(t,0),n=new CI(t,Number.POSITIVE_INFINITY);r.gf.vt([e,n],function(t){i=i.add(t.ba)})}),i_.resolve(this.bf(i))},KS.prototype.$n=function(t,e){var n=e.path,r=n.length+1,i=n;Ug.W(i)||(i=i.child(""));var o=new CI(new Ug(i),0),s=new om(hg);return this.gf.St(function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.ba)),!0)},o),i_.resolve(this.bf(s))},KS.prototype.bf=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.pf(t);null!==e&&r.push(e)}),r},KS.prototype.Po=function(n,r){var i=this;og(0===this.vf(r.batchId,"removed")),this.Rn.shift();var o=this.gf;return i_.forEach(r.mutations,function(t){var e=new CI(t.key,r.batchId);return o=o.delete(e),i.Fi.oo(n,t.key)}).next(function(){i.gf=o})},KS.prototype.Vo=function(t){},KS.prototype.tr=function(t,e){var n=new CI(e,0),r=this.gf.Dt(n);return i_.resolve(e.isEqual(r&&r.key))},KS.prototype.po=function(t){return this.Rn.length,i_.resolve()},KS.prototype.vf=function(t,e){return this.yf(t)},KS.prototype.yf=function(t){return 0===this.Rn.length?0:t-this.Rn[0].batchId},KS.prototype.pf=function(t){var e=this.yf(t);return e<0||e>=this.Rn.length?null:this.Rn[e]},KS),GS=(QS.prototype.un=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Sf(e);return this.docs=this.docs.et(r,{fi:e,size:s,readTime:n}),this.size+=s-o,this.mn.ri(t,r.path.p())},QS.prototype.ln=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},QS.prototype._n=function(t,e){var n=this.docs.get(e);return i_.resolve(n?n.fi:null)},QS.prototype.getEntries=function(t,e){var n=this,r=lm();return e.forEach(function(t){var e=n.docs.get(t);r=r.et(t,e?e.fi:null)}),i_.resolve(r)},QS.prototype.Sn=function(t,e,n){for(var r=pm(),i=new Ug(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,c=u.fi,h=u.readTime;if(!e.path.D(a.path))break;h.o(n)<=0||c instanceof Iw&&e.matches(c)&&(r=r.et(c.key,c))}return i_.resolve(r)},QS.prototype.Df=function(t,e){return i_.forEach(this.docs,function(t){return e(t)})},QS.prototype.Vi=function(t){return new QS.gi(this)},QS.prototype.yi=function(t){return i_.resolve(this.size)},QS);function QS(t,e){this.mn=t,this.Sf=e,this.docs=new $g(Ug.P),this.size=0}function KS(t,e){this.mn=t,this.Fi=e,this.Rn=[],this.Vf=1,this.gf=new om(CI.Ia)}function zS(){}function YS(t,e,n){this.query=t,this.ff=e,this.df=!1,this.wf=null,this.onlineState="Unknown",this.options=n||{}}function XS(t){this.Qc=t,this.hf=new _g(function(t){return t.canonicalId()},function(t,e){return t.isEqual(e)}),this.onlineState="Unknown",this.af=new Set,this.Qc.subscribe(this)}function JS(t,e,n,r,i,o){var s=this;return(s=AS.call(this,t,e,n,r,i,o)||this).Tc=t,s.Z_=void 0,s}function $S(t,e,n,r,i,o){this.Tc=t,this.m_=e,this.Xu=n,this.P_=r,this.currentUser=i,this.V_=o,this.g_=null,this.p_=new _g(function(t){return t.canonicalId()},function(t,e){return t.isEqual(e)}),this.y_=new Map,this.b_=[],this.v_=new $g(Ug.P),this.S_=new Map,this.D_=new SI,this.C_={},this.F_=new Map,this.N_=J_.Ci(),this.onlineState="Unknown"}function ZS(t,e,n,r){this.Oo=t,this.Xu=e,this.updateFunction=n,this.Uo=r,this.d_=5,this.Zo=new w_(this.Oo,"transaction_retry")}function tC(t,e){this.query=t,this.Xl=e,this.Zl=null,this.Ht=!1,this.t_=ym(),this.Ot=ym(),this.e_=new Em(t.Ds.bind(t))}function eC(){this.Yl=new xS,this.Jl={},this.Qc=null,this.hc=null,this.On=null}function nC(t,e,n,r,i){this.window=t,this.Wn=e,this.persistenceKey=n,this.cl=r,this.Qc=null,this.hc=null,this.On=null,this.ll=this._l.bind(this),this.fl=new $g(hg),this.pr=!1,this.dl=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.wl=wS(this.persistenceKey,this.cl),this.Tl="firestore_sequence_number_"+this.persistenceKey,this.fl=this.fl.et(this.cl,new xS),this.El=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Il=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Al=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Rl="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.ll)}function rC(){this.activeTargetIds=mm()}function iC(t,e){this.clientId=t,this.onlineState=e}function oC(t,e){this.clientId=t,this.activeTargetIds=e}function sC(t,e,n){this.targetId=t,this.state=e,this.error=n}function aC(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function uC(t){var e=this;return(e=kS.call(this)||this).bi=t,e}GS.gi=(Es(uC,kS=o_),uC.prototype.wn=function(n){var r=this,i=[];return this.on.forEach(function(t,e){e?i.push(r.bi.un(n,e,r.readTime)):r.bi.ln(t)}),i_.nn(i)},uC.prototype.fn=function(t,e){return this.bi._n(t,e)},uC.prototype.dn=function(t,e){return this.bi.getEntries(t,e)},uC);var cC,hC,lC=(FC.prototype.ye=function(t,n){return this.Cf.forEach(function(t,e){return n(e)}),i_.resolve()},FC.prototype.xi=function(t){return i_.resolve(this.lastRemoteSnapshotVersion)},FC.prototype.Mi=function(t){return i_.resolve(this.Ff)},FC.prototype.Ni=function(t){return this.highestTargetId=this.$f.next(),i_.resolve(this.highestTargetId)},FC.prototype.Li=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ff&&(this.Ff=e),i_.resolve()},FC.prototype.Bi=function(t){this.Cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.$f=new J_(e),this.highestTargetId=e),t.sequenceNumber>this.Ff&&(this.Ff=t.sequenceNumber)},FC.prototype.Oi=function(t,e){return this.Bi(e),this.targetCount+=1,i_.resolve()},FC.prototype.Ui=function(t,e){return this.Bi(e),i_.resolve()},FC.prototype.Qi=function(t,e){return this.Cf.delete(e.target),this.Nf.ga(e.targetId),--this.targetCount,i_.resolve()},FC.prototype.ji=function(n,r,i){var o=this,s=0,a=[];return this.Cf.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.Cf.delete(t),a.push(o.Wi(n,e.targetId)),s++)}),i_.nn(a).next(function(){return s})},FC.prototype.Ki=function(t){return i_.resolve(this.targetCount)},FC.prototype.Gi=function(t,e){var n=this.Cf.get(e)||null;return i_.resolve(n)},FC.prototype.zi=function(t,e,n){return this.Nf.ma(e,n),i_.resolve()},FC.prototype.Yi=function(e,t,n){this.Nf.Va(t,n);var r=this.persistence.Fi,i=[];return r&&t.forEach(function(t){i.push(r.oo(e,t))}),i_.nn(i)},FC.prototype.Wi=function(t,e){return this.Nf.ga(e),i_.resolve()},FC.prototype.Xi=function(t,e){var n=this.Nf.ya(e);return i_.resolve(n)},FC.prototype.tr=function(t,e){return i_.resolve(this.Nf.tr(e))},FC),fC=(MC.prototype.start=function(){return Promise.resolve()},MC.prototype.Ur=function(){return this.or=!1,Promise.resolve()},Object.defineProperty(MC.prototype,"pr",{get:function(){return this.or},enumerable:!0,configurable:!0}),MC.prototype.yr=function(){},MC.prototype.Xr=function(){return this.mn},MC.prototype.zr=function(t){var e=this.kf[t.su()];return e||(e=new HS(this.mn,this.Fi),this.kf[t.su()]=e),e},MC.prototype.Yr=function(){return this.Tr},MC.prototype.Jr=function(){return this.An},MC.prototype.runTransaction=function(t,e,n){var r=this;eg("MemoryPersistence","Starting transaction:",t);var i=new pC(this.rr.next());return this.Fi.Mf(),n(i).next(function(t){return r.Fi.Lf(i).next(function(){return t})}).en().then(function(t){return i.In(),t})},MC.prototype.Of=function(e,n){return i_.rn(Object.values(this.kf).map(function(t){return function(){return t.tr(e,n)}}))},MC),pC=(Es(LC,hC=a_),LC),dC=(xC.Uf=function(t){return new xC(t)},Object.defineProperty(xC.prototype,"Qf",{get:function(){if(this.qf)return this.qf;throw ig()},enumerable:!0,configurable:!0}),xC.prototype.Hi=function(t,e,n){return this.Bf.Hi(n,e),this.Qf.delete(n),i_.resolve()},xC.prototype.Ji=function(t,e,n){return this.Bf.Ji(n,e),this.Qf.add(n),i_.resolve()},xC.prototype.oo=function(t,e){return this.Qf.add(e),i_.resolve()},xC.prototype.removeTarget=function(t,e){var n=this;this.Bf.ga(e.targetId).forEach(function(t){return n.Qf.add(t)});var r=this.persistence.Yr();return r.Xi(t,e.targetId).next(function(t){t.forEach(function(t){return n.Qf.add(t)})}).next(function(){return r.Qi(t,e)})},xC.prototype.Mf=function(){this.qf=new Set},xC.prototype.Lf=function(t){var n=this,r=this.persistence.Jr().Vi();return i_.forEach(this.Qf,function(e){return n.Wf(t,e).next(function(t){t||r.ln(e)})}).next(function(){return n.qf=null,r.apply(t)})},xC.prototype.co=function(t,e){var n=this;return this.Wf(t,e).next(function(t){t?n.Qf.delete(e):n.Qf.add(e)})},xC.prototype.xf=function(t){return 0},xC.prototype.Wf=function(t,e){var n=this;return i_.rn([function(){return i_.resolve(n.Bf.tr(e))},function(){return n.persistence.Yr().tr(t,e)},function(){return n.persistence.Of(t,e)}])},xC),vC=(DC.prototype.xu=function(t){this.Gf=t},DC.prototype.Cu=function(t){this.zf=t},DC.prototype.onMessage=function(t){this.Hf=t},DC.prototype.close=function(){this.Kf()},DC.prototype.send=function(t){this.jf(t)},DC.prototype.Yf=function(){this.Gf()},DC.prototype.Jf=function(t){this.zf(t)},DC.prototype.Xf=function(t){this.Hf(t)},DC),yC={BatchGetDocuments:"batchGet",Commit:"commit"},gC="gl-js/ fire/"+$y,mC=(PC.prototype.td=function(t,e){if(e)for(var n in e.ru)e.ru.hasOwnProperty(n)&&(t[n]=e.ru[n]);t["X-Goog-Api-Client"]=gC},PC.prototype.Yu=function(u,r,i){var c=this,h=this.ed(u);return new Promise(function(o,s){var a=new Jy;a.listenOnce(Yy.COMPLETE,function(){try{switch(a.getLastErrorCode()){case zy.NO_ERROR:var t=a.getResponseJson();eg("Connection","XHR received:",JSON.stringify(t)),o(t);break;case zy.TIMEOUT:eg("Connection",'RPC "'+u+'" timed out'),s(new Ig(Eg.DEADLINE_EXCEEDED,"Request time out"));break;case zy.HTTP_ERROR:var e=a.getStatus();if(eg("Connection",'RPC "'+u+'" failed with status:',e,"response text:",a.getResponseText()),0<e){var n=a.getResponseJson().error;if(n&&n.status&&n.message){var r=(i=n.status.toLowerCase().replace("_","-"),0<=Object.values(Eg).indexOf(i)?i:Eg.UNKNOWN);s(new Ig(r,n.message))}else s(new Ig(Eg.UNKNOWN,"Server responded with status "+a.getStatus()))}else eg("Connection",'RPC "'+u+'" failed'),s(new Ig(Eg.UNAVAILABLE,"Connection failed."));break;default:ig()}}finally{eg("Connection",'RPC "'+u+'" completed.')}var i});var t=Object.assign({},r);delete t.database;var e=JSON.stringify(t);eg("Connection","XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c.td(n,i),a.send(h,"POST",e,n,15)})},PC.prototype.Ju=function(t,e,n){return this.Yu(t,e,n)},PC.prototype.Mu=function(t,e){var n,r,i=[this.Zf,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ky(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.td(s.initMessageHeaders,e),qs()||Bs()||0<=Vs().indexOf("Electron/")||0<=(r=Vs()).indexOf("MSIE ")||0<=r.indexOf("Trident/")||0<=Vs().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");function u(t,e){c.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}eg("Connection","Creating WebChannel: "+a+" "+s);var c=o.createWebChannel(a,s),h=!1,l=!1,f=new vC({jf:function(t){l?eg("Connection","Not sending because WebChannel is closed:",t):(h||(eg("Connection","Opening WebChannel transport."),c.open(),h=!0),eg("Connection","WebChannel sending:",t),c.send(t))},Kf:function(){return c.close()}});return u(Xy.EventType.OPEN,function(){l||eg("Connection","WebChannel transport opened.")}),u(Xy.EventType.CLOSE,function(){l||(l=!0,eg("Connection","WebChannel transport closed"),f.Jf())}),u(Xy.EventType.ERROR,function(t){l||(l=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zy.logLevel<=Ia.WARN){var r=e.map(rg);Zy.warn.apply(Zy,ks(["Firestore ("+$y+"): Connection"],r))}}("Connection","WebChannel transport errored:",t),f.Jf(new Ig(Eg.UNAVAILABLE,"The operation could not be completed")))}),u(Xy.EventType.MESSAGE,function(t){var e;if(!l){var n=t.data[0];og(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){eg("Connection","WebChannel received error:",r);var i=r.status,o=function(){var t=Qg[i];if(void 0!==t)return Jg(t)}(),s=r.message;void 0===o&&(o=Eg.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,f.Jf(new Ig(o,s)),c.close()}else eg("Connection","WebChannel received:",n),f.Xf(n)}}),setTimeout(function(){f.Yf()},0),f},PC.prototype.ed=function(t){var e=yC[t];return this.Zf+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},PC),bC=(RC.prototype.Pc=function(t){this.hd.push(t)},RC.prototype.Ur=function(){window.removeEventListener("online",this.sd),window.removeEventListener("offline",this.rd)},RC.prototype.ad=function(){window.addEventListener("online",this.sd),window.addEventListener("offline",this.rd)},RC.prototype.nd=function(){eg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.hd;t<e.length;t++)(0,e[t])(0)},RC.prototype.od=function(){eg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.hd;t<e.length;t++)(0,e[t])(1)},RC._r=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},RC),wC=(OC.prototype.Pc=function(t){},OC.prototype.Ur=function(){},OC),_C="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",EC=(kC.prototype.initialize=function(n){return Ts(this,void 0,void 0,function(){var e=this;return Ss(this,function(t){switch(t.label){case 0:return this.P_=this.ud(n),this.persistence=this.ld(n),[4,this.persistence.start()];case 1:return t.sent(),this._d=this.fd(n),this.Tc=this.dd(n),this.m_=this.wd(n),this.Qc=this.Td(n),this.Ed=this.Id(n),this.P_.hc=function(t){return e.Qc.c_(t,1)},this.m_.Qc=this.Qc,[4,this.Tc.start()];case 2:return t.sent(),[4,this.P_.start()];case 3:return t.sent(),[4,this.m_.start()];case 4:return t.sent(),[4,this.m_.rl(this.Qc.k_)];case 5:return t.sent(),[2]}})})},kC.prototype.Id=function(t){return new qS(this.Qc)},kC.prototype.fd=function(t){return null},kC.prototype.dd=function(t){return new gI(this.persistence,new WS,t.Ad)},kC.prototype.ld=function(t){if(t.md.Rd)throw new Ig(Eg.FAILED_PRECONDITION,_C);return new fC(dC.Uf)},kC.prototype.wd=function(t){var e=this;return new uS(this.Tc,t.Xu,t.Oo,function(t){return e.Qc.c_(t,0)},new(bC._r()?bC:wC))},kC.prototype.ud=function(t){return new MS},kC.prototype.Td=function(t){return new jS(this.Tc,this.m_,t.Xu,this.P_,t.Ad,t.V_)},kC.prototype.clearPersistence=function(t){throw new Ig(Eg.FAILED_PRECONDITION,_C)},kC),IC=(Es(AC,cC=EC),AC.prototype.initialize=function(e){return Ts(this,void 0,void 0,function(){var n=this;return Ss(this,function(t){switch(t.label){case 0:return[4,cC.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,this.persistence.gr(function(e){return Ts(n,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.Qc.rl(e)];case 1:return t.sent(),this._d&&(e&&!this._d.pr?this._d.start(this.Tc):e||this._d.stop()),[2]}})})})];case 2:return t.sent(),[2]}})})},AC.prototype.dd=function(t){return new EI(this.persistence,new WS,t.Ad)},AC.prototype.Td=function(t){var e=new VS(this.Tc,this.m_,t.Xu,this.P_,t.Ad,t.V_);return this.P_ instanceof LS&&(this.P_.Qc=e),e},AC.prototype.fd=function(t){var e=this.persistence.Fi.eo;return new vI(e,t.Oo)},AC.prototype.ld=function(t){var e=aE.to(t.Pd),n=NT(t.Pd.s);return new aE(t.md.synchronizeTabs,e,t.clientId,fI.ph(t.md.cacheSizeBytes),t.Oo,rI(),"undefined"!=typeof document?document:null,n,this.P_,t.md.ir)},AC.prototype.ud=function(t){if(t.md.Rd&&t.md.synchronizeTabs){var e=rI();if(!LS._r(e))throw new Ig(Eg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=aE.to(t.Pd);return new LS(e,t.Oo,n,t.clientId,t.Ad)}return new MS},AC.prototype.clearPersistence=function(t){var e=aE.to(t);return aE.clearPersistence(e)},AC),TC=(NC.prototype.start=function(e,n){var r=this;this.Hu();var i=new b_,o=new b_,s=!1;return this.credentials.au(function(t){if(!s)return s=!0,eg("FirestoreClient","Initializing. user=",t.uid),r.Vd(e,n,t,o).then(i.resolve,i.reject);r.Oo.Cr(function(){return r.m_.il(t)})}),this.Oo.Sr(function(){return i.promise}),o.promise},NC.prototype.enableNetwork=function(){var t=this;return this.Hu(),this.Oo.enqueue(function(){return t.Qc.enableNetwork()})},NC.prototype.Vd=function(c,h,l,f){return Ts(this,void 0,void 0,function(){var r,i,o,s,a,u=this;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,(a=this.Pd,Promise.resolve(new mC(a)))];case 1:return r=t.sent(),i=NT(this.Pd.s),e=r,n=this.credentials,o=new oS(e,n,i),[4,c.initialize({Oo:this.Oo,Pd:this.Pd,Xu:o,clientId:this.clientId,Ad:l,V_:100,md:h})];case 2:return t.sent(),this.persistence=c.persistence,this.P_=c.P_,this.Tc=c.Tc,this.m_=c.m_,this.Qc=c.Qc,this._d=c._d,this.gd=c.Ed,this.persistence.yr(function(){return Ts(u,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),f.resolve(),[3,4];case 3:if(s=t.sent(),f.reject(s),!this.pd(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.Vd(new EC,{Rd:!1},l,f))];case 4:return[2]}var e,n})})},NC.prototype.pd=function(t){return"FirebaseError"===t.name?t.code===Eg.FAILED_PRECONDITION||t.code===Eg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},NC.prototype.Hu=function(){if(this.Oo.eh)throw new Ig(Eg.FAILED_PRECONDITION,"The client has already been terminated.")},NC.prototype.disableNetwork=function(){var t=this;return this.Hu(),this.Oo.enqueue(function(){return t.Qc.disableNetwork()})},NC.prototype.terminate=function(){var t=this;return this.Oo.oh(function(){return Ts(t,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this._d&&this._d.stop(),[4,this.m_.Ur()];case 1:return t.sent(),[4,this.P_.Ur()];case 2:return t.sent(),[4,this.persistence.Ur()];case 3:return t.sent(),this.credentials.uu(),[2]}})})})},NC.prototype.waitForPendingWrites=function(){var t=this;this.Hu();var e=new b_;return this.Oo.Sr(function(){return t.Qc.K_(e)}),e.promise},NC.prototype.listen=function(t,e,n){var r=this;this.Hu();var i=new BS(t,e,n);return this.Oo.Sr(function(){return r.gd.listen(i)}),i},NC.prototype.qc=function(t){var e=this;this.yd||this.Oo.Sr(function(){return e.gd.qc(t)})},NC.prototype.bd=function(o){return Ts(this,void 0,void 0,function(){var i,e=this;return Ss(this,function(t){switch(t.label){case 0:return this.Hu(),i=new b_,[4,this.Oo.enqueue(function(){return Ts(e,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.Tc.aa(o)];case 1:return(e=t.sent())instanceof Iw?i.resolve(e):e instanceof Tw?i.resolve(null):i.reject(new Ig(Eg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=t.sent(),r=uI(n,"Failed to get document '"+o+" from cache"),i.reject(r),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),i.promise)]}})})},NC.prototype.vd=function(u){return Ts(this,void 0,void 0,function(){var a,e=this;return Ss(this,function(t){switch(t.label){case 0:return this.Hu(),a=new b_,[4,this.Oo.enqueue(function(){return Ts(e,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.Tc.la(u,!0)];case 1:return e=t.sent(),n=new FS(u,e._a),r=n.n_(e.documents),i=n.wn(r,!1),a.resolve(i.snapshot),[3,3];case 2:return o=t.sent(),s=uI(o,"Failed to execute query '"+u+" against cache"),a.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),a.promise)]}})})},NC.prototype.write=function(t){var e=this;this.Hu();var n=new b_;return this.Oo.Sr(function(){return e.Qc.write(t,n)}),n.promise},NC.prototype.s=function(){return this.Pd.s},NC.prototype.lf=function(t){var e=this;this.Hu(),this.Oo.Sr(function(){return e.gd.lf(t),Promise.resolve()})},NC.prototype._f=function(t){var e=this;this.yd||this.Oo.Sr(function(){return e.gd._f(t),Promise.resolve()})},Object.defineProperty(NC.prototype,"yd",{get:function(){return this.Oo.eh},enumerable:!0,configurable:!0}),NC.prototype.transaction=function(t){var e=this;this.Hu();var n=new b_;return this.Oo.Sr(function(){return e.Qc.runTransaction(e.Oo,t,n),Promise.resolve()}),n.promise},NC),SC=(CC.prototype.next=function(t){this.Sd(this.observer.next,t)},CC.prototype.error=function(t){this.Sd(this.observer.error,t)},CC.prototype.Dd=function(){this.muted=!0},CC.prototype.Sd=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},CC);function CC(t){this.observer=t,this.muted=!1}function NC(t,e,n){this.Pd=t,this.credentials=e,this.Oo=n,this.clientId=ug.t()}function AC(){return null!==cC&&cC.apply(this,arguments)||this}function kC(){}function OC(){}function RC(){var t=this;this.sd=function(){return t.nd()},this.rd=function(){return t.od()},this.hd=[],this.ad()}function PC(t){this.s=t.s;var e=t.ssl?"https":"http";this.Zf=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function DC(t){this.jf=t.jf,this.Kf=t.Kf}function xC(t){this.persistence=t,this.Bf=new SI,this.qf=null}function LC(t){var e=this;return(e=hC.call(this)||this).sr=t,e}function MC(t){var e=this;this.kf={},this.rr=new h_(0),this.or=!1,this.or=!0,this.Fi=t(this),this.Tr=new lC(this),this.mn=new C_,this.An=new GS(this.mn,function(t){return e.Fi.xf(t)})}function FC(t){this.persistence=t,this.Cf=new _g(function(t){return Zw(t)},t_),this.lastRemoteSnapshotVersion=Sg.min(),this.highestTargetId=0,this.Ff=0,this.Nf=new SI,this.targetCount=0,this.$f=J_.Di()}function UC(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var jC,VC,qC,BC,WC=(dN.prototype.Nd=function(t){switch(qm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zm(t.integerValue||t.doubleValue);case 3:return this.$d(t.timestampValue);case 4:return this.kd(t);case 5:return t.stringValue;case 6:return new $I(Ym(t.bytesValue));case 7:return this.xd(t.referenceValue);case 8:return this.Md(t.geoPointValue);case 9:return this.Ld(t.arrayValue);case 10:return this.Od(t.mapValue);default:throw ig()}},dN.prototype.Od=function(t){var n=this,r={};return gg(t.fields||{},function(t,e){r[t]=n.Nd(e)}),r},dN.prototype.Md=function(t){return new mT(zm(t.latitude),zm(t.longitude))},dN.prototype.Ld=function(t){var e=this;return(t.values||[]).map(function(t){return e.Nd(t)})},dN.prototype.kd=function(t){switch(this.Cd){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Um(n)?t(n):n}(t);return null==e?null:this.Nd(e);case"estimate":return this.$d(jm(t));default:return null}},dN.prototype.$d=function(t){var e=Km(t),n=new Tg(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},dN.prototype.xd=function(t){var e=Ng.$(t);og(Ab(e));var n=new dg(e.get(1),e.get(3)),r=new Ug(e.g(5));return n.isEqual(this.s)||ng("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.Fd(r)},dN),HC=fI.vh,GC=(pN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},pN),QC=(Object.defineProperty(fN.prototype,"Hd",{get:function(){return this.Yd||(this.Yd=new MT(this.qa,this.zd.ignoreUndefinedProperties)),this.Yd},enumerable:!0,configurable:!0}),fN.prototype.settings=function(t){OI("Firestore.settings",arguments,1),DI("Firestore.settings","object",1,t);var e=new GC(t);if(this.Qd&&!this.zd.isEqual(e))throw new Ig(Eg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.zd=e).credentials&&(this.Kd=function(t){if(!t)return new $T;switch(t.type){case"gapi":var e=t.Jd;return og(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new eS(e,t.wu||"0");case"provider":return t.Jd;default:throw new Ig(Eg.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},fN.prototype.enableNetwork=function(){return this.Ud(),this.Qd.enableNetwork()},fN.prototype.disableNetwork=function(){return this.Ud(),this.Qd.disableNetwork()},fN.prototype.enablePersistence=function(t){var e,n;if(this.Qd)throw new Ig(Eg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&ng("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Ig(Eg.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Xd(this.Gd,{Rd:!0,cacheSizeBytes:this.zd.cacheSizeBytes,synchronizeTabs:r,ir:i})},fN.prototype.clearPersistence=function(){return Ts(this,void 0,void 0,function(){var r,e=this;return Ss(this,function(t){if(void 0!==this.Qd&&!this.Qd.yd)throw new Ig(Eg.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return r=new b_,[2,(this.qd.sh(function(){return Ts(e,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this.Zd(),[4,this.Gd.clearPersistence(e)];case 1:return t.sent(),r.resolve(),[3,3];case 2:return n=t.sent(),r.reject(n),[3,3];case 3:return[2]}})})}),r.promise)]})})},fN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(fN.prototype,"tw",{get:function(){return this.Ud(),this.Qd.yd},enumerable:!0,configurable:!0}),fN.prototype.waitForPendingWrites=function(){return this.Ud(),this.Qd.waitForPendingWrites()},fN.prototype.onSnapshotsInSync=function(t){if(this.Ud(),UC(t))return this.ew(t);DI("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.ew(e)},fN.prototype.ew=function(t){var e=this,n=new SC({next:function(){t.next&&t.next()},error:function(t){throw ig()}});return this.Qd.lf(n),function(){n.Dd(),e.Qd._f(n)}},fN.prototype.Ud=function(){return this.Qd||this.Xd(new EC,{Rd:!1}),this.Qd},fN.prototype.Zd=function(){return new pg(this.qa,this.jd,this.zd.host,this.zd.ssl,this.zd.forceLongPolling)},fN.prototype.Xd=function(t,e){var n=this.Zd();return this.Qd=new TC(n,this.Kd,this.qd),this.Qd.start(t,e)},fN.Wd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Ig(Eg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Ig(Eg.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new dg(n)},Object.defineProperty(fN.prototype,"app",{get:function(){if(!this.Bd)throw new Ig(Eg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bd},enumerable:!0,configurable:!0}),fN.prototype.collection=function(t){return OI("Firestore.collection",arguments,1),DI("Firestore.collection","non-empty string",1,t),this.Ud(),new eN(Ng.$(t),this,null)},fN.prototype.doc=function(t){return OI("Firestore.doc",arguments,1),DI("Firestore.doc","non-empty string",1,t),this.Ud(),YC.sw(Ng.$(t),this,null)},fN.prototype.collectionGroup=function(t){if(OI("Firestore.collectionGroup",arguments,1),DI("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Ud(),new ZC(new Cw(Ng.k,t),this,null)},fN.prototype.runTransaction=function(e){var n=this;return OI("Firestore.runTransaction",arguments,1),DI("Firestore.runTransaction","function",1,e),this.Ud().transaction(function(t){return e(new KC(n,t))})},fN.prototype.batch=function(){return this.Ud(),new zC(this)},Object.defineProperty(fN,"logLevel",{get:function(){switch(tg()){case Ia.DEBUG:return"debug";case Ia.ERROR:return"error";case Ia.SILENT:return"silent";case Ia.WARN:return"warn";case Ia.INFO:return"info";case Ia.VERBOSE:return"verbose";default:return"error"}},enumerable:!0,configurable:!0}),fN.setLogLevel=function(t){OI("Firestore.setLogLevel",arguments,1),UI("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),Zy.setLogLevel(t)},fN.prototype.nw=function(){return this.zd.timestampsInSnapshots},fN),KC=(lN.prototype.get=function(t){var n=this;OI("Transaction.get",arguments,1);var r=mN("Transaction.get",t,this.iw);return this.rw.nc([r.Ua]).then(function(t){if(!t||1!==t.length)return ig();var e=t[0];if(e instanceof Tw)return new JC(n.iw,r.Ua,null,!1,!1,r.Qa);if(e instanceof Iw)return new JC(n.iw,r.Ua,e,!1,!1,r.Qa);throw ig()})},lN.prototype.set=function(t,e,n){PI("Transaction.set",arguments,2,3);var r=mN("Transaction.set",t,this.iw);n=vN("Transaction.set",n);var i=bN(r.Qa,e,"Transaction.set"),o=i[0],s=i[1],a=this.iw.Hd.Ja(s,o,n);return this.rw.set(r.Ua,a),this},lN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof ZI?(RI("Transaction.update",arguments,3),r=mN("Transaction.update",t,this.iw),this.iw.Hd.tu("Transaction.update",e,n,o)):(OI("Transaction.update",arguments,2),r=mN("Transaction.update",t,this.iw),this.iw.Hd.Za("Transaction.update",e)),this.rw.update(r.Ua,i),this},lN.prototype.delete=function(t){OI("Transaction.delete",arguments,1);var e=mN("Transaction.delete",t,this.iw);return this.rw.delete(e.Ua),this},lN),zC=(hN.prototype.set=function(t,e,n){PI("WriteBatch.set",arguments,2,3),this.aw();var r=mN("WriteBatch.set",t,this.iw);n=vN("WriteBatch.set",n);var i=bN(r.Qa,e,"WriteBatch.set"),o=i[0],s=i[1],a=this.iw.Hd.Ja(s,o,n);return this.ow=this.ow.concat(a.Wa(r.Ua,Qb.Qe())),this},hN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.aw(),i="string"==typeof e||e instanceof ZI?(RI("WriteBatch.update",arguments,3),r=mN("WriteBatch.update",t,this.iw),this.iw.Hd.tu("WriteBatch.update",e,n,o)):(OI("WriteBatch.update",arguments,2),r=mN("WriteBatch.update",t,this.iw),this.iw.Hd.Za("WriteBatch.update",e)),this.ow=this.ow.concat(i.Wa(r.Ua,Qb.exists(!0))),this},hN.prototype.delete=function(t){OI("WriteBatch.delete",arguments,1),this.aw();var e=mN("WriteBatch.delete",t,this.iw);return this.ow=this.ow.concat(new Jb(e.Ua,Qb.Qe())),this},hN.prototype.commit=function(){return this.aw(),this.hw=!0,0<this.ow.length?this.iw.Ud().write(this.ow):Promise.resolve()},hN.prototype.aw=function(){if(this.hw)throw new Ig(Eg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},hN),YC=(Es(cN,BC=kT),cN.sw=function(t,e,n){if(t.length%2!=0)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new cN(new Ug(t),e,n)},Object.defineProperty(cN.prototype,"id",{get:function(){return this.Ua.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(cN.prototype,"parent",{get:function(){return new eN(this.Ua.path.p(),this.firestore,this.Qa)},enumerable:!0,configurable:!0}),Object.defineProperty(cN.prototype,"path",{get:function(){return this.Ua.path.N()},enumerable:!0,configurable:!0}),cN.prototype.collection=function(t){if(OI("DocumentReference.collection",arguments,1),DI("DocumentReference.collection","non-empty string",1,t),!t)throw new Ig(Eg.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Ng.$(t);return new eN(this.Ua.path.child(e),this.firestore,null)},cN.prototype.isEqual=function(t){if(!(t instanceof cN))throw HI("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Ua.isEqual(t.Ua)&&this.Qa===t.Qa},cN.prototype.set=function(t,e){PI("DocumentReference.set",arguments,1,2),e=vN("DocumentReference.set",e);var n=bN(this.Qa,t,"DocumentReference.set"),r=n[0],i=n[1],o=this.firestore.Hd.Ja(i,r,e);return this.Qd.write(o.Wa(this.Ua,Qb.Qe()))},cN.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof ZI?(RI("DocumentReference.update",arguments,2),this.firestore.Hd.tu("DocumentReference.update",t,e,r)):(OI("DocumentReference.update",arguments,1),this.firestore.Hd.Za("DocumentReference.update",t)),this.Qd.write(n.Wa(this.Ua,Qb.exists(!0)))},cN.prototype.delete=function(){return OI("DocumentReference.delete",arguments,0),this.Qd.write([new Jb(this.Ua,Qb.Qe())])},cN.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];PI("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||UC(t[i])||(WI("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),MI("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=UC(t[i])?t[i]:(DI("DocumentReference.onSnapshot","function",i,t[i]),xI("DocumentReference.onSnapshot","function",i+1,t[i+1]),xI("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.uw(o,n)},cN.prototype.uw=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new SC({next:function(t){if(n.next){var e=t.docs.get(r.Ua);n.next(new JC(r.firestore,r.Ua,e,t.fromCache,t.hasPendingWrites,r.Qa))}},error:e}),o=this.Qd.listen(Cw.As(this.Ua.path),i,t);return function(){i.Dd(),r.Qd.qc(o)}},cN.prototype.get=function(n){var r=this;return PI("DocumentReference.get",arguments,0,1),gN("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.Ud().bd(r.Ua).then(function(t){e(new JC(r.firestore,r.Ua,t,!0,t instanceof Iw&&t.Xe,r.Qa))},t):r.cw(e,t,n)})},cN.prototype.cw=function(e,n,r){var i=this.uw({includeMetadataChanges:!0,Af:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new Ig(Eg.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new Ig(Eg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},cN.prototype.withConverter=function(t){return new cN(this.Ua,this.firestore,t)},cN),XC=(uN.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},uN),JC=(aN.prototype.data=function(t){var e=this;if(PI("DocumentSnapshot.data",arguments,0,1),t=yN("DocumentSnapshot.data",t),this.lw){if(this.Qa){var n=new $C(this.iw,this.Ua,this.lw,this._w,this.fw,null);return this.Qa.fromFirestore(n,t)}return new WC(this.iw.qa,this.iw.nw(),t.serverTimestamps||"none",function(t){return new YC(t,e.iw,null)}).Nd(this.lw.fs())}},aN.prototype.get=function(t,e){var n=this;if(PI("DocumentSnapshot.get",arguments,1,2),e=yN("DocumentSnapshot.get",e),this.lw){var r=this.lw.data().field(WT("DocumentSnapshot.get",t));if(null!==r)return new WC(this.iw.qa,this.iw.nw(),e.serverTimestamps||"none",function(t){return new YC(t,n.iw,n.Qa)}).Nd(r)}},Object.defineProperty(aN.prototype,"id",{get:function(){return this.Ua.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(aN.prototype,"ref",{get:function(){return new YC(this.Ua,this.iw,this.Qa)},enumerable:!0,configurable:!0}),Object.defineProperty(aN.prototype,"exists",{get:function(){return null!==this.lw},enumerable:!0,configurable:!0}),Object.defineProperty(aN.prototype,"metadata",{get:function(){return new XC(this.fw,this._w)},enumerable:!0,configurable:!0}),aN.prototype.isEqual=function(t){if(!(t instanceof aN))throw HI("isEqual","DocumentSnapshot",1,t);return this.iw===t.iw&&this._w===t._w&&this.Ua.isEqual(t.Ua)&&(null===this.lw?null===t.lw:this.lw.isEqual(t.lw))&&this.Qa===t.Qa},aN),$C=(Es(sN,qC=JC),sN.prototype.data=function(t){return qC.prototype.data.call(this,t)},sN),ZC=(oN.prototype.ww=function(t,e,n){var r;if(t.L()){if("array-contains"===e||"array-contains-any"===e)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Tw(n,e);for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(this.Ew(a))}r={arrayValue:{values:i}}}else r=this.Ew(n)}else"in"!==e&&"array-contains-any"!==e||this.Tw(n,e),r=this.Hd.eu("Query.where",n,"in"===e);var u=Nw.create(t,e,r);return this.Iw(u),u},oN.prototype.Aw=function(t,e){if(null!==this.dw.startAt)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.dw.endAt)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new zw(t,e);return this.Rw(n),n},oN.prototype.mw=function(t,e,n){if(!e)throw new Ig(Eg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.dw.orderBy;i<o.length;i++){var s=o[i];if(s.field.L())r.push(Xm(this.qa,e.key));else{var a=e.field(s.field);if(Um(a))throw new Ig(Eg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.N();throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Dw(r,n)},oN.prototype.Pw=function(t,e,n){var r=this.dw.ds;if(e.length>r.length)throw new Ig(Eg.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.L()){if("string"!=typeof s)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.dw.Bs()&&-1!==s.indexOf("/"))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.dw.path.child(Ng.$(s));if(!Ug.W(a))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new Ug(a);i.push(Xm(this.qa,u))}else{var c=this.Hd.eu(t,s);i.push(c)}}return new Dw(i,n)},oN.prototype.Vw=function(t){if(t.xs()&&0===t.ds.length)throw new Ig(Eg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},oN.prototype.Ew=function(t){if("string"==typeof t){if(""===t)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.dw.Bs()&&-1!==t.indexOf("/"))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.dw.path.child(Ng.$(t));if(!Ug.W(e))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Xm(this.qa,new Ug(e))}if(t instanceof kT)return Xm(this.qa,t.Ua);throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+qI(t)+".")},oN.prototype.Tw=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},oN.prototype.Iw=function(t){if(t instanceof Nw){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.Ms()){var o=this.dw.Rs();if(null!==o&&!o.isEqual(t.field))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.dw.ms();null!==s&&this.gw(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.dw.Ls(n)),null===a&&r&&(a=this.dw.Ls(e)),null!=a)throw a===t.op?new Ig(Eg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Ig(Eg.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},oN.prototype.Rw=function(t){if(null===this.dw.ms()){var e=this.dw.Rs();null!==e&&this.gw(e,t.field)}},oN.prototype.gw=function(t,e){if(!e.isEqual(t))throw new Ig(Eg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},Es(iN,VC=oN),iN.prototype.where=function(t,e,n){OI("Query.where",arguments,3),BI("Query.where",3,n);var r=UI("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e),i=WT("Query.where",t),o=this.ww(i,r,n);return new iN(this.dw.Ps(o),this.firestore,this.Qa)},iN.prototype.orderBy=function(t,e){var n;if(PI("Query.orderBy",arguments,1,2),xI("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new Ig(Eg.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r=WT("Query.orderBy",t),i=this.Aw(r,n);return new iN(this.dw.Vs(i),this.firestore,this.Qa)},iN.prototype.limit=function(t){return OI("Query.limit",arguments,1),DI("Query.limit","number",1,t),GI("Query.limit",1,t),new iN(this.dw.gs(t),this.firestore,this.Qa)},iN.prototype.limitToLast=function(t){return OI("Query.limitToLast",arguments,1),DI("Query.limitToLast","number",1,t),GI("Query.limitToLast",1,t),new iN(this.dw.ps(t),this.firestore,this.Qa)},iN.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];RI("Query.startAt",arguments,1);var r=this.pw("Query.startAt",t,e,!0);return new iN(this.dw.ys(r),this.firestore,this.Qa)},iN.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];RI("Query.startAfter",arguments,1);var r=this.pw("Query.startAfter",t,e,!1);return new iN(this.dw.ys(r),this.firestore,this.Qa)},iN.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];RI("Query.endBefore",arguments,1);var r=this.pw("Query.endBefore",t,e,!0);return new iN(this.dw.bs(r),this.firestore,this.Qa)},iN.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];RI("Query.endAt",arguments,1);var r=this.pw("Query.endAt",t,e,!1);return new iN(this.dw.bs(r),this.firestore,this.Qa)},iN.prototype.isEqual=function(t){if(!(t instanceof iN))throw HI("isEqual","Query",1,t);return this.firestore===t.firestore&&this.dw.isEqual(t.dw)&&this.Qa===t.Qa},iN.prototype.withConverter=function(t){return new iN(this.dw,this.firestore,t)},iN.prototype.pw=function(t,e,n,r){if(BI(t,1,e),e instanceof JC)return OI(t,ks([e],n),1),this.mw(t,e.lw,r);var i=[e].concat(n);return this.Pw(t,i,r)},iN.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];PI("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||UC(t[i])||(WI("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),MI("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=UC(t[i])?t[i]:(DI("Query.onSnapshot","function",i,t[i]),xI("Query.onSnapshot","function",i+1,t[i+1]),xI("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Vw(this.dw),this.uw(r,n)},iN.prototype.uw=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new SC({next:function(t){e.next&&e.next(new tN(n.firestore,n.dw,t,n.Qa))},error:r}),o=this.firestore.Ud(),s=o.listen(this.dw,i,t);return function(){i.Dd(),o.qc(s)}},iN.prototype.get=function(n){var r=this;return PI("Query.get",arguments,0,1),gN("Query.get",n),this.Vw(this.dw),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.Ud().vd(r.dw).then(function(t){e(new tN(r.firestore,r.dw,t,r.Qa))},t):r.cw(e,t,n)})},iN.prototype.cw=function(e,n,r){var i=this.uw({includeMetadataChanges:!0,Af:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new Ig(Eg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},iN),tN=(Object.defineProperty(rN.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(rN.prototype,"empty",{get:function(){return this.bw.docs._()},enumerable:!0,configurable:!0}),Object.defineProperty(rN.prototype,"size",{get:function(){return this.bw.docs.size},enumerable:!0,configurable:!0}),rN.prototype.forEach=function(e,n){var r=this;PI("QuerySnapshot.forEach",arguments,1,2),DI("QuerySnapshot.forEach","function",1,e),this.bw.docs.forEach(function(t){e.call(n,r.Dw(t))})},Object.defineProperty(rN.prototype,"query",{get:function(){return new ZC(this.yw,this.iw,this.Qa)},enumerable:!0,configurable:!0}),rN.prototype.docChanges=function(t){t&&(WI("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),MI("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.bw.qt)throw new Ig(Eg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.vw&&this.Sw===e||(this.vw=function(i,e,o,s){if(o.Lt._()){var n=0;return o.docChanges.map(function(t){var e=new $C(i,t.doc.key,t.doc,o.fromCache,o.Ot.has(t.doc.key),s);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var a=o.Lt;return o.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new $C(i,t.doc.key,t.doc,o.fromCache,o.Ot.has(t.doc.key),s),n=-1,r=-1;return 0!==t.type&&(n=a.indexOf(t.doc.key),a=a.delete(t.doc.key)),1!==t.type&&(r=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ig()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.iw,e,this.bw,this.Qa),this.Sw=e),this.vw},rN.prototype.isEqual=function(t){if(!(t instanceof rN))throw HI("isEqual","QuerySnapshot",1,t);return this.iw===t.iw&&this.yw.isEqual(t.yw)&&this.bw.isEqual(t.bw)&&this.Qa===t.Qa},rN.prototype.Dw=function(t){return new $C(this.iw,t.key,t,this.metadata.fromCache,this.bw.Ot.has(t.key),this.Qa)},rN),eN=(Es(nN,jC=ZC),Object.defineProperty(nN.prototype,"id",{get:function(){return this.dw.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(nN.prototype,"parent",{get:function(){var t=this.dw.path.p();return t._()?null:new YC(new Ug(t),this.firestore,null)},enumerable:!0,configurable:!0}),Object.defineProperty(nN.prototype,"path",{get:function(){return this.dw.path.N()},enumerable:!0,configurable:!0}),nN.prototype.doc=function(t){PI("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=ug.t()),DI("CollectionReference.doc","non-empty string",1,t);var e=Ng.$(t);return YC.sw(this.dw.path.child(e),this.firestore,this.Qa)},nN.prototype.add=function(t){OI("CollectionReference.add",arguments,1),DI("CollectionReference.add","object",1,this.Qa?this.Qa.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},nN.prototype.withConverter=function(t){return new nN(this.Cw,this.firestore,t)},nN);function nN(t,e,n){var r=this;if(((r=jC.call(this,Cw.As(t),e,n)||this).Cw=t).length%2!=1)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.N()+" has "+t.length);return r}function rN(t,e,n,r){this.iw=t,this.yw=e,this.bw=n,this.Qa=r,this.vw=null,this.Sw=null,this.metadata=new XC(n.hasPendingWrites,n.fromCache)}function iN(t,e,n){var r=this;return(r=VC.call(this,e.qa,e.Hd,t)||this).dw=t,r.firestore=e,r.Qa=n,r}function oN(t,e,n){this.qa=t,this.Hd=e,this.dw=n}function sN(){return null!==qC&&qC.apply(this,arguments)||this}function aN(t,e,n,r,i,o){this.iw=t,this.Ua=e,this.lw=n,this._w=r,this.fw=i,this.Qa=o}function uN(t,e){this.hasPendingWrites=t,this.fromCache=e}function cN(t,e,n){var r=this;return(r=BC.call(this,e.qa,t,n)||this).Ua=t,r.firestore=e,r.Qa=n,r.Qd=r.firestore.Ud(),r}function hN(t){this.iw=t,this.ow=[],this.hw=!1}function lN(t,e){this.iw=t,this.rw=e}function fN(t,e,n){var r=this;if(void 0===n&&(n=new EC),this.Bd=null,this.qd=new oI,this.INTERNAL={delete:function(){return Ts(r,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Ud(),[4,this.Qd.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var i=t;this.Bd=i,this.qa=fN.Wd(i),this.jd=i.name,this.Kd=new ZT(e)}else{var o=t;if(!o.projectId)throw new Ig(Eg.INVALID_ARGUMENT,"Must provide projectId");this.qa=new dg(o.projectId,o.database),this.jd="[DEFAULT]",this.Kd=new $T}this.Gd=n,this.zd=new GC({})}function pN(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ig(Eg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else LI("settings","non-empty string","host",t.host),this.host=t.host,MI("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(WI("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),MI("settings","object","credentials",t.credentials),this.credentials=t.credentials,MI("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),MI("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?ng("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&ng("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,MI("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=fI.Dh;else{if(t.cacheSizeBytes!==HC&&t.cacheSizeBytes<fI.Sh)throw new Ig(Eg.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+fI.Sh);this.cacheSizeBytes=t.cacheSizeBytes}MI("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function dN(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Cd=n,this.Fd=r}function vN(t,e){if(void 0===e)return{merge:!1};if(WI(t,e,["merge","mergeFields"]),MI(t,"boolean","merge",e.merge),n=t,void 0!==(r=e.mergeFields)&&function(t,e,n,r){if(!(n instanceof Array))throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+qI(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new Ig(Eg.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+qI(n[i]))}(n,"mergeFields",r,function(t){return"string"==typeof t||t instanceof ZI}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Ig(Eg.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n,r;return e}function yN(t,e){return void 0===e?{}:(WI(t,e,["serverTimestamps"]),FI(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function gN(t,e){xI(t,"object",1,e),e&&(WI(t,e,["source"]),FI(t,0,"source",e.source,["default","server","cache"]))}function mN(t,e,n){if(e instanceof kT){if(e.firestore!==n)throw new Ig(Eg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw HI(t,"DocumentReference",1,e)}function bN(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var wN=["length","name"];function _N(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Ig(Eg.INVALID_ARGUMENT,t)}for(var r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r];-1===wN.indexOf(o)&&(n[o]=t[o])}return n}var EN,IN=_N(QC,"Use firebase.firestore() instead."),TN=_N(KC,"Use firebase.firestore().runTransaction() instead."),SN=_N(zC,"Use firebase.firestore().batch() instead."),CN=_N(YC,"Use firebase.firestore().doc() instead."),NN=_N(JC),AN=_N($C),kN=_N(ZC),ON=_N(tN),RN=_N(eN,"Use firebase.firestore().collection() instead."),PN=_N(yT,"Use FieldValue.<field>() instead."),DN=_N($I,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),xN={Firestore:IN,GeoPoint:mT,Timestamp:Tg,Blob:DN,Transaction:TN,WriteBatch:SN,DocumentReference:CN,DocumentSnapshot:NN,Query:kN,QueryDocumentSnapshot:AN,QuerySnapshot:ON,CollectionReference:RN,FieldPath:ZI,FieldValue:PN,setLogLevel:QC.setLogLevel,CACHE_SIZE_UNLIMITED:HC};(EN=Kl).INTERNAL.registerComponent(new da("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new QC(e,n,new IC);var e,n},"PUBLIC").setServiceProps(Object.assign({},xN))),EN.registerVersion("@firebase/firestore","1.15.5");var LN,MN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},FN=(Es(UN,LN=Error),UN);function UN(t,e,n){var r=LN.call(this,e)||this;return Object.setPrototypeOf(r,UN.prototype),r.code=t,r.details=n,r}function jN(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!MN[a])return new FN("internal","internal");r=MN[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new FN(r,i,o)}var VN=(qN.prototype.getAuthToken=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},qN.prototype.getInstanceIdToken=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},qN.prototype.getContext=function(){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},qN);function qN(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function BN(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var WN=(HN.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return BN(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},HN.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?BN(t,function(t){return e.decode(t)}):t},HN);function HN(){}var GN=(Object.defineProperty(QN.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),QN.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},QN.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},QN.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},QN.prototype.postJSON=function(r,i,o){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},QN.prototype.call=function(h,l,f){return Ts(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c;return Ss(this,function(t){switch(t.label){case 0:return e=this._url(h),l=this.serializer.encode(l),r={data:l},i=new Headers,[4,this.contextProvider.getContext()];case 1:return(o=t.sent()).authToken&&i.append("Authorization","Bearer "+o.authToken),o.instanceIdToken&&i.append("Firebase-Instance-ID-Token",o.instanceIdToken),s=f.timeout||7e4,[4,Promise.race([this.postJSON(e,r,i),(n=s,new Promise(function(t,e){setTimeout(function(){e(new FN("deadline-exceeded","deadline-exceeded"))},n)})),this.cancelAllRequests])];case 2:if(!(a=t.sent()))throw new FN("cancelled","Firebase Functions instance was deleted.");if(u=jN(a.status,a.json,this.serializer))throw u;if(!a.json)throw new FN("internal","Response is not valid JSON object.");if(void 0===(c=a.json.data)&&(c=a.json.result),void 0===c)throw new FN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(c)}]}var n})})},QN);function QN(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new WN,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new VN(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function KN(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new GN(n,r,i,e)}var zN;function YN(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function XN(n,r,i){var o,t=new Promise(function(t,e){YN(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function JN(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function $N(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return XN(this[n],t,arguments)})})}function ZN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function tA(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=XN(t,n,arguments)).then(function(t){if(t)return new nA(t,e.request)});var t,e})})}function eA(t){this._index=t}function nA(t,e){this._cursor=t,this._request=e}function rA(t){this._store=t}function iA(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function oA(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new iA(n)}function sA(t){this._db=t}function aA(t,e,n){var r=XN(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new oA(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new sA(t)})}function uA(t){return XN(indexedDB,"deleteDatabase",[t])}zN={Functions:GN},Kl.INTERNAL.registerComponent(new da("functions",KN,"PUBLIC").setServiceProps(zN).setMultipleInstances(!0)),Kl.registerVersion("@firebase/functions","0.4.47"),JN(eA,"_index",["name","keyPath","multiEntry","unique"]),$N(eA,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),tA(eA,"_index",IDBIndex,["openCursor","openKeyCursor"]),JN(nA,"_cursor",["direction","key","primaryKey","value"]),$N(nA,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(nA.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),YN(e._request).then(function(t){if(t)return new nA(t,e._request)})})})}),rA.prototype.createIndex=function(){return new eA(this._store.createIndex.apply(this._store,arguments))},rA.prototype.index=function(){return new eA(this._store.index.apply(this._store,arguments))},JN(rA,"_store",["name","keyPath","indexNames","autoIncrement"]),$N(rA,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),tA(rA,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ZN(rA,"_store",IDBObjectStore,["deleteIndex"]),iA.prototype.objectStore=function(){return new rA(this._tx.objectStore.apply(this._tx,arguments))},JN(iA,"_tx",["objectStoreNames","mode"]),ZN(iA,"_tx",IDBTransaction,["abort"]),oA.prototype.createObjectStore=function(){return new rA(this._db.createObjectStore.apply(this._db,arguments))},JN(oA,"_db",["name","version","objectStoreNames"]),ZN(oA,"_db",IDBDatabase,["deleteObjectStore","close"]),sA.prototype.transaction=function(){return new iA(this._db.transaction.apply(this._db,arguments))},JN(sA,"_db",["name","version","objectStoreNames"]),ZN(sA,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[rA,eA].forEach(function(t){o in t.prototype&&(t.prototype[o.replace("open","iterate")]=function(){var t,e=(t=arguments,Array.prototype.slice.call(t)),n=e[e.length-1],r=this._store||this._index,i=r[o].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[eA,rA].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var cA,hA=1e4,lA="w:0.4.13",fA="FIS_v2",pA="https://firebaseinstallations.googleapis.com/v1",dA=36e5,vA=((cA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',cA["not-registered"]="Firebase Installation is not registered.",cA["installation-not-found"]="Firebase Installation not found.",cA["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',cA["app-offline"]="Could not process request. Application offline.",cA["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",cA),yA=new Ks("installations","Installations",vA);function gA(t){return t instanceof Gs&&t.code.includes("request-failed")}function mA(t){var e=t.projectId;return pA+"/projects/"+e+"/installations"}function bA(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function wA(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,yA.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function _A(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function EA(t,e){var n=e.refreshToken,r=_A(t);return r.append("Authorization",fA+" "+n),r}function IA(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function TA(e){return new Promise(function(t){setTimeout(t,e)})}var SA=/^[cdef][\w-]{21}$/,CA="";function NA(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,As(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return SA.test(e)?e:CA}catch(t){return CA}}function AA(t){return t.appName+"!"+t.appId}var kA=new Map;function OA(t,e){var n=AA(t);RA(n,e),function(t,e){var n=DA();n&&n.postMessage({key:t,fid:e});xA()}(n,e)}function RA(t,e){var n,r,i=kA.get(t);if(i)try{for(var o=Cs(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var PA=null;function DA(){return!PA&&"BroadcastChannel"in self&&((PA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){RA(t.data.key,t.data.fid)}),PA}function xA(){0===kA.size&&PA&&(PA.close(),PA=null)}var LA,MA,FA="firebase-installations-database",UA=1,jA="firebase-installations-store",VA=null;function qA(){return VA=VA||aA(FA,UA,function(t){switch(t.oldVersion){case 0:t.createObjectStore(jA)}})}function BA(s,a){return Ts(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return e=AA(s),[4,qA()];case 1:return n=t.sent(),r=n.transaction(jA,"readwrite"),[4,(i=r.objectStore(jA)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||OA(s,a.fid),[2,a]}})})}function WA(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=AA(i),[4,qA()];case 1:return n=t.sent(),[4,(r=n.transaction(jA,"readwrite")).objectStore(jA).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function HA(a,u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=AA(a),[4,qA()];case 1:return n=t.sent(),r=n.transaction(jA,"readwrite"),[4,(i=r.objectStore(jA)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||OA(a,s.fid),[2,s]}})})}function GA(i){return Ts(this,void 0,void 0,function(){var r,e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,HA(i,function(t){var e=KA(t||{fid:NA(),registrationStatus:0}),n=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return[4,QA(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,TA(100)];case 3:return t.sent(),[4,QA(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,GA(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(yA.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a,t){var u=t.fid;return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=mA(a),n=_A(a),r={fid:u,authVersion:fA,appId:a.appId,sdkVersion:lA},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,IA(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return s=t.sent(),[2,{fid:s.fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:bA(s.authToken)}];case 3:return[4,wA("Create Installation",o)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,BA(r,e)];case 2:return gA(n=t.sent())&&409===n.serverCode?[4,WA(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,BA(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,r);return{installationEntry:r,registrationPromise:i}}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==CA?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function QA(t){return HA(t,function(t){if(!t)throw yA.create("installation-not-found");return KA(t)})}function KA(t){return 1===(e=t).registrationStatus&&e.registrationTime+hA<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function zA(t,h){var l=t.appConfig,f=t.platformLoggerProvider;return Ts(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return Ss(this,function(t){switch(t.label){case 0:return e=l,n=h.fid,r=mA(e)+"/"+n+"/authTokens:generate",i=EA(l,h),(o=f.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:lA}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,IA(function(){return fetch(r,a)})];case 1:return(u=t.sent()).ok?[4,u.json()]:[3,3];case 2:return c=t.sent(),[2,bA(c)];case 3:return[4,wA("Generate Auth Token",u)];case 4:throw t.sent()}var e,n})})}function YA(a,u){return void 0===u&&(u=!1),Ts(this,void 0,void 0,function(){var s,e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,HA(a.appConfig,function(t){if(!JA(t))throw yA.create("not-registered");var e,n,r,i=t.authToken;if(u||2!==(r=i).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+dA}(r)){if(1===i.requestStatus)return s=function(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,XA(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,TA(100)];case 3:return t.sent(),[4,XA(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,YA(r,i)]:[2,n]}})})}(a,u),t;if(!navigator.onLine)throw yA.create("app-offline");var o=(e=t,n={requestStatus:1,requestTime:Date.now()},Is(Is({},e),{authToken:n}));return s=function(i,o){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,zA(i,o)];case 1:return e=t.sent(),r=Is(Is({},o),{authToken:e}),[4,BA(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!gA(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,WA(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Is(Is({},o),{authToken:{requestStatus:0}}),[4,BA(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(a,o),o}return t})];case 1:return e=t.sent(),s?[4,s]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function XA(t){return HA(t,function(t){if(!JA(t))throw yA.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+hA<Date.now()?Is(Is({},t),{authToken:{requestStatus:0}}):t})}function JA(t){return void 0!==t&&2===t.registrationStatus}function $A(e,n){return void 0===n&&(n=!1),Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,GA(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,YA(e,n)];case 2:return[2,t.sent().token]}})})}function ZA(a,u){return Ts(this,void 0,void 0,function(){var r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=a,n=u.fid,r=mA(e)+"/"+n,i=EA(a,u),o={method:"DELETE",headers:i},[4,IA(function(){return fetch(r,o)})];case 1:return(s=t.sent()).ok?[3,3]:[4,wA("Delete Installation",s)];case 2:throw t.sent();case 3:return[2]}var e,n})})}function tk(t,r){var i=t.appConfig;return function(t,e){DA();var n=AA(t),r=kA.get(n);r||(r=new Set,kA.set(n,r)),r.add(e)}(i,r),function(){var t,e,n;t=r,e=AA(i),(n=kA.get(e))&&(n.delete(t),0===n.size&&kA.delete(e),xA())}}function ek(t){return yA.create("missing-app-config-values",{valueName:t})}(LA=Kl).INTERNAL.registerComponent(new da("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw ek("App Configuration");if(!t.name)throw ek("App Name");try{for(var r=Cs(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw ek(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,GA(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):YA(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return $A(n,t)},delete:function(){return function(r){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,HA(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw yA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw yA.create("app-offline");case 3:return[4,ZA(e,n)];case 4:return t.sent(),[4,WA(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return tk(n,t)}}},"PUBLIC")),LA.registerVersion("@firebase/installations","0.4.13");var nk=((MA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',MA["only-available-in-window"]="This method is available in a Window context.",MA["only-available-in-sw"]="This method is available in a service worker context.",MA["permission-default"]="The notification permission was not granted and dismissed instead.",MA["permission-blocked"]="The notification permission was not granted and blocked instead.",MA["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",MA["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",MA["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",MA["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",MA["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",MA["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",MA["token-update-no-token"]="FCM returned no token when updating the user to push.",MA["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",MA["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",MA["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",MA["invalid-vapid-key"]="The public VAPID key must be a string.",MA["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",MA),rk=new Ks("messaging","Messaging",nk);function ik(t){return rk.create("missing-app-config-values",{valueName:t})}function ok(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,As(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var sk="fcm_token_details_db",ak=5,uk="fcm_token_object_Store";function ck(a){return Ts(this,void 0,void 0,function(){var e,s,n=this;return Ss(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(sk))return[2,null];t.label=2;case 2:return s=null,[4,aA(sk,ak,function(o){return Ts(n,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(uk)?[4,(e=o.transaction.objectStore(uk)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:ok(r.vapidKey)}}}else(3===o.oldVersion||4===o.oldVersion)&&(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:ok(r.auth),p256dh:ok(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:ok(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,uA(sk)];case 4:return t.sent(),[4,uA("fcm_vapid_details_db")];case 5:return t.sent(),[4,uA("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(s)?s:null]}})})}var hk="firebase-messaging-database",lk=1,fk="firebase-messaging-store",pk=null;function dk(){return pk=pk||aA(hk,lk,function(t){switch(t.oldVersion){case 0:t.createObjectStore(fk)}})}function vk(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=gk(i),[4,dk()];case 1:return[4,t.sent().transaction(fk).objectStore(fk).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,ck(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,yk(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function yk(i,o){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=gk(i),[4,dk()];case 1:return n=t.sent(),[4,(r=n.transaction(fk,"readwrite")).objectStore(fk).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function gk(t){return t.appConfig.appId}var mk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bk="https://fcmregistrations.googleapis.com/v1",wk="FCM_MSG",_k="google.c.a.c_id";function Ek(s,a){return Ts(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return[4,Tk(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Ik(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,rk.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),rk.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function Ik(t){var e=t.projectId;return bk+"/projects/"+e+"/registrations"}function Tk(t){var n=t.appConfig,r=t.installations;return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function Sk(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==mk&&(o.web.applicationPubKey=i),o}var Ck,Nk;function Ak(l,f,p){return Ts(this,void 0,void 0,function(){var a,u,c,h;return Ss(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw rk.create("permission-blocked");return[4,function(n,r){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(r)})]}})})}(f,p)];case 1:return a=t.sent(),[4,vk(l)];case 2:return u=t.sent(),c={vapidKey:p,swScope:f.scope,endpoint:a.endpoint,auth:ok(a.getKey("auth")),p256dh:ok(a.getKey("p256dh"))},u?[3,3]:[2,Ok(l,c)];case 3:if(e=u.subscriptionOptions,r=(n=c).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,s=n.p256dh===e.p256dh,r&&i&&o&&s)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,Ek(l,u.token)];case 5:return t.sent(),[3,7];case 6:return h=t.sent(),console.warn(h),[3,7];case 7:return[2,Ok(l,c)];case 8:return Date.now()>=u.createTime+6048e5?[2,function(i,o,s){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,Tk(a)];case 1:e=t.sent(),n=Sk(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Ik(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),rk.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,rk.create("token-update-failed",{errorInfo:s});if(!i.token)throw rk.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=Is({token:e,createTime:Date.now()},i),[4,yk(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,kk(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:u.token,createTime:Date.now(),subscriptionOptions:c},l,f)]:[2,u.token];case 9:return[2]}var e,n,r,i,o,s})})}function kk(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,vk(r)];case 1:return(e=t.sent())?[4,Ek(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=gk(i),[4,dk()];case 1:return n=t.sent(),[4,(r=n.transaction(fk,"readwrite")).objectStore(fk).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function Ok(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,function(a,u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,Tk(a)];case 1:e=t.sent(),n=Sk(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Ik(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),rk.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,rk.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw rk.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,yk(r,n)];case 2:return t.sent(),[2,n.token]}})})}function Rk(t){return"object"==typeof t&&t&&_k in t}(Nk=Ck=Ck||{}).PUSH_RECEIVED="push-received",Nk.NOTIFICATION_CLICKED="notification-clicked";var Pk=(Object.defineProperty(Dk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),Dk.prototype.getToken=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=mk),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if("granted"!==Notification.permission)throw rk.create("permission-blocked");return[2,Ak(this.firebaseDependencies,e,this.vapidKey)]}})})},Dk.prototype.deleteToken=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,kk(this.firebaseDependencies,e)]}})})},Dk.prototype.requestPermission=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?rk.create("permission-blocked"):rk.create("permission-default")}})})},Dk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw rk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw rk.create("invalid-vapid-key");this.vapidKey=t},Dk.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw rk.create("invalid-sw-registration");if(this.swRegistration)throw rk.create("use-sw-after-get-token");this.swRegistration=t},Dk.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},Dk.prototype.setBackgroundMessageHandler=function(){throw rk.create("only-available-in-sw")},Dk.prototype.onTokenRefresh=function(){return function(){}},Dk.prototype.getServiceWorkerRegistration=function(){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:if(this.swRegistration)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=t.sent(),rk.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},Dk.prototype.messageEventListener=function(o){var s;return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return null!==(s=o.data)&&void 0!==s&&s.firebaseMessaging?(e=o.data.firebaseMessaging,n=e.type,r=e.payload,this.onMessageCallback&&n===Ck.PUSH_RECEIVED&&this.onMessageCallback(r),Rk(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Dk.prototype.logEvent=function(n,r){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case Ck.NOTIFICATION_CLICKED:return"notification_open";case Ck.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[_k],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},Dk);function Dk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}var xk=(Object.defineProperty(Lk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),Lk.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw rk.create("invalid-bg-handler");this.bgMessageHandler=t},Lk.prototype.getToken=function(){var n,r;return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,vk(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:mk,t.label=2;case 2:return[2,Ak(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},Lk.prototype.deleteToken=function(){return kk(this.firebaseDependencies,self.registration)},Lk.prototype.requestPermission=function(){throw rk.create("only-available-in-window")},Lk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw rk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw rk.create("invalid-vapid-key");this.vapidKey=t},Lk.prototype.useServiceWorker=function(){throw rk.create("only-available-in-window")},Lk.prototype.onMessage=function(){throw rk.create("only-available-in-window")},Lk.prototype.onTokenRefresh=function(){throw rk.create("only-available-in-window")},Lk.prototype.onPush=function(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(i))?[4,Mk()]:[2];case 1:return(n=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r,i=Fk(Ck.PUSH_RECEIVED,e);try{for(var o=Cs(t),s=o.next();!s.done;s=o.next())s.value.postMessage(i)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(n,e)]:(r=function(t){var e;if(t&&"object"==typeof t.notification){var n=Is({},t.notification);return n.data=Is(Is({},t.notification.data),((e={})[wk]=t,e)),n}}(e))?[4,function(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}(r)]:[3,3];case 2:return t.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2]}})})},Lk.prototype.onSubChange=function(n){var r,i;return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,kk(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,vk(this.firebaseDependencies)];case 3:return e=t.sent(),[4,kk(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,Ak(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:mk)];case 5:return t.sent(),[2]}})})},Lk.prototype.onNotificationClick=function(s){var a,u;return Ts(this,void 0,void 0,function(){var n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return!(n=null===(u=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===u?void 0:u[wk])||s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(r=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(Rk(t.data)?self.location.origin:null)}(n))?[4,function(u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Ss(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href),[4,Mk()];case 1:n=t.sent();try{for(r=Cs(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).host===e.host)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]:[2]);case 1:return(i=t.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return i=t.sent(),[4,(e=3e3,new Promise(function(t){setTimeout(t,e)}))];case 3:return t.sent(),[3,6];case 4:return[4,i.focus()];case 5:i=t.sent(),t.label=6;case 6:return i?(o=Fk(Ck.NOTIFICATION_CLICKED,n),[2,i.postMessage(o)]):[2]}var e})})},Lk);function Lk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function Mk(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Fk(t,e){return{firebaseMessaging:{type:t,payload:e}}}var Uk={isSupported:jk};function jk(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Kl.INTERNAL.registerComponent(new da("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw ik("App Configuration Object");if(!t.name)throw ik("App Name");var r=t.options;try{for(var i=Cs(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw ik(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!jk())throw rk.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?xk:Pk)(n)},"PUBLIC").setServiceProps(Uk));var Vk="firebasestorage.googleapis.com",qk=(Bk.prototype.codeProp=function(){return this.code},Bk.prototype.codeEquals=function(t){return Hk(t)===this.codeProp()},Bk.prototype.serverResponseProp=function(){return this.serverResponse_},Bk.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(Bk.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Bk.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(Bk.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(Bk.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),Bk);function Bk(t,e){this.code_=Hk(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var Wk={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function Hk(t){return"storage/"+t}function Gk(){return new qk(Wk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Qk(){return new qk(Wk.CANCELED,"User canceled the upload/download.")}function Kk(){return new qk(Wk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zk(t,e,n){return new qk(Wk.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function Yk(){return new qk(Wk.APP_DELETED,"The Firebase app was deleted.")}function Xk(t,e){return new qk(Wk.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Jk(t){throw new qk(Wk.INTERNAL_ERROR,"Internal error: "+t)}var $k={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Zk(t){switch(t){case $k.RAW:case $k.BASE64:case $k.BASE64URL:case $k.DATA_URL:return;default:throw"Expected one of the event types: ["+$k.RAW+", "+$k.BASE64+", "+$k.BASE64URL+", "+$k.DATA_URL+"]."}}var tO=function(t,e){this.data=t,this.contentType=e||null};function eO(t,e){switch(t){case $k.RAW:return new tO(nO(e));case $k.BASE64:case $k.BASE64URL:return new tO(rO(t,e));case $k.DATA_URL:return new tO((n=new iO(e)).base64?rO($k.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Xk($k.DATA_URL,"Malformed data URL.")}return nO(e)}(n.rest),new iO(e).contentType)}var n;throw Gk()}function nO(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function rO(e,t){switch(e){case $k.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Xk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case $k.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw Xk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw Xk(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var iO=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Xk($k.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};var oO,sO,aO={STATE_CHANGED:"state_changed"},uO="running",cO="pausing",hO="paused",lO="success",fO="canceling",pO="canceled",dO="error",vO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yO(t){switch(t){case uO:case cO:case fO:return vO.RUNNING;case hO:return vO.PAUSED;case lO:return vO.SUCCESS;case pO:return vO.CANCELED;case dO:default:return vO.ERROR}}function gO(t){return null!=t}function mO(t){return void 0!==t}function bO(t){return"function"==typeof t}function wO(t){return"object"==typeof t}function _O(t){return"string"==typeof t||t instanceof String}function EO(t){return"number"==typeof t||t instanceof Number}function IO(t){return TO()&&t instanceof Blob}function TO(){return"undefined"!=typeof Blob}(sO=oO=oO||{})[sO.NO_ERROR=0]="NO_ERROR",sO[sO.NETWORK_ERROR=1]="NETWORK_ERROR",sO[sO.ABORT=2]="ABORT";var SO=(CO.prototype.send=function(t,e,n,r){if(this.sent_)throw Jk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),gO(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return gO(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},CO.prototype.getErrorCode=function(){if(!this.sent_)throw Jk("cannot .getErrorCode() before sending");return this.errorCode_},CO.prototype.getStatus=function(){if(!this.sent_)throw Jk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},CO.prototype.getResponseText=function(){if(!this.sent_)throw Jk("cannot .getResponseText() before sending");return this.xhr_.responseText},CO.prototype.abort=function(){this.xhr_.abort()},CO.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},CO.prototype.addUploadProgressListener=function(t){gO(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},CO.prototype.removeUploadProgressListener=function(t){gO(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},CO);function CO(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=oO.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=oO.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=oO.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var NO=(AO.prototype.createXhrIo=function(){return new SO},AO);function AO(){}function kO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(TO())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var OO=(RO.prototype.size=function(){return this.size_},RO.prototype.type=function(){return this.type_},RO.prototype.slice=function(t,e){if(IO(this.data_)){var n=this.data_,r=(o=t,s=e,(i=n).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new RO(r)}var i,o,s;return new RO(new Uint8Array(this.data_.buffer,t,e-t),!0)},RO.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(TO()){var n=t.map(function(t){return t instanceof RO?t.data_:t});return new RO(kO.apply(null,n))}var r=t.map(function(t){return _O(t)?eO($k.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new RO(o,!0)},RO.prototype.uploadData=function(){return this.data_},RO);function RO(t,e){var n=0,r="";IO(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var PO=(Object.defineProperty(DO.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(DO.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),DO.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},DO.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},DO.makeFromBucketSpec=function(e){var t,n;try{t=DO.makeFromUrl(e)}catch(t){return new DO(e,"")}if(""===t.path)return t;throw n=e,new qk(Wk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},DO.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o,s=Vk.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(t);if(h){var l=h[c.indices.bucket],f=h[c.indices.path];e=new DO(l,f=f||""),c.postModify(e);break}}if(null==e)throw o=t,new qk(Wk.INVALID_URL,"Invalid URL '"+o+"'.");return e},DO);function DO(t,e){this.bucket=t,this.path_=e}function xO(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return wO(n=e)&&!Array.isArray(n)?e:null}function LO(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function MO(t){return"https://"+Vk+"/v0"+t}function FO(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}function UO(t,e){return e}var jO=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||UO},VO=null;function qO(){if(VO)return VO;var t=[];t.push(new jO("bucket")),t.push(new jO("generation")),t.push(new jO("metageneration")),t.push(new jO("name","fullPath",!0));var e=new jO("name");e.xform=function(t,e){return!_O(n=e)||n.length<2?n:LO(n);var n},t.push(e);var n=new jO("size");return n.xform=function(t,e){return gO(e)?Number(e):e},t.push(n),t.push(new jO("timeCreated")),t.push(new jO("updated")),t.push(new jO("md5Hash",null,!0)),t.push(new jO("cacheControl",null,!0)),t.push(new jO("contentDisposition",null,!0)),t.push(new jO("contentEncoding",null,!0)),t.push(new jO("contentLanguage",null,!0)),t.push(new jO("contentType",null,!0)),t.push(new jO("metadata","customMetadata",!0)),VO=t}function BO(r,i){Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new PO(t,e);return i.makeStorageReference(n)}})}function WO(t,e,n){var r=xO(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return BO(r,t),r}(t,r,n)}function HO(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function GO(t){if(!wO(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!wO(n))throw"Expected object for 'customMetadata' mapping."}else if(wO(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var QO="maxResults",KO=1e3,zO="pageToken",YO="prefixes",XO="items";function JO(t,e,n){var r=xO(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[YO])for(var i=0,o=n[YO];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new PO(e,s));r.prefixes.push(a)}if(n[XO])for(var u=0,c=n[XO];u<c.length;u++){var h=c[u];a=t.makeStorageReference(new PO(e,h.name));r.items.push(a)}return r}(t,e,r)}function $O(t){if(!wO(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===QO){if(!EO(n=t[QO])||!Number.isInteger(n)||t[QO]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[QO])throw"Expected maxResults to be less than or equal to "+KO+"."}else{if(e!==zO)throw"Unknown option: "+e;if(t[zO]&&!_O(t[zO]))throw"Expected pageToken to be string."}var n}var ZO=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function tR(t){if(!t)throw Gk()}function eR(r,i){return function(t,e){var n=WO(r,e,i);return tR(null!==n),n}}function nR(r,i){return function(t,e){var n=JO(r,i,e);return tR(null!==n),n}}function rR(r,i){return function(t,e){var n=WO(r,e,i);return tR(null!==n),function(r,t){var e=xO(t);if(null===e)return null;if(!_O(e.downloadTokens))return null;var n=e.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return MO("/b/"+i(e)+"/o/"+i(n))+FO({alt:"media",token:t})})[0]}(n,e)}}function iR(o){return function(t,e){var n,r,i;return(n=401===t.getStatus()?new qk(Wk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=o.bucket,new qk(Wk.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=o.path,new qk(Wk.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e).setServerResponseProp(e.serverResponseProp()),n}}function oR(i){var o=iR(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new qk(Wk.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function sR(t,e,n){var r=MO(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new ZO(r,"GET",eR(t,n),i);return o.errorHandler=oR(e),o}function aR(t,e,n){var r,i,o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=(i=e,(r=null)&&r.contentType||i&&i.type()||"application/octet-stream")),o}function uR(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=aR(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+HO(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=OO.getBlob(c,r,h);if(null===l)throw Kk();var f={name:u.fullPath},p=MO(o),d=t.maxUploadRetryTime(),v=new ZO(p,"POST",eR(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=iR(e),v}var cR=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function hR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){tR(!1)}return tR(!!n&&-1!==(e||["active"]).indexOf(n)),n}function lR(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=aR(e,r,i),a={name:s.fullPath},u=MO(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=HO(s,n),l=t.maxUploadRetryTime();var f=new ZO(u,"POST",function(t){var e;hR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){tR(!1)}return tR(_O(e)),e},l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=iR(e),f}function fR(t,e,n,i){var r=t.maxUploadRetryTime(),o=new ZO(n,"POST",function(t){var e=hR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){tR(!1)}n||tR(!1);var r=Number(n);return tR(!isNaN(r)),new cR(r,i.size(),"final"===e)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=iR(e),o}function pR(t,s,e,a,n,u,r,i){var c=new cR(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new qk(Wk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw Kk();var v=s.maxUploadRetryTime(),y=new ZO(e,"POST",function(t,e){var n,r=hR(t,["active","final"]),i=c.current+h,o=a.size();return n="final"===r?eR(s,u)(t,e):null,new cR(i,o,"final"===r,n)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=iR(t),y}var dR=function(t,e,n){if(bO(t)||gO(e)||gO(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},vR=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function yR(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var s,a,u,c,h,l;if(!(r<=n.length&&n.length<=i))throw s=r,a=i,u=e,c=n.length,l=s===a?1===(h=s)?"argument":"arguments":(h="between "+s+" and "+a,"arguments"),new qk(Wk.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+u+"`: Expected "+h+" "+l+", received "+c+".");for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?zk(o,e,t.message):zk(o,e,t)}}var gR=function(e,t){var n=this;this.validator=function(t){n.optional&&!mO(t)||e(t)},this.optional=!!t};function mR(t,e){function n(t){if(!_O(t))throw"Expected string."}var r,i,o;return r=t?(i=n,o=t,function(t){i(t),o(t)}):n,new gR(r,e)}function bR(){return new gR(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||TO()&&t instanceof Blob))throw"Expected Blob or File."})}function wR(t){return new gR(GO,t)}function _R(){return new gR(function(t){if(!(EO(t)&&0<=t))throw"Expected a number 0 or greater."})}function ER(e,t){return new gR(function(t){if(!(null===t||gO(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function IR(t){return new gR(function(t){if(!(null===t||bO(t)))throw"Expected a Function."},t)}function TR(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var SR=(CR.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},CR.prototype.shouldDoResumable_=function(t){return 262144<t.size()},CR.prototype.start_=function(){this.state_===uO&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},CR.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case uO:e(t);break;case fO:n.transition_(pO);break;case cO:n.transition_(hO)}})},CR.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(t){var e=lR(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.uploadUrl_=t,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},CR.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(t){var e=fR(r.authWrapper_,r.location_,i,r.blob_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){t=t,r.request_=null,r.updateProgress_(t.current),r.needToFetchStatus_=!1,t.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},CR.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new cR(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=pR(r.location_,r.authWrapper_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(dO)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(lO)):r.completeTransitions_()},r.errorHandler_)})},CR.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},CR.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=sR(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(lO)},r.metadataErrorHandler_)})},CR.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=uR(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(lO)},r.errorHandler_)})},CR.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},CR.prototype.transition_=function(t){if(this.state_!==t)switch(t){case fO:case cO:this.state_=t,null!==this.request_&&this.request_.cancel();break;case uO:var e=this.state_===hO;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case hO:this.state_=t,this.notifyObservers_();break;case pO:this.error_=Qk(),this.state_=t,this.notifyObservers_();break;case dO:case lO:this.state_=t,this.notifyObservers_()}},CR.prototype.completeTransitions_=function(){switch(this.state_){case cO:this.transition_(hO);break;case fO:this.transition_(pO);break;case uO:this.start_()}},Object.defineProperty(CR.prototype,"snapshot",{get:function(){var t=yO(this.state_);return new vR(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),CR.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=IR(!0).validator,s=ER(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(mO(t.next)||mO(t.error)||mO(t.complete)))throw"";return}catch(t){throw r}}yR("on",[mR(function(){if(t!==aO.STATE_CHANGED)throw"Expected one of the event types: ["+aO.STATE_CHANGED+"]."}),ER(a,!0),IR(!0),IR(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&yR("on",i,arguments);var r=new dR(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[ER(function(t){if(null===t)throw r;a(t)}),IR(!0),IR(!0)];return mO(e)||mO(n)||mO(o)?c(null)(e,n,o):c(h)},CR.prototype.then=function(t,e){return this.promise_.then(t,e)},CR.prototype.catch=function(t){return this.then(null,t)},CR.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},CR.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},CR.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},CR.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(yO(this.state_)){case vO.SUCCESS:TR(this.resolve_.bind(null,this.snapshot))();break;case vO.CANCELED:case vO.ERROR:TR(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},CR.prototype.notifyObserver_=function(t){switch(yO(this.state_)){case vO.RUNNING:case vO.PAUSED:t.next&&TR(t.next.bind(t,this.snapshot))();break;case vO.SUCCESS:t.complete&&TR(t.complete.bind(t))();break;case vO.CANCELED:case vO.ERROR:t.error&&TR(t.error.bind(t,this.error_))();break;default:t.error&&TR(t.error.bind(t,this.error_))()}},CR.prototype.resume=function(){yR("resume",[],arguments);var t=this.state_===hO||this.state_===cO;return t&&this.transition_(uO),t},CR.prototype.pause=function(){yR("pause",[],arguments);var t=this.state_===uO;return t&&this.transition_(cO),t},CR.prototype.cancel=function(){yR("cancel",[],arguments);var t=this.state_===uO||this.state_===cO;return t&&this.transition_(fO),t},CR);function CR(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=uO,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(Wk.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(dO))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(Wk.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(dO))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var NR=(AR.prototype.toString=function(){return yR("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},AR.prototype.newRef=function(t,e){return new AR(t,e)},AR.prototype.mappings=function(){return qO()},AR.prototype.child=function(t){yR("child",[mR()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new PO(this.location.bucket,r);return this.newRef(this.authWrapper,i)},Object.defineProperty(AR.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new PO(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(AR.prototype,"root",{get:function(){var t=new PO(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(AR.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(AR.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(AR.prototype,"name",{get:function(){return LO(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(AR.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),AR.prototype.put=function(t,e){return void 0===e&&(e=null),yR("put",[bR(),wR(!0)],arguments),this.throwIfRoot_("put"),new SR(this,this.authWrapper,this.location,this.mappings(),new OO(t),e)},AR.prototype.putString=function(t,e,n){void 0===e&&(e=$k.RAW),yR("putString",[mR(),mR(Zk,!0),wR(!0)],arguments),this.throwIfRoot_("putString");var r=eO(e,t),i=Object.assign({},n);return!gO(i.contentType)&&gO(r.contentType)&&(i.contentType=r.contentType),new SR(this,this.authWrapper,this.location,this.mappings(),new OO(r.data,!0),i)},AR.prototype.delete=function(){var a=this;return yR("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.authWrapper,n=a.location,r=MO(n.fullServerUrl()),i=e.maxOperationRetryTime(),(o=new ZO(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=oR(n),o);return a.authWrapper.makeRequest(s,t).getPromise()})},AR.prototype.listAll=function(){yR("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},AR.prototype.listAllHelper=function(o,s){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},AR.prototype.list=function(r){yR("list",[new gR($O,!0)],arguments);var i=this;return this.authWrapper.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&0<n.length&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=MO(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new ZO(s,"GET",nR(t,e.bucket),a);return u.urlParams=o,u.errorHandler=iR(e),u}(i.authWrapper,i.location,"/",e.pageToken,e.maxResults);return i.authWrapper.makeRequest(n,t).getPromise()})},AR.prototype.getMetadata=function(){var n=this;return yR("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var e=sR(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},AR.prototype.updateMetadata=function(h){var l=this;return yR("updateMetadata",[wR()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.authWrapper,n=l.location,r=h,i=l.mappings(),o=MO(n.fullServerUrl()),s=HO(r,i),a=e.maxOperationRetryTime(),(u=new ZO(o,"PATCH",eR(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=oR(n),u);return l.authWrapper.makeRequest(c,t).getPromise()})},AR.prototype.getDownloadURL=function(){var u=this;return yR("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a=(e=u.authWrapper,n=u.location,r=u.mappings(),i=MO(n.fullServerUrl()),o=e.maxOperationRetryTime(),(s=new ZO(i,"GET",rR(e,r),o)).errorHandler=oR(n),s);return u.authWrapper.makeRequest(a,t).getPromise().then(function(t){if(null===t)throw new qk(Wk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},AR.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw e=t,new qk(Wk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var e},AR);function AR(t,e){this.authWrapper=t,this.location=e instanceof PO?e:PO.makeFromUrl(e)}var kR=(OR.prototype.getPromise=function(){return this.promise_},OR.prototype.cancel=function(t){},OR);function OR(t){this.promise_=Promise.reject(t)}var RR=(PR.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},PR.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},PR);function PR(){this.map=new Map,this.id=-9007199254740991}var DR=(xR.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:PO.makeFromBucketSpec(e).bucket},xR.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},xR.prototype.bucket=function(){if(this.deleted_)throw Yk();return this.bucket_},xR.prototype.service=function(){return this.service_},xR.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},xR.prototype.makeRequest=function(t,e){if(this.deleted_)return new kR(Yk());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},xR.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},xR.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},xR.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},xR.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},xR.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},xR);function xR(t,e,n,r,i,o){var s;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;gO(a)&&(this.bucket_=xR.extractBucket_(a),this.appId_=null!==(s=a.appId)&&void 0!==s?s:null)}this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new RR}var LR=(MR.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());mO(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=Gk()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?Yk:Qk)()):i(n=new qk(Wk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,ks([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new FR(!1,null,!0)):this.backoffId_=(e=function(o,t){if(t)o(!1,new FR(!1,null,!0));else{var e=c.pool_.createXhrIo();c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e=(t=t).getErrorCode()===oO.NO_ERROR,n=t.getStatus();if(e&&!c.isRetryStatusCode_(n)){var r=-1!==c.successCodes_.indexOf(n);o(!0,new FR(r,t))}else{var i=t.getErrorCode()===oO.ABORT;o(!1,new FR(!1,null,i))}})}function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},MR.prototype.getPromise=function(){return this.promise_},MR.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},MR.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},MR);function MR(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var FR=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function UR(t,e,n,r){var i,o,s,a,u,c,h=FO(t.urlParams),l=t.url+h,f=Object.assign({},t.headers);return i=f,(o=e)&&(i["X-Firebase-GMPID"]=o),s=f,null!==(a=n)&&0<a.length&&(s.Authorization="Firebase "+a),u=f,c=void 0!==Kl?Kl.SDK_VERSION:"AppManager",u["X-Firebase-Storage-Version"]="webjs/"+c,new LR(l,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var jR=(VR.prototype.ref=function(t){if(yR("ref",[mR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new NR(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},VR.prototype.refFromURL=function(t){return yR("refFromURL",[mR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{PO.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new NR(this.authWrapper_,t)},Object.defineProperty(VR.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),VR.prototype.setMaxUploadRetryTime=function(t){yR("setMaxUploadRetryTime",[_R()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},VR.prototype.setMaxOperationRetryTime=function(t){yR("setMaxOperationRetryTime",[_R()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(VR.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(VR.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),VR);function VR(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new DR(t,e,function(t,e){return new NR(t,e)},UR,this,n),this.app_=t,null!=r)this.bucket_=PO.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new PO(i,""))}this.internals_=new qR(this)}var qR=(BR.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},BR);function BR(t){this.service_=t}var WR,HR;function GR(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new jR(n,r,new NO,e)}HR={TaskState:vO,TaskEvent:aO,StringFormat:$k,Storage:jR,Reference:NR},(WR=Kl).INTERNAL.registerComponent(new da("storage",GR,"PUBLIC").setServiceProps(HR).setMultipleInstances(!0)),WR.registerVersion("@firebase/storage","0.3.37");var QR,KR,zR,YR,XR="0.3.8",JR="FB-PERF-TRACE-MEASURE",$R="@firebase/performance/config",ZR="@firebase/performance/configexpire",tP="Performance",eP=((QR={})["trace started"]="Trace {$traceName} was started before.",QR["trace stopped"]="Trace {$traceName} is not running.",QR["no window"]="Window is not available.",QR["no app id"]="App id is not available.",QR["no project id"]="Project id is not available.",QR["no api key"]="Api key is not available.",QR["invalid cc log"]="Attempted to queue invalid cc event",QR["FB not default"]="Performance can only start when Firebase app instance is the default one.",QR["RC response not ok"]="RC response is not ok",QR["invalid attribute name"]="Attribute name {$attributeName} is invalid.",QR["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",QR["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",QR["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",QR),nP=new Ks("performance",tP,eP),rP=(iP.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},iP.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},iP.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},iP.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},iP.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},iP.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},iP.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},iP.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},iP.getInstance=function(){return void 0===KR&&(KR=new iP(zR)),KR},iP);function iP(t){if(!(this.window=t))throw nP.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function oP(t,e){var n=t.length-e.length;if(n<0||1<n)throw nP.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var sP,aP,uP,cP=(hP.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw nP.create("no app id");return t},hP.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw nP.create("no project id");return t},hP.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw nP.create("no api key");return t},hP.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},hP.getInstance=function(){return void 0===YR&&(YR=new hP),YR},hP);function hP(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=oP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=oP("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function lP(){return sP}(uP=aP=aP||{})[uP.UNKNOWN=0]="UNKNOWN",uP[uP.VISIBLE=1]="VISIBLE",uP[uP.HIDDEN=2]="HIDDEN";var fP=["firebase_","google_","ga_"],pP=new RegExp("^[a-zA-Z]\\w*$");function dP(){switch(rP.getInstance().document.visibilityState){case"visible":return aP.VISIBLE;case"hidden":return aP.HIDDEN;default:return aP.UNKNOWN}}var vP=new Ra(tP);vP.logLevel=Ia.INFO;var yP="0.0.1",gP={loggingEnabled:!0},mP="FIREBASE_INSTALLATIONS_AUTH";function bP(t){var r,e=function(){var t=rP.getInstance().localStorage;if(!t)return;var e=t.getItem(ZR);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem($R);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(_P(e),Promise.resolve()):(r=t,function(){var t=cP.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+cP.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+cP.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:mP+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:cP.getInstance().getAppId(),app_version:XR,sdk_version:yP})});return fetch(n).then(function(t){if(t.ok)return t.json();throw nP.create("RC response not ok")})}).catch(function(){vP.info(wP)}).then(_P).then(function(t){return function(t){var e=rP.getInstance().localStorage;if(!t||!e)return;e.setItem($R,JSON.stringify(t)),e.setItem(ZR,String(Date.now()+60*cP.getInstance().configTimeToLive*60*1e3))}(t)},function(){}))}var wP="Could not fetch config, will use default configs";function _P(t){if(!t)return t;var e=cP.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):gP.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=EP(e.tracesSamplingRate),e.logNetworkAfterSampling=EP(e.networkRequestsSamplingRate),t}function EP(t){return Math.random()<=t}var IP,TP=1;function SP(){return TP=2,IP=IP||function(){var n=rP.getInstance().document;return new Promise(function(t){if(n&&"complete"!==n.readyState){var e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())};n.addEventListener("readystatechange",e)}else t()})}().then(function(){return(t=cP.getInstance().installationsService.getId()).then(function(t){sP=t}),t;var t}).then(function(t){return bP(t)}).then(function(){return CP()},function(){return CP()})}function CP(){TP=3}var NP,AP=1e4,kP=5500,OP=3,RP=OP,PP=[],DP=!1;function xP(t){setTimeout(function(){if(0!==RP)return PP.length?void function(){var t=ks(PP);PP=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,i){return function(t){var e=cP.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||vP.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=AP;isNaN(e)||(n=Math.max(e,n));var r=t.logResponseDetails;Array.isArray(r)&&0<r.length&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(PP=ks(i,PP),vP.info("Retry transport request later.")),RP=OP,xP(n)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:cP.getInstance().logSource,log_event:e},t).catch(function(){PP=ks(t,PP),RP--,vP.info("Tries left: "+RP+"."),xP(AP)})}():xP(AP)},t)}function LP(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw nP.create("invalid cc log");PP=ks(PP,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function MP(t,e){(NP=NP||LP(jP))(t,e)}function FP(t){var e=cP.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&rP.getInstance().requiredApisAvailable()&&(t.isAuto&&dP()!==aP.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===TP?UP(t):SP().then(function(){return UP(t)},function(){return UP(t)})))}function UP(t){lP()&&setTimeout(function(){return MP(t,1)},0)}function jP(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:VP(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:VP(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function VP(){return{google_app_id:cP.getInstance().getAppId(),app_instance_id:lP(),web_app_info:{sdk_version:XR,page_url:rP.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=rP.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:dP(),effective_connection_type:function(){var t=rP.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var qP=["_fp","_fcp","_fid"];var BP=(WP.prototype.start=function(){if(1!==this.state)throw nP.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},WP.prototype.stop=function(){if(2!==this.state)throw nP.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),FP(this)},WP.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Is({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}FP(this)},WP.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},WP.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<qP.indexOf(n))&&n.startsWith("_"))throw nP.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},WP.prototype.getMetric=function(t){return this.counters[t]||0},WP.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length||fP.some(function(t){return n.startsWith(t)})||!n.match(pP)),o=0!==(r=e).length&&r.length<=100;if(i&&o)this.customAttributes[t]=e;else{if(!i)throw nP.create("invalid attribute name",{attributeName:t});if(!o)throw nP.create("invalid attribute value",{attributeValue:e})}},WP.prototype.getAttribute=function(t){return this.customAttributes[t]},WP.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},WP.prototype.getAttributes=function(){return Is({},this.customAttributes)},WP.prototype.setStartTime=function(t){this.startTimeUs=t},WP.prototype.setDuration=function(t){this.durationUs=t},WP.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},WP.createOobTrace=function(t,e,n){var r=rP.getInstance().getUrl();if(r){var i=new WP("_wt_"+r,!0),o=Math.floor(1e3*rP.getInstance().getTimeOrigin());if(i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e){var s=e.find(function(t){return"first-paint"===t.name});s&&s.startTime&&i.putMetric("_fp",Math.floor(1e3*s.startTime));var a=e.find(function(t){return"first-contentful-paint"===t.name});a&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}FP(i)}},WP.createUserTimingTrace=function(t){FP(new WP(t,!1,t))},WP);function WP(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=rP.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||JR+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function HP(t){var e=t;if(e&&void 0!==e.responseStart){var n=rP.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=cP.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return MP(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var GP=5e3;function QP(){lP()&&(setTimeout(function(){return function(){var t=rP.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){BP.createOobTrace(e,n),r=void 0},GP);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),BP.createOobTrace(e,n,t))})}else BP.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=rP.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){HP(r[n])}t.setupObserver("resource",HP)}()},0),setTimeout(function(){return function(){for(var t=rP.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){KP(r[n])}t.setupObserver("measure",KP)}()},0))}function KP(t){var e=t.name;e.substring(0,JR.length)!==JR&&BP.createUserTimingTrace(e)}var zP=(YP.prototype.trace=function(t){return new BP(t)},Object.defineProperty(YP.prototype,"instrumentationEnabled",{get:function(){return cP.getInstance().instrumentationEnabled},set:function(t){cP.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(YP.prototype,"dataCollectionEnabled",{get:function(){return cP.getInstance().dataCollectionEnabled},set:function(t){cP.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),YP);function YP(t){this.app=t,rP.getInstance().requiredApisAvailable()?(DP||(xP(kP),DP=!0),SP().then(QP,QP)):vP.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}var XP;function JP(t,e){if("[DEFAULT]"!==t.name)throw nP.create("FB not default");if("undefined"==typeof window)throw nP.create("no window");return zR=window,cP.getInstance().firebaseAppInstance=t,cP.getInstance().installationsService=e,new zP(t)}(XP=Kl).INTERNAL.registerComponent(new da("performance",function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return JP(e,n)},"PUBLIC")),XP.registerVersion("@firebase/performance","0.3.8");var $P,ZP,tD,eD,nD="measurementId",rD="firebase_id",iD="origin",oD="https://www.googletagmanager.com/gtag/js";(ZP=$P=$P||{}).EVENT="event",ZP.SET="set",ZP.CONFIG="config",(eD=tD=tD||{}).ADD_SHIPPING_INFO="add_shipping_info",eD.ADD_PAYMENT_INFO="add_payment_info",eD.ADD_TO_CART="add_to_cart",eD.ADD_TO_WISHLIST="add_to_wishlist",eD.BEGIN_CHECKOUT="begin_checkout",eD.CHECKOUT_PROGRESS="checkout_progress",eD.EXCEPTION="exception",eD.GENERATE_LEAD="generate_lead",eD.LOGIN="login",eD.PAGE_VIEW="page_view",eD.PURCHASE="purchase",eD.REFUND="refund",eD.REMOVE_FROM_CART="remove_from_cart",eD.SCREEN_VIEW="screen_view",eD.SEARCH="search",eD.SELECT_CONTENT="select_content",eD.SELECT_ITEM="select_item",eD.SELECT_PROMOTION="select_promotion",eD.SET_CHECKOUT_OPTION="set_checkout_option",eD.SHARE="share",eD.SIGN_UP="sign_up",eD.TIMING_COMPLETE="timing_complete",eD.VIEW_CART="view_cart",eD.VIEW_ITEM="view_item",eD.VIEW_ITEM_LIST="view_item_list",eD.VIEW_PROMOTION="view_promotion",eD.VIEW_SEARCH_RESULTS="view_search_results";var sD,aD=new Ra("@firebase/analytics");function uD(t,n,e){var f,p,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)};return window[e]&&"function"==typeof window[e]&&(r=window[e]),window[e]=(f=r,p=t,function(t,e,n){if(t===$P.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f($P.EVENT,e,n||{})}).catch(function(t){return aD.error(t)})}else t===$P.CONFIG?(p[e]||Promise.resolve()).then(function(){f($P.CONFIG,e,n)}).catch(function(t){return aD.error(t)}):f($P.SET,e)}),{gtagCore:r,wrappedGtag:window[e]}}var cD,hD,lD=((sD={})["no-ga-id"]='"'+nD+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',sD["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",sD["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",sD["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",sD),fD=new Ks("analytics","Analytics",lD),pD={},dD="dataLayer",vD="gtag",yD=!1;function gD(t){if(yD)throw fD.create("already-initialized");t.dataLayerName&&(dD=t.dataLayerName),t.gtagName&&(vD=t.gtagName)}function mD(t,e){var n,r,i,o,c=t.options[nD];if(!c)throw fD.create("no-ga-id");if(null!=pD[c])throw fD.create("already-exists",{id:c});if(!yD){!function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(oD))return r}}()&&(i=dD,(o=document.createElement("script")).src=oD+"?l="+i,o.async=!0,document.head.appendChild(o)),n=dD,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var s=uD(pD,dD,vD),a=s.wrappedGtag,u=s.gtagCore;hD=a,cD=u,yD=!0}return pD[c]=function(r,i,o){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o($P.CONFIG,r.options[nD],((n={})[rD]=e,n[iD]="firebase",n.update=!0,n)),[2]}})})}(t,e,cD),{app:t,logEvent:function(t,e,n){return r=hD,i=c,o=t,u=(s=e)||{},(a=n)&&a.global||(u=Is(Is({},s),{send_to:i})),void r($P.EVENT,o,u||{});var r,i,o,s,a,u},setCurrentScreen:function(t,e){return n=hD,r=c,i=t,void((o=e)&&o.global?n($P.SET,{screen_name:i}):n($P.CONFIG,r,{update:!0,screen_name:i}));var n,r,i,o},setUserId:function(t,e){return n=hD,r=c,i=t,void((o=e)&&o.global?n($P.SET,{user_id:i}):n($P.CONFIG,r,{update:!0,user_id:i}));var n,r,i,o},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}t($P.SET,i)}else t($P.CONFIG,e,{update:!0,user_properties:n})}(hD,c,t,e)},setAnalyticsCollectionEnabled:function(t){return e=t,void(window["ga-disable-"+c]=!e);var e}}}var bD,wD="analytics";(bD=Kl).INTERNAL.registerComponent(new da(wD,function(t){return mD(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:gD,EventName:tD})),bD.INTERNAL.registerComponent(new da("analytics-internal",function(t){try{return{logEvent:t.getProvider(wD).getImmediate().logEvent}}catch(t){throw fD.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),bD.registerVersion("@firebase/analytics","0.3.8");var _D,ED=(ID.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},ID.prototype.fetch=function(s){return Ts(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},ID);function ID(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var TD=((_D={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",_D["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",_D["registration-api-key"]="Undefined API key. Check Firebase app initialization.",_D["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",_D["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",_D["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",_D["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",_D["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",_D["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",_D["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',_D["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',_D["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",_D["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",_D),SD=new Ks("remoteconfig","Remote Config",TD);var CD=(ND.prototype.fetch=function(_){return Ts(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b,w;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":_.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){_.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),SD.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return b=t.sent(),[3,10];case 9:throw w=t.sent(),SD.create("fetch-client-parse",{originalErrorMessage:w.message});case 10:g=b.entries,m=b.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==v&&200!==v)throw SD.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:g}]}var e})})},ND);function ND(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var AD=(kD.prototype.addEventListener=function(t){this.listeners.push(t)},kD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},kD);function kD(){this.listeners=[]}var OD=["1","true","t","yes","y","on"],RD=(PD.prototype.asString=function(){return this._value},PD.prototype.asBoolean=function(){return"static"!==this._source&&0<=OD.indexOf(this._value.toLowerCase())},PD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},PD.prototype.getSource=function(){return this._source},PD);function PD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var DD=(xD.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ia.DEBUG;break;case"silent":this._logger.logLevel=Ia.SILENT;break;default:this._logger.logLevel=Ia.ERROR}},Object.defineProperty(xD.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(xD.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),xD.prototype.activate=function(){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},xD.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},xD.prototype.fetch=function(){return Ts(this,void 0,void 0,function(){var r,i,o,s=this;return Ss(this,function(t){switch(t.label){case 0:r=new AD,setTimeout(function(){return Ts(s,void 0,void 0,function(){return Ss(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof Gs&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},xD.prototype.fetchAndActivate=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},xD.prototype.getAll=function(){var n=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Is(Is({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},xD.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},xD.prototype.getNumber=function(t){return this.getValue(t).asNumber()},xD.prototype.getString=function(t){return this.getValue(t).asString()},xD.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new RD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new RD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new RD("static"))},xD);function xD(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function LD(t,e){var n=t.target.error||void 0;return SD.create(e,{originalErrorMessage:n&&n.message})}var MD="app_namespace_store",FD="firebase_remote_config",UD=1;var jD=(VD.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},VD.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},VD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},VD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},VD.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},VD.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},VD.prototype.getActiveConfig=function(){return this.get("active_config")},VD.prototype.setActiveConfig=function(t){return this.set("active_config",t)},VD.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},VD.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},VD.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},VD.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},VD.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},VD.prototype.get=function(a){return Ts(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([MD],"readonly").objectStore(MD),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(LD(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(SD.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},VD.prototype.set=function(a,u){return Ts(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([MD],"readwrite").objectStore(MD),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(LD(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(SD.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},VD.prototype.delete=function(a){return Ts(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([MD],"readwrite").objectStore(MD),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(LD(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(SD.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},VD.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},VD);function VD(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(FD,UD);t.onerror=function(t){n(LD(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(MD,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var qD=(BD.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},BD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},BD.prototype.getActiveConfig=function(){return this.activeConfig},BD.prototype.loadFromStorage=function(){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},BD.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},BD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},BD.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},BD);function BD(t){this.storage=t}var WD=(HD.prototype.fetch=function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},HD.prototype.attemptFetch=function(c,t){var h=t.throttleEndTimeMillis,l=t.backoffCount;return Ts(this,void 0,void 0,function(){var s,a,u;return Ss(this,function(t){switch(t.label){case 0:return[4,(i=c.signal,o=h,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(SD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(c)];case 3:return s=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,s];case 5:if(!function(t){if(t instanceof Gs){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(a=t.sent()))throw a;return u={throttleEndTimeMillis:Date.now()+(e=l,n=1e3*Math.pow(2,e),r=Math.round(.5*n*(Math.random()-.5)*2),Math.min(144e5,n+r)),backoffCount:l+1},[4,this.storage.setThrottleMetadata(u)];case 6:return t.sent(),[2,this.attemptFetch(c,u)];case 7:return[2]}var e,n,r,i,o})})},HD);function HD(t,e){this.client=t,this.storage=e}var GD,QD="@firebase/remote-config";return(GD=Kl).INTERNAL.registerComponent(new da("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw SD.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw SD.create("registration-project-id");if(!s)throw SD.create("registration-api-key");if(!a)throw SD.create("registration-app-id");e=e||"firebase";var u=new jD(a,n.name,e),c=new qD(u),h=new Ra(QD);h.logLevel=Ia.ERROR;var l=new CD(r,GD.SDK_VERSION,e,o,s,a),f=new WD(l,u),p=new ED(f,u,c,h),d=new DD(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),GD.registerVersion(QD,"0.1.24"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Kl.registerVersion("firebase","7.15.5","cdn"),Kl});
//# sourceMappingURL=firebase.js.map
